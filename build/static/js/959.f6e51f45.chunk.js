"use strict";(self.webpackChunkcomfygen_react_new_base_folder=self.webpackChunkcomfygen_react_new_base_folder||[]).push([[959],{138:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(5043),r=t(5200),o=t(9804),l=t(423),n=t(579);const i=e=>{let{onFileUpload:s,allowedTypes:t=["image/png","image/jpeg","image/jpg","application/pdf"],maxSize:i=5,isUploading:d,file:c,setFile:u,inputId:m}=e;const[p,x]=(0,a.useState)(""),[g,h]=(0,a.useState)(!1),[v,y]=(0,a.useState)(null),f=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(c instanceof File){const e=URL.createObjectURL(c);return y(e),()=>URL.revokeObjectURL(e)}y("string"===typeof c?c:null)},[c]);const b=e=>{if(x(""),!e)return;if(!t.includes(e.type))return void x("Invalid file type. Allowed: ".concat(t.join(", ")));const a=1024*i*1024;e.size>a?x("File too large. Max: ".concat(i,"MB")):(u(e),s&&s(e))},j=(0,a.useCallback)(e=>{e.preventDefault(),h(!0)},[]),N=(0,a.useCallback)(()=>h(!1),[]),w=(0,a.useCallback)(e=>{e.preventDefault(),h(!1);const s=e.dataTransfer.files[0];b(s)},[]),C=(0,a.useCallback)(()=>{u(""),x(""),y(null),f.current&&(f.current.value=""),s&&s(null)},[u,s]);return(0,n.jsxs)("div",{className:"w-full mx-auto",children:[(0,n.jsxs)("div",{className:"\n      relative border border-dashed rounded-xl p-5 text-center transition-all duration-300 cursor-pointer\n      ".concat(g?"border-blue-400 bg-[#F6F8FA] scale-105":c?"border-green-300 glassy-card":p?"border-red-300 bg-red-50":"border-gray-300 bg-card  ","\n      ").concat(d?"pointer-events-none opacity-70":"","\n    "),onDragOver:j,onDragLeave:N,onDrop:w,onClick:()=>!c&&f.current.click(),children:[(0,n.jsx)("input",{type:"file",id:m,ref:f,accept:t.join(","),onChange:e=>{const s=e.target.files[0];b(s)},className:"hidden",disabled:d}),d?(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),(0,n.jsx)("p",{className:"glassy-text-primary font-medium",children:"Uploading..."})]}):v?(0,n.jsxs)("div",{className:"relative",children:[(_=v,[".jpg",".jpeg",".png",".gif",".webp",".bmp",".svg"].some(e=>_.toLowerCase().endsWith(e))?(0,n.jsx)("img",{src:v,alt:"preview",className:"w-full md:max-w-full md:min-h-80 min-h-80 max-h-80 object-contain rounded-lg"}):(0,n.jsx)("iframe",{src:"https://docs.google.com/gview?url=".concat(encodeURIComponent(v),"&embedded=true"),title:"file-preview",className:"w-full h-80 border rounded glassy-card"})),(0,n.jsx)("button",{onClick:C,className:"absolute -top-2 -right-2 p-1 glassy-card rounded-full shadow-md hover:bg-red-100 transition",children:(0,n.jsx)(l.WQq,{className:"h-4 w-4 text-red-500"})})]}):(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("div",{className:"rounded-full p-4 mx-auto w-16 h-16 flex items-center justify-center ".concat(g?"glassy-card":"bg-card"),children:(0,n.jsx)(o.tAF,{className:"h-8 w-8 ".concat(g?"text-blue-500":"text-secondary")})}),(0,n.jsx)("p",{className:"glassy-text-primary font-semibold ".concat(g?"text-blue-600":""),children:g?"Drop your file here":"Upload your file"}),(0,n.jsx)("p",{className:"glassy-text-secondary",children:"Drag and drop or click to browse"}),(0,n.jsxs)("div",{className:"glassy-card rounded-lg p-3 border border-gray-200 text-xs glassy-text-secondary",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Supported:"})," ",t.map(e=>e.split("/")[1].toUpperCase()).join(", ")]}),(0,n.jsxs)("p",{className:"mt-1",children:[(0,n.jsx)("strong",{children:"Max size:"})," ",i,"MB"]})]})]})]}),p&&(0,n.jsxs)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center space-x-2",children:[(0,n.jsx)(r.y3G,{className:"h-5 w-5 text-red-500"}),(0,n.jsx)("p",{className:"text-red-700 text-sm",children:p})]})]});var _}},7959:(e,s,t)=>{t.r(s),t.d(s,{default:()=>w});var a=t(5043),r=t(9981),o=t(5200);const l=JSON.parse('{"headerItems":[{"name":"Home","path":"/user/feed"},{"name":"Courses","path":"/user/course/recommended"},{"name":"Assessment","path":"/user/assessment"},{"name":"Opportunities","path":"/user/opportunitiess"},{"name":"Quest","path":"/user/quest"}]}');var n=t(10),i=t(820),d=(t(5413),t(3003)),c=t(5937),u=t(6328),m=t(8059),p=t(8214),x=t(8155),g=t(9442),h=t(138),v=t(9534),y=t(6626),f=t(2638),b=t(7647),j=(t(3500),t(2639)),N=t(579);const w=e=>{var s,t,w,C,_,k,S,E,I,A,U,R,T;let{profileData:D,setUserType:M,playAndShowNotification:O,navbarOpen:F,setNavbarOpen:L}=e;const z=(0,d.wA)(),[q,V]=(0,a.useState)(!1),[J,K]=(0,a.useState)(!1),W=(0,r.zy)(),P=(0,a.useRef)(),B=(0,a.useRef)(),[G,Q]=(0,a.useState)(!1),H=(0,n.Ri)("ACCESS_MODE"),[Z,X]=(0,a.useState)("6"===H?"Recruiter":"STUDENT"),{token:Y,role:$,activeMode:ee,isAssignedUser:se,isCompany:te,isInstitution:ae,isUser:re,updateToken:oe,updateRole:le,updateActiveMode:ne,updateIsAssignedUser:ie,clearAll:de}=(0,f.r0)(),ce=(0,r.Zp)(),{profileImage:ue}=(0,i.c)(),me=null===D||void 0===D||null===(s=D.personalInfo)||void 0===s?void 0:s.profile_picture_url,[pe,xe]=(0,a.useState)(!1),[ge,he]=(0,a.useState)(!1),[ve,ye]=(0,a.useState)(!1);(0,a.useEffect)(()=>{const e=e=>{P.current&&!P.current.contains(e.target)&&K(!1),B.current&&!B.current.contains(e.target)&&Q(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const[fe,be]=(0,a.useState)(!1),je=async(e,s)=>{xe(!0);try{const t="company"===s?c.pr:c.eB,a=await z(t({accessMode:Z,["".concat(s,"Id")]:e})).unwrap();a&&((0,n.TV)("TOKEN",JSON.stringify(a.data.token)),(0,n.TV)("ROLE",a.data.accessMode),(0,n.TV)("ACTIVE_MODE",s),(0,n.TV)("ASSIGNED_USER",a.data.isAssignedUser),oe(a.data.token),le(a.data.accessMode),ne(s),ie(a.data.isAssignedUser),u.oR.success((null===a||void 0===a?void 0:a.message)||"".concat(s," login successful")),ce("/".concat(s)))}catch(t){console.error(t),u.oR.error(t||"Invalid credentials or server error")}finally{xe(!1)}};(0,a.useEffect)(()=>{K(!1),Q(!1)},[W.pathname]);const Ne=(0,a.useRef)(null),[we,Ce]=(0,a.useState)({value:"Master Entries",label:"Master Entries"}),{companiesList:{data:_e}={},companyDetails:{data:ke}={}}=(0,d.d4)(e=>e.userCompanies),{institutionsList:{data:Se}={}}=(0,d.d4)(e=>e.institute),Ee=(0,a.useCallback)(async function(){const e={page:1,size:100,populate:"industry|name",select:"name display_name email industry phone_no company_size company_type is_verified createdAt logo_url created_by_users ",searchFields:"name",keyWord:"",query:JSON.stringify({created_by_users:!1})};try{xe(!0),await z((0,v.i9)(e))}catch(s){u.oR.error("Failed to fetch companies list"),console.error("Error fetching companies:",s)}finally{xe(!1)}},[z]),Ie=(0,a.useCallback)(async function(){const e={page:1,size:100,keyWord:"",query:JSON.stringify({created_by_users:!1})};try{xe(!0),await z((0,y._E)(e))}catch(s){u.oR.error("Failed to fetch companies list"),console.error("Error fetching companies:",s)}finally{xe(!1)}},[z]);(0,a.useEffect)(()=>{Ee(),Ie()},[z,Ee,Ie]);const{stepIndex:Ae,steps:Ue,setAlertMessage:Re}=(0,b.M)();return(0,a.useEffect)(()=>{if(!Ue[Ae])return;const e=Ue[Ae].target,s=e.includes("profile-dropdown"),t=e.includes("companies-dropdown")||e.includes("company-list"),a=e.includes("institutions-dropdown")||e.includes("institution-list");if((s||t||a)&&(J||K(!0)),t){const e=setInterval(()=>{document.querySelector("[data-tour='companies-dropdown']")&&(he(!0),clearInterval(e))},100);setTimeout(()=>{document.querySelector("[data-tour='companies-dropdown']")||(Re("\u26a0 Companies dropdown not found! Make sure your company list is loaded."),clearInterval(e))},3e3)}if(a){const e=setInterval(()=>{document.querySelector("[data-tour='institutions-dropdown']")&&(ye(!0),clearInterval(e))},100);setTimeout(()=>{document.querySelector("[data-tour='institutions-dropdown']")||(Re("\u26a0 Institutions dropdown not found! Make sure your institution list is loaded."),clearInterval(e))},3e3)}},[Ae,Ue,J,ge,ve]),(0,N.jsxs)("header",{className:"",ref:Ne,children:[(0,N.jsxs)("div",{className:"mx-auto w-full px-4 sm:px-6 lg:px-8 flex justify-between items-center h-16",children:[(0,N.jsxs)("div",{className:"flex items-center justify-between p-4   relative",children:[!F&&window.innerWidth<=1e3&&(0,N.jsx)("button",{className:"fixed top-4 left-4 p-2 z-60 flex items-center justify-center rounded-md hover:glassy-card transition-all duration-300 hover:scale-110",onClick:()=>L(!0),children:(0,N.jsx)(j.Jtp,{className:"text-xl glassy-text-primary"})}),(0,N.jsx)("div",{className:"flex items-center gap-3 px-4 py-3",children:(0,N.jsx)("img",{src:"/Frame 1000004906.png",alt:"logo",className:"h-8 w-auto max-w-[120px] sm:h-9 md:h-10 lg:h-11 transition-transform duration-300 hover:scale-105 object-contain cursor-pointer",onClick:()=>ce("/user/feed")})})]}),(0,N.jsx)("div",{className:"flex items-center gap-4",children:(0,N.jsx)("nav",{className:"hidden lg:flex lg:gap-14 md:gap-3 2xl:ps-0 xl:ps-8 md:ps-10 lg:ps-0 flex-1",children:null===l||void 0===l||null===(t=l.headerItems)||void 0===t?void 0:t.map((e,s)=>{const t=W.pathname===(null===e||void 0===e?void 0:e.path);null===e||void 0===e||e.path;return(0,N.jsx)(r.N_,{to:null===e||void 0===e?void 0:e.path,"data-tour":"header-".concat(null===e||void 0===e?void 0:e.name.toLowerCase()),className:"lg:text-[16px] md:text-[14px] transition duration-200 ".concat(t?"font-semibold glassy-text-primary border-b-2 border-blue-600":"font-medium glassy-text-primary hover:text-blue-600 hover:border-b-2 hover:border-blue-600"," pb-1"),children:null===e||void 0===e?void 0:e.name},s)})})}),(0,N.jsx)("div",{className:"flex gap-3 items-center relative",children:(0,N.jsx)("div",{className:"flex items-center gap-4",children:(0,N.jsxs)("div",{className:"relative",ref:P,children:[(0,N.jsxs)("button",{className:"flex items-center gap-2 focus:outline-none",onClick:()=>{K(e=>!e),Q(!1)},"data-tour":"profile-dropdown",children:[me?(0,N.jsx)("img",{src:me,alt:"User",className:"w-8 h-8 rounded-full object-cover"},me):(0,N.jsx)("span",{className:"w-8 h-8 rounded-full border flex justify-center items-center glassy-card text-zinc-600 overflow-hidden",children:(0,N.jsx)("img",{src:"/0684456b-aa2b-4631-86f7-93ceaf33303c.png",alt:"dummy logo"})}),(0,N.jsxs)("div",{className:"text-left hidden sm:block",children:[(0,N.jsx)("p",{className:"text-sm font-medium glassy-text-primary leading-none",children:null===D||void 0===D||null===(w=D.personalInfo)||void 0===w?void 0:w.first_name}),(0,N.jsx)("p",{className:"text-xs glassy-text-secondary",children:null===D||void 0===D||null===(C=D.personalInfo)||void 0===C?void 0:C.email})]}),(0,N.jsx)(o.fK4,{className:"glassy-text-secondary transition-transform ".concat(J?"rotate-180":"")})]}),J&&(0,N.jsxs)("div",{className:"absolute right-0 mt-2 w-52 min-w-[200px] glassy-card-header rounded-2xl border-[var(--border-color)] shadow-xl z-50 overflow-hidden transition-all duration-200 ease-out",children:[(0,N.jsx)(r.N_,{to:"/user/profile",className:"block px-4 py-2 text-sm glassy-text-primary hover:bg-[var(--bg-card)] transition-colors",onClick:()=>K(!1),children:"Profile"}),(0,N.jsx)(r.N_,{to:"/user/change-password",className:"block px-4 py-2 text-sm glassy-text-primary hover:bg-[var(--bg-card)] transition-colors",onClick:()=>K(!1),children:"Change Password"}),(0,N.jsxs)("div",{className:"border-t border-[var(--border-color)]",children:[(0,N.jsxs)("button",{onClick:()=>he(e=>!e),className:"w-full flex justify-between items-center px-4 py-2 text-sm glassy-text-primary hover:bg-[var(--bg-card)] transition-colors ","data-tour":"companies-dropdown",children:["Companies",(0,N.jsx)(o.fK4,{className:"ml-2 glassy-text-primary transition-transform ".concat(ge?"rotate-180":"")})]}),ge&&(0,N.jsxs)("div",{className:"pl-4 space-y-1 max-h-60 overflow-y-auto","data-tour":"company-list",children:[(null===_e||void 0===_e||null===(_=_e.data)||void 0===_||null===(k=_.list)||void 0===k?void 0:k.length)>0?_e.data.list.map(e=>{var s,t;return(0,N.jsxs)(r.N_,{className:"flex items-center gap-2 py-2 text-sm glassy-text-primary rounded-lg hover:bg-[var(--bg-card)] transition-colors",onClick:()=>je(e._id,"company"),children:[e.logo_url?(0,N.jsx)("img",{src:e.logo_url,alt:"".concat(e.name," logo"),className:"w-6 h-6 rounded-full object-cover border border-[var(--border-color)]",onError:e=>{e.currentTarget.onerror=null,e.currentTarget.src="/companylogo.png"}},e.logo_url):(0,N.jsx)("div",{className:"w-6 h-6 flex items-center justify-center rounded-full glassy-card glassy-text-secondary text-xs font-semibold",children:(null===(s=e.name)||void 0===s||null===(t=s.charAt(0))||void 0===t?void 0:t.toUpperCase())||"C"}),(0,N.jsx)("span",{className:"truncate",children:e.name})]},e._id)}):(0,N.jsx)("p",{className:"py-2 text-sm glassy-text-secondary",children:"No companies found"}),(null===_e||void 0===_e||null===(S=_e.data)||void 0===S||null===(E=S.list)||void 0===E?void 0:E.length)<5&&(0,N.jsx)(r.N_,{to:"/user/create-company",className:"block py-2 text-sm glassy-text-primary hover:bg-[var(--bg-card)] rounded-lg transition-colors",onClick:()=>{he(!1),K(!1)},children:"\u2795 Create Company"})]})]}),(0,N.jsxs)("div",{className:" ",children:[(0,N.jsxs)("button",{onClick:()=>ye(e=>!e),className:"w-full flex justify-between items-center px-4 py-2 text-sm glassy-text-primary hover:bg-[var(--bg-card)] transition-colors","data-tour":"institutions-dropdown",children:["Institution",(0,N.jsx)(o.fK4,{className:"ml-2 glassy-text-primary transition-transform ".concat(ve?"rotate-180":"")})]}),ve&&(0,N.jsxs)("div",{className:"pl-4 space-y-1","data-tour":"institution-list",children:[(null===Se||void 0===Se||null===(I=Se.data)||void 0===I||null===(A=I.list)||void 0===A?void 0:A.length)>0?Se.data.list.map(e=>{var s,t;return(0,N.jsxs)(r.N_,{className:"flex items-center gap-2 py-2 text-sm glassy-text-primary rounded-lg hover:bg-[var(--bg-card)] transition-colors",onClick:()=>{je(e._id,"institution")},children:[e.logo_url?(0,N.jsx)("img",{src:e.logo_url,alt:"".concat(e.name," logo"),className:"w-6 h-6 rounded-full object-cover border border-[var(--border-color)]",onError:e=>{e.currentTarget.onerror=null,e.currentTarget.src="/companylogo.png"}},e.logo_url):(0,N.jsx)("div",{className:"w-6 h-6 flex items-center justify-center rounded-full glassy-card glassy-text-secondary text-xs font-semibold",children:(null===(s=e.name)||void 0===s||null===(t=s.charAt(0))||void 0===t?void 0:t.toUpperCase())||"C"}),(0,N.jsx)("span",{className:"truncate  ",children:e.name})]},e._id)}):(0,N.jsx)("p",{className:" py-2 text-sm glassy-text-primary",children:"No Institution found"}),(null===Se||void 0===Se||null===(U=Se.data)||void 0===U||null===(R=U.list)||void 0===R?void 0:R.length)<5&&(0,N.jsx)(r.N_,{to:"/user/create-institute",className:"block   py-2 text-sm glassy-text-primary rounded-lg transition-colors",onClick:()=>{ye(!1),K(!1)},children:"\u2795 Create Institution"})]})]}),(0,N.jsx)("button",{onClick:()=>{(0,n.zs)("VERIFIED_TOKEN"),window.location.reload()},className:"w-full text-left px-4 py-2 text-sm glassy-text-primary hover:bg-[var(--bg-card)] border-t border-[var(--border-color)] transition-colors",children:"Logout"})]}),q&&(0,N.jsx)("div",{className:"absolute right-0 mt-2 w-52 min-w-[200px] glassy-card-header rounded-2xl border-[var(--border-color)] shadow-xl z-50 overflow-hidden transition-all duration-200 ease-out",children:null===l||void 0===l||null===(T=l.headerItems)||void 0===T?void 0:T.map((e,s)=>{const t=W.pathname===(null===e||void 0===e?void 0:e.path);return(0,N.jsx)(r.N_,{to:null===e||void 0===e?void 0:e.path,className:"block px-3 py-2 text-base transition duration-200 ".concat(t?"font-semibold glassy-text-primary border-b-2 border-blue-600":"font-medium glassy-text-primary hover:text-blue-600 hover:border-b-2 hover:border-blue-600"),onClick:()=>V(!1),children:null===e||void 0===e?void 0:e.name},s)})})]})})})]}),(0,N.jsx)(m.A,{isOpen:fe,onClose:()=>be(!1),title:"Create ",children:(0,N.jsxs)("div",{className:"grid grid-cols-2 gap-3 items-center",children:[(0,N.jsx)(p.A,{label:"Name",className:"w-full h-10",placeholder:"Enter Name"}),(0,N.jsx)(x.A,{options:[]}),(0,N.jsx)(g.A,{placeholder:"State Date"}),(0,N.jsx)(g.A,{placeholder:"State Date",label:"End Date"}),(0,N.jsxs)("div",{className:"col-span-2",children:[(0,N.jsx)(p.A,{label:"Priority",className:"w-full h-10",placeholder:"Priority"}),(0,N.jsx)(p.A,{type:"textarea",label:"Description",className:"w-full h-10",placeholder:"Enter decryption"})]}),(0,N.jsx)("div",{className:"col-span-2",children:(0,N.jsx)(h.A,{className:"c"})})]})})]})}}}]);
//# sourceMappingURL=959.f6e51f45.chunk.js.map