"use strict";(self.webpackChunkcomfygen_react_new_base_folder=self.webpackChunkcomfygen_react_new_base_folder||[]).push([[608],{9608:(e,s,l)=>{l.r(s),l.d(s,{default:()=>u});var t=l(5043),n=l(9981),i=l(3003),a=l(9461),o=l(9804),r=l(9698),d=l(6328),c=(l(5413),l(579));const u=()=>{var e,s,l,u,m,x,p,h,g,y;const{id:v}=(0,n.g)(),b=(0,i.wA)(),j=(0,i.d4)(e=>e.user),f=(0,n.Zp)(),N=(null===j||void 0===j||null===(e=j.jobScreeningQuestionData)||void 0===e||null===(s=e.data)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.screening_questions)||[],_=null===j||void 0===j||null===(u=j.jobScreeningQuestionData)||void 0===u||null===(m=u.data)||void 0===m?void 0:m.data;console.log("\ud83e\udde9 Job Data fetched from backend:",_);const[w,k]=(0,t.useState)(!1);(0,t.useEffect)(()=>{v&&b((0,a.eO)({job_id:v}))},[b,v]),(0,t.useEffect)(()=>{console.log("this is the jobdata",null===_||void 0===_?void 0:_.isApplied),!0===(null===_||void 0===_?void 0:_.isApplied)&&(d.oR.warning("You have already applied for this job."),f("/user/opportunitiess"))},[null===_||void 0===_?void 0:_.isApplied,f]);const[q,C]=(0,t.useState)(0),[S,T]=(0,t.useState)([]),[Y,A]=(0,t.useState)(!1);(0,t.useEffect)(()=>{N.length>0&&T(N.map(e=>({question:e.question,question_type:e.question_type,options:e.options||[],selected_options:[]})))},[N]);if(0===N.length)return(0,c.jsx)("div",{className:"min-h-screen  flex items-center justify-center p-4",children:(0,c.jsxs)("div",{className:"glassy-card rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,c.jsx)("div",{className:"animate-spin w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full mx-auto mb-4"}),(0,c.jsx)("p",{className:"text-lg glassy-text-secondary",children:"Loading screening questions..."})]})});if(Y)return(0,c.jsx)("div",{className:"min-h-screen   flex items-center justify-center p-4",children:(0,c.jsxs)("div",{className:"glassy-card rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,c.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,c.jsx)(o.qGT,{className:"w-12 h-12 text-green-600"})}),(0,c.jsx)("h1",{className:"text-2xl font-bold glassy-text-primary mb-4",children:"Thank You!"}),(0,c.jsx)("p",{className:"glassy-text-secondary mb-6",children:"Your screening answers have been successfully submitted."}),(0,c.jsx)("button",{className:"w-full bg-blue-600 hover:bg-blue-700 glassy-text-primary font-semibold py-3 px-6 rounded-lg transition-colors",onClick:()=>f("/user/opportunitiess/"),children:"Back to Your Opportunities"})]})});const D=N[q],E=S[q]||{};return(0,c.jsx)("div",{className:"min-h-screen   p-4",children:(0,c.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,c.jsx)("div",{className:"glassy-card rounded-2xl shadow-lg mb-6 p-6",children:(0,c.jsxs)("div",{className:"flex items-start gap-4",children:[(0,c.jsx)(n.N_,{to:"/user/view-details/companies/".concat(null===_||void 0===_||null===(x=_.company_id)||void 0===x?void 0:x._id),children:(0,c.jsx)("img",{src:null===_||void 0===_||null===(p=_.company_id)||void 0===p?void 0:p.logo_url,alt:"Company Logo",className:"w-16 h-16 rounded-lg object-cover border",onError:e=>{e.currentTarget.onerror=null,e.currentTarget.src="https://res.cloudinary.com/dsnqduetr/image/upload/v1761043320/post-media/companylogo.png"}})}),(0,c.jsxs)("div",{className:"flex-1",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,c.jsx)(n.N_,{to:"/user/view-details/companies/".concat(null===_||void 0===_||null===(h=_.company_id)||void 0===h?void 0:h._id),children:(0,c.jsx)("h1",{className:"text-xl font-bold glassy-text-primary",children:_.job_title.name})}),(0,c.jsx)("span",{className:"px-3 py-1 glassy-card text-blue-800 text-sm font-medium rounded-full",children:_.job_type})]}),(0,c.jsxs)("div",{className:"flex items-center gap-2 glassy-text-secondary mb-3",children:[(0,c.jsx)(r.MbK,{className:"w-4 h-4"}),(0,c.jsx)("span",{className:"font-medium",children:_.company_id.name}),(0,c.jsx)("span",{className:"glassy-text-secondary",children:"\u2022"}),(0,c.jsx)("span",{children:_.industry_id.name})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,c.jsxs)("div",{className:"flex items-center gap-2 text-sm glassy-text-secondary",children:[(0,c.jsx)(o.$D5,{className:"w-4 h-4"}),(0,c.jsxs)("span",{children:[_.work_location.city.name,","," ",_.work_location.state.name]})]}),(0,c.jsx)("div",{className:"flex items-center gap-2 text-sm glassy-text-secondary",children:(0,c.jsx)("span",{children:(Q=_.salary_range,"\u20b9".concat(Q.split("-").join(" - ")))})})]})]})]})}),(0,c.jsxs)("div",{className:"glassy-card rounded-2xl shadow-lg p-6",children:[(0,c.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,c.jsxs)("div",{children:[(0,c.jsx)("h2",{className:"text-lg font-semibold glassy-text-primary",children:"Screening Questions"}),(0,c.jsxs)("p",{className:"text-sm glassy-text-secondary",children:["Question ",q+1," of ",N.length]})]})}),(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsx)("h3",{className:"text-lg font-medium glassy-text-primary mb-6",children:D.question}),"single_choice"===D.question_type&&(0,c.jsx)("div",{className:"space-y-3",children:D.options.map((e,s)=>{var l,t;return(0,c.jsx)("div",{className:"p-4 rounded-lg border-2 cursor-pointer transition-all hover:glassy-card hover:glassy-card ".concat(null!==(l=E.selected_options)&&void 0!==l&&l.includes(e)?"border-blue-500 glassy-card":"border-gray-200"),onClick:()=>(e=>{const s=[...S];s[q]&&(s[q].selected_options=[e],T(s))})(e),children:(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("input",{type:"radio",className:"w-5 h-5 text-blue-600 border-gray-300 focus:ring-blue-500",checked:(null===(t=E.selected_options)||void 0===t?void 0:t.includes(e))||!1,onChange:()=>{}}),(0,c.jsx)("label",{className:"ml-3 glassy-text-primary cursor-pointer",children:e})]})},s)})}),"multi_choice"===D.question_type&&(0,c.jsx)("div",{className:"space-y-3",children:D.options.map((e,s)=>{var l,t;return(0,c.jsx)("div",{className:"p-4 rounded-lg border-2 cursor-pointer transition-all hover:border-blue-300 hover:glassy-card ".concat(null!==(l=E.selected_options)&&void 0!==l&&l.includes(e)?"border-blue-500 glassy-card":"border-gray-200"),onClick:()=>(e=>{const s=[...S];if(s[q]){const l=s[q].selected_options;l.includes(e)?s[q].selected_options=l.filter(s=>s!==e):s[q].selected_options=[...l,e],T(s)}})(e),children:(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("input",{type:"checkbox",className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:(null===(t=E.selected_options)||void 0===t?void 0:t.includes(e))||!1,onChange:()=>{}}),(0,c.jsx)("label",{className:"ml-3 glassy-text-primary cursor-pointer",children:e})]})},s)})}),"theoretical"===D.question_type&&(0,c.jsxs)("div",{children:[(0,c.jsx)("textarea",{className:"w-full h-40 p-4 border-2 border-gray-200 glassy-input rounded-lg focus:border-blue-500 focus:outline-none resize-none",placeholder:"Type your detailed answer here...",value:(null===(g=E.selected_options)||void 0===g?void 0:g[0])||"",onChange:e=>{const s=[...S],l=e.target.value;s[q]&&(s[q].selected_options=[l],T(s))}}),(0,c.jsxs)("div",{className:"mt-2 text-sm glassy-text-secondary",children:["Character count:"," ",((null===(y=E.selected_options)||void 0===y?void 0:y[0])||"").length]})]})]}),(0,c.jsxs)("div",{className:"flex justify-between items-center mt-6",children:[q>0?(0,c.jsxs)("button",{onClick:()=>{q>0&&C(e=>e-1)},className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 glassy-text-primary font-semibold rounded-lg transition-all",children:[(0,c.jsx)(o.yJ6,{className:"w-4 h-4"}),"Prev"]}):(0,c.jsx)("div",{}),q<N.length-1?(0,c.jsxs)("button",{onClick:()=>{if(q<N.length-1){var e;C(q+1);null===(e=N[q+1])||void 0===e||e.time_limit}},className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 glassy-text-primary font-semibold rounded-lg transition-all",children:["Next",(0,c.jsx)(o.trk,{className:"w-4 h-4"})]}):(0,c.jsxs)("button",{onClick:()=>async function(){for(let t=0;t<S.length;t++){var e;const s=S[t];if(0===s.selected_options.length||"theoretical"===s.question_type&&(null===(e=s.selected_options[0])||void 0===e||!e.trim()))return d.oR.error("Please answer question ".concat(t+1," before submitting.")),void C(t)}const s={job_id:_._id,answers:S.map(e=>({question:e.question,question_type:e.question_type,options:e.options,selected_options:e.selected_options}))};try{k(!0);const e=await b((0,a.cf)(s)).unwrap();d.oR.success((null===e||void 0===e?void 0:e.message)||"Your answers have been submitted successfully!"),f("/user/opportunitiess")}catch(l){d.oR.error(l)}finally{k(!1)}}(),disabled:w,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 glassy-text-primary font-semibold rounded-lg transition-all",children:[(0,c.jsx)(o.qGT,{className:"w-4 h-4"}),w?"Submitting...":"Submit"]})]})]})]})});var Q}}}]);
//# sourceMappingURL=608.61048b75.chunk.js.map