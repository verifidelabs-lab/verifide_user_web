"use strict";(self.webpackChunkcomfygen_react_new_base_folder=self.webpackChunkcomfygen_react_new_base_folder||[]).push([[307],{693:(e,t,i)=>{i.d(t,{I:()=>n});var s=i(9379),l=i(3003),a=i(6328),o=i(152);const n=(e,t,i,n)=>{const d=(0,l.wA)();return{handleLocationSelectChange:async(t,l)=>{if("country"===t){if(e(e=>(0,s.A)((0,s.A)({},e),{},{address:(0,s.A)((0,s.A)({},e.address),{},{country:{name:null===l||void 0===l?void 0:l.label,dial_code:null===l||void 0===l?void 0:l.dial_code,short_name:null===l||void 0===l?void 0:l.short_name,emoji:null===l||void 0===l?void 0:l.emoji},state:null,city:null})})),null!==l&&void 0!==l&&l.short_name)try{i(!0),await d((0,o.wk)({country_code:l.short_name}))}catch(n){a.oR.error("Failed to fetch states")}finally{i(!1)}}else if("state"===t){e(e=>(0,s.A)((0,s.A)({},e),{},{address:(0,s.A)((0,s.A)({},e.address),{},{state:{name:null===l||void 0===l?void 0:l.label,code:null===l||void 0===l?void 0:l.code},city:null})}));try{i(!0),await d((0,o.E8)({country_code:l.country_code,state_code:l.state_code}))}catch(n){a.oR.error("Failed to fetch cities")}finally{i(!1)}}else"city"===t&&e(e=>(0,s.A)((0,s.A)({},e),{},{address:(0,s.A)((0,s.A)({},e.address),{},{city:{name:null===l||void 0===l?void 0:l.label}})}))}}}},1307:(e,t,i)=>{i.r(t),i.d(t,{default:()=>k});var s=i(9379),l=i(5043),a=i(9804),o=i(8214),n=i(3974),d=i(3003),r=i(4272),c=i(152),u=i(6328),_=i(5413),p=i(9981),v=i(10),m=i(8059),y=i(8454),b=i(9461),h=i(693),g=i(8155),x=i(9442),j=i(3537),f=i(130),q=i(579);const A=e=>{var t;let{allCompanies:i,allIndustry:l,formData:a,setFormData:n,handleInputChange:d,handleSelectChange:r,errors:c,setAddModalState:u,countryList:_,handleLocationSelectChange:p,getNestedValue:v,stateList:m,citiesList:y,setInputField:b,isCreatableIndustry:h}=e;return console.log(null===a||void 0===a?void 0:a.start_date),(0,q.jsxs)("div",{className:"space-y-8",children:[(0,q.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 space-y-4",children:[(0,q.jsx)("h2",{className:"text-lg font-semibold text-gray-800 capitalize border-b pb-2",children:"Company & Industry"}),(0,q.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,q.jsx)("div",{className:"col-span-2",children:(0,q.jsx)(j.A,{options:i||[],label:"Company Name",className:"w-full",placeholder:"Select Company",onChange:e=>r("company_id",e),selectedOption:i.find(e=>e.value===a.company_id),required:!0,error:null===c||void 0===c?void 0:c.company_id,onCreateOption:(e,t)=>{u({isOpen:!0,type:"companies",field:t}),b(t=>(0,s.A)((0,s.A)({},t),{},{name:e}))},isClearable:!0,isCreatedByUser:!0})}),(0,q.jsxs)("div",{className:"col-span-2 grid grid-cols-2 gap-3",children:[(0,q.jsx)(j.A,{options:l||[],label:"Industry Name",className:"w-full",placeholder:"Select Industry",onChange:e=>r("industry_id",e),selectedOption:l.find(e=>e.value===a.industry_id),required:!0,error:null===c||void 0===c?void 0:c.industry_id,onCreateOption:(e,t)=>{u({isOpen:!0,type:"industries",field:t}),b(t=>(0,s.A)((0,s.A)({},t),{},{name:e}))},isClearable:!0,isCreatedByUser:h,isDisabled:!a.company_id,disabledTooltip:"first select Company name"}),(0,q.jsx)(o.A,{type:"number",value:null===a||void 0===a?void 0:a.current_openings,label:"Available Opening",onChange:e=>d("current_openings",e.target.value),name:"current_openings",className:"w-full h-10 border rounded-lg px-4",placeholder:"Enter number of available posts ",required:!0,error:null===c||void 0===c?void 0:c.current_openings})]})]})]}),(0,q.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 space-y-4",children:[(0,q.jsx)("h2",{className:"text-lg font-semibold text-gray-800 capitalize border-b pb-2",children:"Job Details"}),(0,q.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,q.jsx)(j.A,{label:"Job Type",options:(null===f||void 0===f?void 0:f.Job_Type_List)||[],placeholder:"Select Job Type",onChange:e=>r("job_type",e),selectedOption:null===f||void 0===f?void 0:f.Job_Type_List.find(e=>e.value===a.job_type),required:!0,error:null===c||void 0===c?void 0:c.job_type}),(0,q.jsx)(j.A,{label:"Location Type",options:(null===f||void 0===f?void 0:f.Job_Location_List)||[],placeholder:"Select Location",onChange:e=>r("job_location",e),selectedOption:null===f||void 0===f?void 0:f.Job_Location_List.find(e=>e.value===a.job_location),required:!0,error:null===c||void 0===c?void 0:c.job_location}),(0,q.jsx)(j.A,{label:"Pay Type",options:(null===f||void 0===f?void 0:f.Job_Pay_Type_List)||[],placeholder:"Select Pay Type",onChange:e=>r("pay_type",e),selectedOption:null===f||void 0===f?void 0:f.Job_Pay_Type_List.find(e=>e.value===a.pay_type),required:!0,error:null===c||void 0===c?void 0:c.pay_type})]}),(0,q.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,q.jsx)(o.A,{label:"Salary Range",placeholder:"e.g. \u20b930,000 - \u20b950,000",value:a.salary_range,onChange:e=>d("salary_range",e.target.value),required:!0,error:null===c||void 0===c?void 0:c.salary_range,className:"h-10 w-full"}),(0,q.jsx)(x.A,{label:"Start Date",value:null===a||void 0===a?void 0:a.start_date,onChange:e=>d("start_date",e.target.value),required:!0,error:null===c||void 0===c?void 0:c.start_date}),(0,q.jsx)(x.A,{label:"End Date",value:null===a||void 0===a?void 0:a.end_date,onChange:e=>d("end_date",e.target.value),required:!0,error:null===c||void 0===c?void 0:c.end_date})]})]}),(0,q.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 space-y-4",children:[(0,q.jsx)("h2",{className:"text-lg font-semibold text-gray-800 capitalize border-b pb-2",children:"Location"}),(0,q.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,q.jsx)(g.A,{label:"Country",selectedOption:(null===_||void 0===_?void 0:_.find(e=>e.label===v(a,"address.country.name")))||null,onChange:e=>p("country",e),options:_||[],required:!0,isClearable:!1,error:null===c||void 0===c?void 0:c.country}),(0,q.jsx)(g.A,{label:"State",selectedOption:(null===m||void 0===m?void 0:m.find(e=>e.label===v(a,"address.state.name")))||null,onChange:e=>p("state",e),options:m||[],required:!0,isClearable:!1,error:null===c||void 0===c?void 0:c.state}),(0,q.jsx)(g.A,{label:"City",selectedOption:(null===y||void 0===y?void 0:y.find(e=>(null===e||void 0===e?void 0:e.label)===v(a,"address.city.name")))||null,onChange:e=>p("city",e),options:y||[],required:!0,isClearable:!1,error:null===c||void 0===c?void 0:c.city}),(0,q.jsx)(o.A,{label:"Pin Code",placeholder:"e.g. 696969",value:null===a||void 0===a||null===(t=a.address)||void 0===t?void 0:t.pin_code,className:"w-full h-10",onChange:e=>n(t=>(0,s.A)((0,s.A)({},t),{},{address:(0,s.A)((0,s.A)({},t.address),{},{pin_code:e.target.value})})),required:!0,error:null===c||void 0===c?void 0:c.pin_code})]})]})]})},N=e=>{let{handleSelectChange:t,allProfileRoles:i,allSkills:l,formData:o,errors:n,setAddModalState:d,handleInputChange:r,selectedSkills:c,removeSkill:u,handleSkillSelect:_,isCreatableIndustry:p,setInputField:v}=e;return(0,q.jsx)("div",{children:(0,q.jsxs)("div",{className:"space-y-6",children:[(0,q.jsx)(j.A,{label:"Job Title",className:"w-full h-10",placeholder:"e.g. Frontend Developer (React.js)",onChange:e=>t("job_title",e),selectedOption:i.find(e=>e.value===(null===o||void 0===o?void 0:o.job_title)),options:i||[],required:!0,error:null===n||void 0===n?void 0:n.job_title,onCreateOption:(e,t)=>{d({isOpen:!0,type:"Profile Role",field:t}),v(t=>(0,s.A)((0,s.A)({},t),{},{name:e}))},isClearable:!0,isCreatedByUser:!!p}),(0,q.jsxs)("div",{children:[(0,q.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Job Description ",(0,q.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,q.jsx)("textarea",{value:o.job_description,onChange:e=>r("job_description",e.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Describe the job role and what you're looking for in a candidate..."}),(0,q.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Tell people about this position and what you're looking for. For example, what they'll be doing on a typical day, why they should be interested, and requirements you may have."}),(0,q.jsx)("p",{className:"text-xs text-red-600",children:null===n||void 0===n?void 0:n.job_description})]}),(0,q.jsxs)("div",{children:[(0,q.jsx)(j.A,{label:"Skills Required ",options:l||[],className:"w-full h-10",placeholder:"Select skills",onChange:_,required:!0,error:null===n||void 0===n?void 0:n.required_skills,onCreateOption:(e,t)=>{d({isOpen:!0,type:"skill",field:t}),v(t=>(0,s.A)((0,s.A)({},t),{},{name:e}))},isClearable:!0,isCreatedByUser:!!p}),(0,q.jsx)("div",{className:"flex flex-wrap gap-2 mt-3",children:c.map((e,t)=>(0,q.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[e.label,(0,q.jsx)("button",{onClick:()=>u(e.value),className:"ml-2 hover:text-blue-600",children:(0,q.jsx)(a.Gsv,{className:"h-4 w-4"})})]},t))})]})]})})},k=()=>{var e,t,i,g,x,j,f,k,C,w,S,O,D,E,L,I,J,P,T;const{id:R}=(0,p.g)(),F=(0,d.wA)(),B=(0,p.Zp)(),K=(0,d.d4)(e=>e.work),M=(0,d.d4)(e=>e.global),G=(0,d.d4)(e=>e.global),Q=(0,r.eu)((null===K||void 0===K||null===(e=K.getAllCompaniesData)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data)||[]),z=(0,r.Kj)((null===K||void 0===K||null===(i=K.getAllIndustryData)||void 0===i||null===(g=i.data)||void 0===g?void 0:g.data)||[]),U=(0,r.Kj)((null===M||void 0===M||null===(x=M.masterSkillsData)||void 0===x||null===(j=x.data)||void 0===j||null===(f=j.data)||void 0===f?void 0:f.list)||[]),V=(0,r.Kj)((null===K||void 0===K||null===(k=K.getAllProfileRoleData)||void 0===k||null===(C=k.data)||void 0===C?void 0:C.data)||[]),W=(0,r.Kj)((null===G||void 0===G||null===(w=G.countriesData)||void 0===w||null===(S=w.data)||void 0===S?void 0:S.data)||[]),X=(0,r.Kj)((null===G||void 0===G||null===(O=G.stateData)||void 0===O||null===(D=O.data)||void 0===D?void 0:D.data)||[]),Z=(0,r.Kj)((null===G||void 0===G||null===(E=G.citiesData)||void 0===E||null===(L=E.data)||void 0===L?void 0:L.data)||[]),[$,H]=(0,l.useState)(1),[Y,ee]=(0,l.useState)(!1),[te,ie]=(0,l.useState)((0,v.Ri)("ACCESS_MODE")),[se,le]=(0,l.useState)([]),[ae,oe]=(0,l.useState)([{question:"",question_type:"single_choice",options:[],option_format:"alphabetically",correct_options:[],verification_type:"auto",time_limit:2}]),[ne,de]=(0,l.useState)({}),[re,ce]=(0,l.useState)({name:"",logo_url:""}),[ue,_e]=(0,l.useState)({isOpen:!1,type:"",field:""}),[pe,ve]=(0,l.useState)({company_id:"",industry_id:"",job_type:"",job_location:"",pay_type:"",salary_range:"",job_title:"",job_description:"",start_date:"",end_date:"",current_openings:"",required_skills:[],address:{country:{name:"",dial_code:"",short_name:"",emoji:"\ud83c\uddee"},state:{name:"",code:""},city:{name:""},pin_code:""},screening_questions:[],isDisable:!1,isShareAsPost:!1}),[me,ye]=(0,l.useState)(!1),{handleLocationSelectChange:be,fetchDependentData:he}=(0,h.I)(ve,pe,de);(0,l.useEffect)(()=>{const e=()=>{const e=(0,v.Ri)("ACCESS_MODE");ie(e),5==e&&B("/user/opportunitiess")};return e(),window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[B]),(0,l.useEffect)(()=>{F((0,n.f$)()),F((0,c.Xr)())},[F]);const ge=(0,l.useCallback)(e=>{if(U.length>0&&e.length>0){const t=U.filter(t=>e.includes(t.value));le(t)}},[U]),xe=null===pe||void 0===pe||null===(I=pe.address)||void 0===I||null===(J=I.country)||void 0===J?void 0:J.short_name,je=null===pe||void 0===pe||null===(P=pe.address)||void 0===P||null===(T=P.state)||void 0===T?void 0:T.name,fe=(0,l.useCallback)(async()=>{if(R)try{var e,t,i,l,a,o,d,r;const u=await F((0,c.Sk)({_id:R,populate:"company_id:created_by_users|industry_id:created_by_users"})).unwrap(),f=null===u||void 0===u?void 0:u.data,q=f.work_location||f.address||{country:{name:"",dial_code:"",short_name:"",emoji:"\ud83c\uddee"},state:{name:"",code:""},city:{name:""},pin_code:""};var _,p,v,m,y,b,h,g,x,j;if(ve((0,s.A)((0,s.A)({},f),{},{address:q,company_id:null===u||void 0===u||null===(e=u.data)||void 0===e||null===(t=e.company_id)||void 0===t?void 0:t._id,industry_id:null===u||void 0===u||null===(i=u.data)||void 0===i||null===(l=i.industry_id)||void 0===l?void 0:l._id,start_date:null!==u&&void 0!==u&&null!==(a=u.data)&&void 0!==a&&a.start_date?new Date(u.data.start_date).toISOString().split("T")[0]:"",end_date:null!==u&&void 0!==u&&null!==(o=u.data)&&void 0!==o&&o.end_date?new Date(u.data.end_date).toISOString().split("T")[0]:""})),null!==u&&void 0!==u&&null!==(d=u.data)&&void 0!==d&&d.company_id)F((0,n.a_)({company_id:null===u||void 0===u||null===(_=u.data)||void 0===_||null===(p=_.company_id)||void 0===p?void 0:p._id,created_by_users:null===u||void 0===u||null===(v=u.data)||void 0===v||null===(m=v.company_id)||void 0===m?void 0:m.created_by_users})),ye(null===u||void 0===u||null===(y=u.data)||void 0===y||null===(b=y.company_id)||void 0===b?void 0:b.created_by_users);if(null!==u&&void 0!==u&&null!==(r=u.data)&&void 0!==r&&r.industry_id)F((0,n.JL)({industry_id:null===u||void 0===u||null===(h=u.data)||void 0===h||null===(g=h.industry_id)||void 0===g?void 0:g._id,created_by_users:null===u||void 0===u||null===(x=u.data)||void 0===x||null===(j=x.industry_id)||void 0===j?void 0:j.created_by_users}));f.screening_questions&&f.screening_questions.length>0&&oe(f.screening_questions),f.required_skills&&f.required_skills.length>0&&ge(f.required_skills)}catch(f){console.error("Error fetching job data:",f),u.oR.error((null===f||void 0===f?void 0:f.message)||"Failed to fetch job data")}},[R,F]);(0,l.useEffect)(()=>{xe&&F((0,c.wk)({country_code:xe})),je&&F((0,c.E8)({state_name:je}))},[F,xe,je]),(0,l.useEffect)(()=>{R&&fe()},[R,fe]),(0,l.useEffect)(()=>{R&&U.length>0&&pe.required_skills.length>0&&0===se.length&&ge(pe.required_skills)},[U,pe.required_skills,R,ge,se.length]);const qe=e=>{const t={};var i,s,l,a,o,n,d;1===e&&(pe.company_id||(t.company_id="Company is required"),pe.industry_id||(t.industry_id="Industry is required"),pe.job_type||(t.job_type="Job type is required"),pe.job_location||(t.job_location="Job location is required"),pe.pay_type||(t.pay_type="Pay type is required"),pe.salary_range||"internship"===pe.job_type||"unpaid"===pe.pay_type||(t.salary_range="Salary range is required"),pe.start_date||(t.start_date="Start date is required"),pe.end_date||(t.end_date="End date is required"),pe.current_openings||(t.current_openings="current opening is required"),null!==(i=pe.address)&&void 0!==i&&null!==(s=i.country)&&void 0!==s&&s.name||(t.country="Country is required"),null!==(l=pe.address)&&void 0!==l&&null!==(a=l.state)&&void 0!==a&&a.name||(t.state="State is required"),null!==(o=pe.address)&&void 0!==o&&null!==(n=o.city)&&void 0!==n&&n.name||(t.city="City is required"),null!==(d=pe.address)&&void 0!==d&&d.pin_code||(t.pin_code="Pin No is required"));return 2===e&&(pe.job_title||(t.job_title="Job title is required"),pe.job_description||(t.job_description="Job description is required"),pe.job_description&&pe.job_description.length<50&&(t.job_description="Description should be at least 50 characters"),0===pe.required_skills.length&&(t.required_skills="At least one skill is required")),3===e&&(0===ae.length?t.screening_questions="At least one screening question is required":ae.forEach((e,i)=>{e.question&&""!==e.question.trim()||(t["screening_question_".concat(i)]="Question is required"),"theoretical"!==e.question_type&&(e.options.length<2&&(t["screening_options_".concat(i)]="At least two options are required"),e.options.forEach((e,s)=>{e&&""!==e.trim()||(t["screening_option_".concat(i,"_").concat(s)]="Option cannot be empty")}),0===e.correct_options.length&&(t["screening_correct_".concat(i)]="At least one correct option is required"))})),de(t),0===Object.keys(t).length},Ae=(e,t)=>{ve(i=>{const l=(0,s.A)((0,s.A)({},i),{},{[e]:t});let a=(0,s.A)({},ne);if(l.start_date&&l.end_date){const e=new Date(l.start_date);new Date(l.end_date)<e?a.end_date="End date cannot be before Start date":(delete a.start_date,delete a.end_date)}return de(a),l}),ne[e]&&de(t=>{const i=(0,s.A)({},t);return delete i[e],i})},Ne=async(e,t)=>{ve(i=>(0,s.A)((0,s.A)({},i),{},{[e]:t.value})),console.log("field, selectedOption",e,t),"company_id"===e&&ye(null===t||void 0===t?void 0:t.created_by_users);const i=null===t||void 0===t?void 0:t.value;switch(e){case"institution_id":await F((0,y.Q_)({institution_id:i,created_by_users:null===t||void 0===t?void 0:t.created_by_users}));break;case"degree_id":await F((0,y.BB)({degree_id:i,created_by_users:null===t||void 0===t?void 0:t.created_by_users}));break;case"field_of_studies":await F((0,y.P8)({study_id:i,created_by_users:null===t||void 0===t?void 0:t.created_by_users}));break;case"company_id":await F((0,n.a_)({company_id:i,created_by_users:null===t||void 0===t?void 0:t.created_by_users}));break;case"industry_id":await F((0,n.JL)({industry_id:i,created_by_users:null===t||void 0===t?void 0:t.created_by_users}));break;case"profile_role_id":await F((0,n.O_)({profile_role_id:i,created_by_users:null===t||void 0===t?void 0:t.created_by_users}))}ne[e]&&de(t=>{const i=(0,s.A)({},t);return delete i[e],i})},ke=e=>{e&&!pe.required_skills.includes(e.value)&&(ve(t=>(0,s.A)((0,s.A)({},t),{},{required_skills:[...t.required_skills,e.value]})),le(t=>[...t,e]),ne.required_skills&&de(e=>{const t=(0,s.A)({},e);return delete t.required_skills,t}))},Ce=e=>{ve(t=>(0,s.A)((0,s.A)({},t),{},{required_skills:t.required_skills.filter(t=>t!==e)})),le(t=>t.filter(t=>t.value!==e))},we=(e,t,i)=>{const l=[...ae];l[e][t]=i,oe(l),"question"===t&&ne["screening_question_".concat(e)]&&de(t=>{const i=(0,s.A)({},t);return delete i["screening_question_".concat(e)],i})},Se=()=>{oe([...ae,{question:"",question_type:"single_choice",options:[],option_format:"alphabetically",correct_options:[],verification_type:"auto",time_limit:2}])},Oe=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const s=t.split(".");let l=e;for(const o of s){var a;if(l=null===(a=l)||void 0===a?void 0:a[o],void 0===l)return i}return l||i};return(0,q.jsxs)("div",{className:"p-4",children:[(0,q.jsx)("div",{className:"min-h-screen",children:(0,q.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,q.jsxs)("div",{className:"",children:[(0,q.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,q.jsx)("button",{onClick:()=>B(-1),className:"p-1 rounded hover:bg-gray-100",children:(0,q.jsx)(a.OLK,{size:32})}),(0,q.jsx)("h1",{className:"text-2xl font-semibold text-[#000000E6]",children:R?"Edit Job":"Post a Job"}),(0,q.jsxs)("span",{className:"text-sm text-gray-500",children:[$,"/3"]})]}),(0,q.jsxs)("div",{className:"mb-8",children:[1===$&&(0,q.jsx)("div",{className:"space-y-3",children:(0,q.jsx)(A,{allCompanies:Q,allIndustry:z,formData:pe,setFormData:ve,handleInputChange:Ae,handleSelectChange:Ne,errors:ne,setAddModalState:_e,countryList:W,handleLocationSelectChange:be,getNestedValue:Oe,stateList:X,citiesList:Z,setInputField:ce,isCreatableIndustry:me})}),2===$&&(0,q.jsx)(N,{handleSelectChange:Ne,allProfileRoles:V,allSkills:U,formData:pe,errors:ne,setAddModalState:_e,handleInputChange:Ae,selectedSkills:se,removeSkill:Ce,handleSkillSelect:ke,isCreatableIndustry:me}),3===$&&(0,q.jsxs)("div",{className:"space-y-6",children:[(0,q.jsxs)("div",{children:[(0,q.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:["Screening Questions ",(0,q.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,q.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Add screening questions to filter candidates. All questions are required."}),ne.screening_questions&&(0,q.jsx)("p",{className:"text-sm text-red-500 mb-4 bg-red-50 p-2 rounded-md",children:ne.screening_questions}),ae.map((e,t)=>{const i=ne["screening_question_".concat(t)],l=ne["screening_options_".concat(t)],n=ne["screening_correct_".concat(t)];return(0,q.jsxs)("div",{className:"mb-6 p-4 border rounded-lg ".concat(i||l||n?"border-red-300 bg-red-50":"border-gray-200"),children:[(0,q.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,q.jsxs)("h3",{className:"font-medium",children:["Question ",t+1," ",(0,q.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,q.jsx)("button",{onClick:()=>(e=>{const t=[...ae];t.splice(e,1),oe(t);const i=(0,s.A)({},ne);Object.keys(i).forEach(t=>{(t.startsWith("screening_question_".concat(e))||t.startsWith("screening_options_".concat(e))||t.startsWith("screening_correct_".concat(e))||t.startsWith("screening_option_".concat(e,"_")))&&delete i[t]}),de(i)})(t),className:"text-red-500 hover:text-red-700",children:(0,q.jsx)(a.Gsv,{className:"h-5 w-5"})})]}),(0,q.jsx)("div",{className:"mb-3",children:(0,q.jsx)(o.A,{value:e.question,onChange:e=>we(t,"question",e.target.value),placeholder:"Enter your question",className:"w-full h-10",error:i,required:!0})}),(0,q.jsxs)("div",{className:"mb-3",children:[(0,q.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Type"}),(0,q.jsxs)("select",{value:e.question_type,onChange:e=>we(t,"question_type",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[(0,q.jsx)("option",{value:"single_choice",children:"Single Choice"}),(0,q.jsx)("option",{value:"multi_choice",children:"Multiple Choice"}),(0,q.jsx)("option",{value:"theoretical",children:"Theoretical"})]})]}),"theoretical"===e.question_type?(0,q.jsxs)("div",{className:"mb-3",children:[(0,q.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Answer (Optional)"}),(0,q.jsx)("textarea",{value:e.expected_answer||"",onChange:e=>we(t,"expected_answer",e.target.value),rows:3,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Describe what you're looking for in an answer (optional)"})]}):(0,q.jsxs)("div",{className:"space-y-2",children:[(0,q.jsxs)("div",{className:"flex justify-between items-center",children:[(0,q.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Options ",(0,q.jsx)("span",{className:"text-red-500",children:"*"})]}),l&&(0,q.jsx)("span",{className:"text-sm text-red-500",children:l})]}),e.options.map((i,l)=>{const n=ne["screening_option_".concat(t,"_").concat(l)];return(0,q.jsxs)("div",{className:"flex items-center",children:[(0,q.jsx)("input",{type:"single_choice"===e.question_type?"radio":"checkbox",checked:e.correct_options.includes(i),onChange:()=>((e,t)=>{const i=[...ae],l=i[e];if("single_choice"===l.question_type)l.correct_options=[t];else{const e=l.correct_options.indexOf(t);-1===e?l.correct_options.push(t):l.correct_options.splice(e,1)}oe(i),ne["screening_correct_".concat(e)]&&de(t=>{const i=(0,s.A)({},t);return delete i["screening_correct_".concat(e)],i})})(t,i),className:"mr-2 ",name:"question-".concat(t)}),(0,q.jsx)("div",{className:"flex-1",children:(0,q.jsx)(o.A,{value:i,onChange:e=>{const s=e.target.value,a=[...ae];if(a[t].correct_options.includes(i)){const e=a[t].correct_options.indexOf(i);a[t].correct_options[e]=s}a[t].options[l]=s,oe(a)},placeholder:"Option ".concat(l+1),error:n,required:!0})}),(0,q.jsx)("button",{onClick:()=>((e,t)=>{const i=[...ae];i[e].options.splice(t,1);const l=i[e].options[t],a=i[e].correct_options.indexOf(l);-1!==a&&i[e].correct_options.splice(a,1),oe(i),ne["screening_option_".concat(e,"_").concat(t)]&&de(i=>{const l=(0,s.A)({},i);return delete l["screening_option_".concat(e,"_").concat(t)],l})})(t,l),className:"ml-2 text-red-500 hover:text-red-700",children:(0,q.jsx)(a.Gsv,{className:"h-5 w-5"})})]},l)}),(0,q.jsx)("button",{onClick:()=>(e=>{const t=[...ae];t[e].options.push(""),oe(t)})(t),className:"mt-2 text-blue-500 hover:text-blue-700 text-sm",children:"+ Add Option"}),n&&(0,q.jsx)("p",{className:"text-sm text-red-500 mt-2",children:n})]}),(0,q.jsxs)("div",{className:"mt-3",children:[(0,q.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Time Limit (minutes) ",(0,q.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,q.jsx)("input",{type:"number",value:e.time_limit,onChange:e=>we(t,"time_limit",parseInt(e.target.value)||0),min:"1",className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]})]},t)}),(0,q.jsxs)("button",{onClick:Se,className:"mt-2 text-blue-500 hover:text-blue-700 flex items-center",children:[(0,q.jsx)("span",{className:"text-lg mr-1",children:"+"})," Add Another Question"]})]}),!R&&(0,q.jsx)(o.A,{type:"checkbox",label:"Share As a post",checked:null===pe||void 0===pe?void 0:pe.isShareAsPost,onChange:e=>ve(t=>(0,s.A)((0,s.A)({},t),{},{isShareAsPost:e.target.checked}))})]})]}),(0,q.jsxs)("div",{className:"flex justify-between mt-8 gap-3",children:[$>1&&(0,q.jsx)("button",{onClick:()=>{$>1&&H($-1)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Back"}),$<3?(0,q.jsx)("button",{onClick:()=>{if(qe($))$<3&&H($+1);else{const e=Object.keys(ne)[0];if(e){const t=document.querySelector('[data-error="'.concat(e,'"]'));t&&t.scrollIntoView({behavior:"smooth",block:"center"})}}},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 ml-auto",children:"Next"}):(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(_.A,{onClick:async()=>{if(!qe(3)){const e=Object.keys(ne)[0];if(e){const t=document.querySelector('[data-error="'.concat(e,'"]'));t&&t.scrollIntoView({behavior:"smooth",block:"center"})}return}ee(!0);const e={company_id:(null===pe||void 0===pe?void 0:pe.company_id)||"",industry_id:(null===pe||void 0===pe?void 0:pe.industry_id)||"",job_type:(null===pe||void 0===pe?void 0:pe.job_type)||"",job_location:(null===pe||void 0===pe?void 0:pe.job_location)||"",pay_type:(null===pe||void 0===pe?void 0:pe.pay_type)||"",salary_range:(null===pe||void 0===pe?void 0:pe.salary_range)||"",job_title:(null===pe||void 0===pe?void 0:pe.job_title)||"",job_description:(null===pe||void 0===pe?void 0:pe.job_description)||"",required_skills:(null===pe||void 0===pe?void 0:pe.required_skills)||[],work_location:(null===pe||void 0===pe?void 0:pe.address)||"",isDisable:!1,screening_questions:ae,start_date:(0,r.TG)(null===pe||void 0===pe?void 0:pe.start_date)||"",end_date:(0,r.TG)(null===pe||void 0===pe?void 0:pe.end_date)||"",isShareAsPost:null===pe||void 0===pe?void 0:pe.isShareAsPost,current_openings:null===pe||void 0===pe?void 0:pe.current_openings};R&&(e._id=R);const t=R?c.m8:c.ts;try{const i=await F(t(e)).unwrap();u.oR.success((null===i||void 0===i?void 0:i.message)||(null===i||void 0===i?void 0:i.success)||(R?"Job updated successfully!":"Job posted successfully!")),H(1),B("/user/opportunitiess"),ve({company_id:"",industry_id:"",job_type:"",job_location:"",pay_type:"",salary_range:"",job_title:"",job_description:"",required_skills:[],address:{country:{name:"",dial_code:"",short_name:"",emoji:"\ud83c\uddee"},state:{name:"",code:""},city:{name:""},pin_code:""},screening_questions:[],isDisable:!1,start_date:"",end_date:""}),le([]),oe([{question:"",question_type:"single_choice",options:[],option_format:"alphabetically",correct_options:[],verification_type:"auto",time_limit:2}]),de({})}catch(i){console.error("Error submitting job:",i),u.oR.error((null===i||void 0===i?void 0:i.message)||(R?"Failed to update job. Please try again.":"Failed to post job. Please try again."))}finally{ee(!1)}},loading:Y,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 ml-auto",children:R?"Update Job":"Post Job"})})]})]})})}),(0,q.jsx)(m.A,{isOpen:ue.isOpen,title:"Add ".concat(ue.type),onClose:()=>{_e({isOpen:!1,type:"",field:""}),ce({name:"",logo_url:""})},handleSubmit:async()=>{try{var e;let t="",i=null,l=ue.field;switch(ue.type){case"degree":t="degrees",i=y.Sq;break;case"field":t="fields-of-studies",i=y.Ns;break;case"skill":t="skills",i=c.bG;break;case"companies":t="companies",i=n.Nl;break;case"industries":t="industries",i=c.u8;break;case"profile-roles":t="profile-roles",i=c.fJ;break;default:return}const a=await F((0,b.A5)((0,s.A)({type:t},re))).unwrap();if(F(i({_id:a.data._id,name:a.data.name,created_by_users:null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.created_by_users})),l)if("skills_acquired"!==l){ve(e=>(0,s.A)((0,s.A)({},e),{},{[l]:a.data._id}));const e=a.data.created_by_users;he(l,a.data._id,e)}else ve(e=>(0,s.A)((0,s.A)({},e),{},{skills_acquired:[...e.skills_acquired||[],a.data._id]}));_e({isOpen:!1,type:"",field:""}),ce({name:"",logo_url:""})}catch(t){u.oR.error(t)}},children:(0,q.jsx)("div",{className:"space-y-3",children:(0,q.jsx)(o.A,{className:"w-full h-10",label:"Enter Name",required:!0,placeholder:"Enter name",value:null===re||void 0===re?void 0:re.name,onChange:e=>ce(t=>(0,s.A)((0,s.A)({},t),{},{name:e.target.value}))})})})]})}}}]);
//# sourceMappingURL=307.27841804.chunk.js.map