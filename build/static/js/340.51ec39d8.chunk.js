"use strict";(self.webpackChunkcomfygen_react_new_base_folder=self.webpackChunkcomfygen_react_new_base_folder||[]).push([[340],{4340:(e,s,t)=>{t.r(s),t.d(s,{default:()=>w});var a=t(9379),l=t(5043),n=t(9804),o=t(3003),r=t(9461),i=t(9981),c=t(5413),d=t(6328),m=t(5394),u=t(579);const x=e=>{let{user:s,handleDisconnectUser:t,actionLoading:a,handleUserClick:l,DEFAULT_AVATAR:n}=e;return(0,u.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-md hover:shadow-lg transition-shadow duration-300",children:[(0,u.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,u.jsx)("img",{src:s.avatar||n,alt:s.name,onError:e=>e.currentTarget.src=n,className:"w-16 h-16 rounded-full object-cover border-2 border-white shadow-sm cursor-pointer hover:scale-105 transition-transform",onClick:()=>l(s)}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsx)("h3",{onClick:()=>l(s),className:"font-bold text-lg text-gray-900 cursor-pointer hover:text-blue-600 transition truncate",children:s.name}),(0,u.jsx)("p",{className:"text-sm text-gray-500 truncate",children:s.title||"No headline"})]})]}),(0,u.jsx)("p",{className:"text-sm text-gray-600 mb-5 min-h-10",children:null!==s&&void 0!==s&&s.summary?s.summary.split(" ").slice(0,10).join(" ")+"...":""}),(0,u.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm text-gray-500 bg-gray-50 rounded-xl p-3 mb-5",children:[(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("span",{className:"font-semibold text-gray-800 text-base block",children:s.followerCount}),(0,u.jsx)("div",{className:"mt-1",children:"Followers"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("span",{className:"font-semibold text-gray-800 text-base block",children:s.connectionCount}),(0,u.jsx)("div",{className:"mt-1",children:"Connections"})]}),(0,u.jsxs)("div",{className:"text-center",children:[(0,u.jsx)("span",{className:"font-semibold text-gray-800 text-base block",children:s.profileViews}),(0,u.jsx)("div",{className:"mt-1",children:"Views"})]})]}),(0,u.jsx)(c.A,{variant:"outline",className:"w-full transition hover:text-white",onClick:()=>t(s),loading:a["disconnect-".concat(s.id)],children:"Disconnect"})]})},g=e=>{let{user:s,handleUnfollow:t,actionLoading:a,handleUserClick:l,getEntityIcon:n,DEFAULT_AVATAR:o}=e;return(0,u.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-md hover:shadow-lg transition-shadow duration-300",children:[(0,u.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,u.jsx)("img",{src:s.avatar||o,alt:s.name,onError:e=>e.currentTarget.src=o,className:"w-16 h-16 rounded-full object-cover border-2 border-white shadow-sm cursor-pointer hover:scale-105 transition-transform",onClick:()=>l(s)}),(0,u.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[n(s.entityType),(0,u.jsx)("h3",{onClick:()=>l(s),className:"font-bold text-lg text-gray-900 cursor-pointer hover:text-blue-600 transition truncate",children:s.name})]}),(0,u.jsx)("p",{className:"text-sm text-gray-500 truncate",children:s.headline||"No headline"})]})]}),(0,u.jsx)("div",{className:"flex flex-col items-center text-center mb-5",children:(0,u.jsx)("div",{className:"text-sm font-semibold text-gray-600 bg-gray-100 rounded-full px-4 py-1 mb-4",children:s.targetModel})}),s.followerCount>0&&(0,u.jsxs)("div",{className:"text-sm text-gray-500 bg-gray-100 rounded-lg p-3 mb-5 text-center",children:[(0,u.jsx)("span",{className:"font-semibold text-gray-700",children:s.followerCount})," followers"]}),(0,u.jsx)(c.A,{onClick:()=>t(s),loading:a["unfollow-".concat(s.id)],className:"w-full",children:"Unfollow"})]})},h=()=>(0,u.jsxs)("div",{className:"bg-white p-5 rounded-2xl shadow hover:shadow-lg transition relative animate-pulse",children:[(0,u.jsxs)("div",{className:"flex gap-4 items-center mb-4",children:[(0,u.jsx)("div",{className:"w-14 h-14 rounded-full bg-gray-200"}),(0,u.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,u.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,u.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]}),(0,u.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,u.jsx)("div",{className:"h-3 bg-gray-200 rounded w-full"}),(0,u.jsx)("div",{className:"h-3 bg-gray-200 rounded w-5/6"}),(0,u.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]}),(0,u.jsx)("div",{className:"flex justify-between text-xs text-gray-500 bg-gray-50 rounded-lg p-2 mb-3",children:[...Array(3)].map((e,s)=>(0,u.jsxs)("div",{className:"text-center flex-1 space-y-1",children:[(0,u.jsx)("div",{className:"h-4 bg-gray-200 rounded w-8 mx-auto"}),(0,u.jsx)("div",{className:"h-3 bg-gray-100 rounded w-12 mx-auto"})]},s))}),(0,u.jsx)("div",{className:"h-9 bg-gray-200 rounded-md w-full"})]}),f="/0684456b-aa2b-4631-86f7-93ceaf33303c.png",w=()=>{const e=(0,o.wA)(),s=(0,i.Zp)(),[t,w]=(0,l.useState)(""),[v,p]=(0,l.useState)([]),[y,b]=(0,l.useState)(""),[j,N]=(0,l.useState)(!0),[C,_]=(0,l.useState)(!1),[k,A]=(0,l.useState)(null),[U,L]=(0,l.useState)({}),F=(0,o.d4)(e=>{var s,t,a,l;return(null===(s=e.user)||void 0===s||null===(t=s.getFollowingListData)||void 0===t||null===(a=t.data)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.list)||[]}),[T,R]=(0,i.ok)(),E=(0,l.useCallback)(async function(){let s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{s?_(!0):N(!0),A(null);const[t,a,l]=await Promise.all([e((0,r.m3)()).unwrap(),e((0,r.FL)({page:1,size:10})).unwrap(),e((0,r.H1)({isBlocked:!1})).unwrap()]);p((null===l||void 0===l?void 0:l.data)||[])}catch(t){console.error("Failed to fetch:",t),A("\u26a0\ufe0f Failed to load connections data."),d.oR.error("Failed to load data")}finally{N(!1),_(!1)}},[e]);(0,l.useEffect)(()=>{E()},[E]);const M=(0,l.useMemo)(()=>F.map(e=>{const s=(null===e||void 0===e?void 0:e.target_id)||{},t="Companies"===e.target_model,a="Institutions"===e.target_model,l="Users"===e.target_model;let n=s.name||"Unknown";return l&&(n="".concat(s.first_name||""," ").concat(s.last_name||"").trim()),{id:s._id,name:n,avatar:t||a?s.logo_url:s.profile_picture_url,targetModel:e.target_model||"Users",entityType:t?"company":a?"institute":"user",headline:s.headline||"",followerCount:s.follower_count||0}}),[F]),S=(0,l.useMemo)(()=>v.map(e=>({id:e.connectionUserId,name:e.first_name&&e.last_name?"".concat(e.first_name," ").concat(e.last_name):(null===e||void 0===e?void 0:e.username)||"Unknown User",title:e.headline||"",summary:e.summary||"No summary available.",avatar:e.profile_picture_url,unreadCount:e.unreadCount||0,isBlocked:e.isBlocked||!1,isClickable:!0,entityType:"user",isVerified:e.is_verified||!1,frameStatus:e.frame_status||"",followerCount:e.follower_count||0,connectionCount:e.connection_count||0,profileViews:e.profile_views||0})),[v]),D=(0,l.useMemo)(()=>S.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.title.toLowerCase().includes(t.toLowerCase())||e.summary.toLowerCase().includes(t.toLowerCase())),[S,t]),V=(0,l.useMemo)(()=>M.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.headline.toLowerCase().includes(t.toLowerCase())),[M,t]),I=e=>{if(e.isClickable||"Users"===(null===e||void 0===e?void 0:e.targetModel))s("/user/profile/".concat(encodeURIComponent(null===e||void 0===e?void 0:e.name),"/").concat(null===e||void 0===e?void 0:e.id));else{let t="Companies"===(null===e||void 0===e?void 0:e.targetModel)?"companies":"institutions";s("/user/view-details/".concat(t,"/").concat(null===e||void 0===e?void 0:e.id))}},B=async s=>{const t="disconnect-".concat(s.id);L(e=>(0,a.A)((0,a.A)({},e),{},{[t]:!0}));try{const t=await e((0,r.Gx)({connection_user_id:null===s||void 0===s?void 0:s.id})).unwrap();t&&d.oR.success((null===t||void 0===t?void 0:t.message)||"User disconnected!"),await E(!0)}catch(l){d.oR.error("Failed to disconnect")}finally{L(e=>{const s=(0,a.A)({},e);return delete s[t],s})}},z=async s=>{const t="unfollow-".concat(s.id);L(e=>(0,a.A)((0,a.A)({},e),{},{[t]:!0}));try{await e((0,r.gU)({target_id:null===s||void 0===s?void 0:s.id,target_model:null===s||void 0===s?void 0:s.targetModel})).unwrap(),d.oR.success("Unfollowed successfully!"),await E(!0)}catch(l){d.oR.error("Failed to unfollow")}finally{L(e=>{const s=(0,a.A)({},e);return delete s[t],s})}},G=e=>{switch(e){case"company":return(0,u.jsx)(n.G6y,{className:"w-5 h-5 text-purple-500"});case"institute":return(0,u.jsx)(n.tYb,{className:"w-5 h-5 text-orange-500"});default:return(0,u.jsx)(n.PY8,{className:"w-5 h-5 text-blue-500"})}};return(0,l.useEffect)(()=>{const e=T.get("tab");e?b(e):(b("connection"),R({tab:"connection"}))},[]),j?(0,u.jsx)("div",{className:"transition relative animate-pulse grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(5)].map((e,s)=>(0,u.jsx)(h,{},s))}):k?(0,u.jsxs)("div",{className:"flex flex-col items-center justify-center h-72 gap-4",children:[(0,u.jsx)("div",{className:"text-5xl",children:"\u26a0\ufe0f"}),(0,u.jsx)("p",{className:"text-red-500 font-medium",children:k}),(0,u.jsx)(c.A,{onClick:()=>E(),variant:"primary",children:"Retry"})]}):(0,u.jsxs)("div",{className:"w-full mx-auto p-6 min-h-screen",children:[(0,u.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-8",children:[(0,u.jsx)("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto",children:(0,u.jsxs)("form",{className:"relative w-full sm:w-80",children:[(0,u.jsx)(n.iyI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,u.jsx)("input",{type:"text",placeholder:"Search connections or followings...",value:t,onChange:e=>w(e.target.value),className:"pl-10 pr-10 py-2 border border-gray-300 rounded-full focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none w-full shadow-sm"}),t&&(0,u.jsx)("button",{type:"button",onClick:()=>w(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:(0,u.jsx)(m.$8F,{size:18})})]})}),(0,u.jsx)("div",{className:"flex bg-white rounded-xl p-1 shadow-sm border border-gray-200 md:w-fit w-full",children:[{key:"connection",label:"Connections",count:D.length},{key:"following",label:"Following",count:V.length}].map(e=>(0,u.jsxs)("button",{onClick:()=>{b(e.key),R({tab:e.key})},className:"\n        relative px-6 py-2.5 rounded-lg w-full flex items-center gap-2 text-sm font-medium transition-all duration-300\n        ".concat(y===e.key?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-sm":"text-gray-600 hover:bg-gray-100"),children:[e.label,(0,u.jsx)("span",{className:"text-xs font-semibold px-2 py-0.5 rounded-full transition-all duration-300\n                  ".concat(y===e.key?"bg-white text-blue-600 shadow-sm":"bg-gray-200 text-gray-700"),children:e.count})]},e.key))})]}),(0,u.jsx)("div",{className:"grid xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2 grid-cols-1 gap-6",children:"connection"===y?D.length>0?D.map(e=>(0,u.jsx)(x,{user:e,handleDisconnectUser:B,actionLoading:U,handleUserClick:I,DEFAULT_AVATAR:f},e.id)):(0,u.jsx)("div",{className:"col-span-full text-center py-16 text-gray-500",children:"No connections found"}):V.length>0?V.map(e=>(0,u.jsx)(g,{user:e,handleUnfollow:z,actionLoading:U,handleUserClick:I,getEntityIcon:G,DEFAULT_AVATAR:f},e.id)):(0,u.jsxs)("div",{className:"col-span-full text-center py-24 text-gray-400",children:[(0,u.jsx)("p",{className:"text-3xl mb-4",children:"\ud83d\udc40"}),(0,u.jsx)("p",{className:"text-lg",children:"No following found."})]})})]})}}}]);
//# sourceMappingURL=340.51ec39d8.chunk.js.map