{"version":3,"file":"static/js/937.eed35d5c.chunk.js","mappings":"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","sources":["pages/Message/MessageBubble.js","pages/Message/MessageInput.js","pages/Message/ContactList.js","pages/Message/Message.js"],"sourcesContent":["/* eslint-disable jsx-a11y/img-redundant-alt */\n\nimport React, { useCallback, useState } from 'react';\nimport { BiDownload, BiLink, BiShare, BiTag } from 'react-icons/bi';\n// import { BsReplyAll } from 'react-icons/bs';\nimport { FaReply } from 'react-icons/fa6';\nimport { RiCheckDoubleLine, RiCheckLine } from 'react-icons/ri';\n// import { FiShare2, FiTag, FiExternalLink,  } from 'react-icons/fi';\nimport { useNavigate } from 'react-router-dom';\nimport { toast } from 'sonner';\nimport JobPost from '../Home/components/JobPost';\nimport LinkedInCertificate from '../Certificates/Certificates';\nimport { convertTimestampToDate } from '../../components/utils/globalFunction';\n// import PdfThumbnail from '../../components/ui/PdfThumbnail/PdfThumbnail';\n\n\n\nconst getYouTubeEmbedUrl = (url) => {\n  if (!url) return null;\n\n  let videoId = null;\n\n  try {\n    if (url?.includes('youtube.com/watch?v=')) {\n      videoId = url.split('v=')[1]?.split('&')[0];\n    } else if (url.includes('youtu.be/')) {\n      videoId = url.split('youtu.be/')[1]?.split('?')[0];\n    } else if (url.includes('youtube.com/embed/')) {\n      // Already an embed URL, but ensure it has proper parameters\n      return url.includes('?') ? url : `${url}?enablejsapi=1&origin=${window.location.origin}`;\n    } else if (url.includes('youtube.com/v/')) {\n      videoId = url.split('v/')[1]?.split('?')[0];\n    } else if (url.includes('youtube.com/shorts/')) {\n      videoId = url.split('shorts/')[1]?.split('?')[0];\n    }\n\n    if (videoId) {\n      return `https://www.youtube.com/embed/${videoId}?enablejsapi=1&origin=${window.location.origin}&rel=0&modestbranding=1`;\n    }\n  } catch (error) {\n    console.error('Error parsing YouTube URL:', error);\n  }\n\n  return null;\n};\n\n\nconst MessageText = ({ msg, isOwn }) => {\n  const urlRegex = /(https?:\\/\\/[^\\s]+)/g;\n  const urls = msg.message.match(urlRegex) || [];\n\n  const renderPreview = (url) => {\n    let embeddedUrl = \"\";\n    let isYoutube = false;\n    if (url.includes('youtube.com') || url.includes('youtu.be')) {\n      embeddedUrl = getYouTubeEmbedUrl(url);\n      isYoutube = true;\n    }\n    const isImage = /\\.(jpeg|jpg|gif|png|webp|svg)$/i.test(url);\n    const isVideo = /\\.(mp4|webm|ogg|mov)$/i.test(url);\n\n    if (isYoutube) {\n      return (\n        <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n          <div className=\"mt-3 border rounded-lg overflow-hidden w-full h-80\">\n            <iframe\n              src={embeddedUrl}\n              title=\"Link Preview\"\n              className=\"w-full h-full pointer-events-none\"\n            />\n          </div>\n        </a>\n      )\n    }\n\n    if (isImage) {\n      return (\n        <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n          <img\n            src={url}\n            alt=\"Preview\"\n            className=\"w-full h-auto max-h-80 object-contain rounded-lg\"\n          />\n        </a>\n      );\n    }\n\n    if (isVideo) {\n      return (\n        <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n          <video\n            src={url}\n            controls\n            className=\"w-full max-h-80 rounded-lg\"\n          />\n        </a>\n      );\n    }\n\n    return (\n      <a\n        href={url}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"block p-4 bg-gray-100 hover:bg-gray-200 rounded-lg\"\n      >\n        <div className=\"flex items-center gap-3\">\n          <img\n            src={`https://www.google.com/s2/favicons?sz=64&domain_url=${url}`}\n            alt=\"favicon\"\n            className=\"w-6 h-6\"\n          />\n          <span className=\"truncate text-blue-600\">{url}</span>\n        </div>\n      </a>\n    );\n  };\n\n  return (\n    <div>\n      {/* Message text */}\n      <div\n        className={`text-sm whitespace-pre-wrap break-words ${urls.length\n          ? \"text-blue-600 cursor-pointer hover:underline\"\n          : isOwn\n            ? \"text-[#000000E6]\"\n            : \"text-gray-800\"\n          }`}\n      >\n        {msg.message.split(urlRegex).map((part, index) =>\n          urlRegex.test(part) ? (\n            <a\n              key={index}\n              href={part}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"text-blue-600 hover:underline\"\n            >\n              {part}\n            </a>\n          ) : (\n            part\n          )\n        )}\n      </div>\n\n      {/* Preview section for each URL */}\n      {urls.length > 0 && (\n        <div className=\"mt-3 space-y-3 w-full max-w-md\">\n          {urls.map((url, idx) => (\n            <div\n              key={idx}\n              className=\"border rounded-lg overflow-hidden shadow-sm\"\n            >\n              {renderPreview(url)}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\n\nconst MessageBubble = ({ msg, isOwn, onReply, messages = [], user_id }) => {\n  const [pollVote, setPollVote] = useState(null);\n  const navigate = useNavigate()\n  const formatTime = (timestamp) => {\n    const date = new Date(timestamp);\n    return date.toLocaleTimeString('en-US', {\n      hour: 'numeric',\n      minute: '2-digit',\n      hour12: true\n    }).toLowerCase().replace(' ', '');\n  };\n\n  const getFileName = (url) => {\n    // console.log(url)\n    // PdfThumbnail(url)\n    if (!url) return 'file';\n    return url.split('/').pop().split('?')[0] || 'file';\n  };\n\n  const handleDownload = (url, filename) => {\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = filename;\n    link.target = '_blank';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const handleReplyClick = (e) => {\n    e.stopPropagation();\n    onReply(msg);\n  };\n\n  const getRepliedMessage = () => {\n    if (!msg.isReplied || !msg.chat_id) return null;\n    if (msg.reply_to) return msg.reply_to;\n    if (!msg.isReplied || !msg.chat_id) return null;\n    return messages.find(m => m._id === msg.chat_id || m.id === msg.chat_id);\n    // return messages.find(m => m._id === msg.chat_id || m.id === msg.chat_id);\n  };\n\n  const renderRepliedMessage = () => {\n    const repliedMsg = getRepliedMessage();\n    if (!repliedMsg) return null;\n\n    const getReplyPreviewText = () => {\n      if (repliedMsg.message) return repliedMsg.message;\n      if (repliedMsg.file_type === 'image') return 'ğŸ“· Image';\n      if (repliedMsg.file_type === 'video') return 'ğŸ¥ Video';\n      if (repliedMsg.file_type === 'pdf') return 'ğŸ“„ PDF';\n      if (repliedMsg.file_type === 'shared-post') return 'ğŸ“ Shared Post';\n      if (repliedMsg.file_type === 'shared-interview') return 'ğŸ“… Interview Scheduled';\n      return 'Message';\n    };\n\n    const repliedMessageOwn = repliedMsg.sender_id === msg.sender_id;\n\n    return (\n      <div className={`mb-2 p-2 rounded-lg border-l-2 ${isOwn\n        ? 'bg-gray-600 border-white/40'\n        : 'bg-gray-100 border-gray-300'\n        }`}>\n        <p className={`text-xs font-medium mb-1 ${isOwn ? 'text-white/80' : 'text-gray-600'\n          }`}>\n          {repliedMessageOwn ? 'You' : 'Them'}\n        </p>\n        <p className={`text-xs truncate ${isOwn ? 'text-white/90' : 'text-gray-700'\n          }`}>\n          {getReplyPreviewText()}\n        </p>\n      </div>\n    );\n  };\n\n  const renderSharedPostMedia = (sharedData) => {\n    if (sharedData.video_url && sharedData.image_urls?.length > 0) {\n      return (\n        <div className=\"mb-3\">\n          <div className=\"relative group\">\n            <img\n              src={sharedData.image_urls[0]}\n              alt=\"Shared content\"\n              className=\"w-full h-32 object-cover rounded-lg cursor-pointer hover:brightness-95 transition-all\"\n              onClick={() => window.open(sharedData.image_urls[0], '_blank')}\n            />\n            <div className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 rounded-full p-1.5\">\n              <BiDownload\n                className=\"w-4 h-4 text-white cursor-pointer\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleDownload(sharedData.image_urls[0], getFileName(sharedData.image_urls[0]));\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    if (sharedData.video_url) {\n      return (\n        <div className=\"relative group mb-3\">\n          <video\n            controls\n            className=\"w-full h-32 object-contain bg-black rounded-lg\"\n            preload=\"metadata\"\n          >\n            <source src={sharedData.video_url} type=\"video/mp4\" />\n            Your browser does not support the video tag.\n          </video>\n          <div className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 rounded-full p-1.5\">\n            <BiDownload\n              className=\"w-4 h-4 text-white cursor-pointer\"\n              onClick={(e) => {\n                e.stopPropagation();\n                handleDownload(sharedData.video_url, getFileName(sharedData.video_url));\n              }}\n            />\n          </div>\n        </div>\n      );\n    }\n\n    if (sharedData.image_urls?.length > 0) {\n      return (\n        <div className=\"mb-3\">\n          {sharedData.image_urls.length === 1 ? (\n            <div className=\"relative group\">\n              <img\n                src={sharedData.image_urls[0]}\n                alt=\"Shared content\"\n                className=\"w-full h-32 object-cover rounded-lg cursor-pointer hover:brightness-95 transition-all\"\n                onClick={() => window.open(sharedData.image_urls[0], '_blank')}\n              />\n              <div className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 rounded-full p-1.5\">\n                <BiDownload\n                  className=\"w-4 h-4 text-white cursor-pointer\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    handleDownload(sharedData.image_urls[0], getFileName(sharedData.image_urls[0]));\n                  }}\n                />\n              </div>\n            </div>\n          ) : (\n            <div className=\"grid grid-cols-2 gap-1\">\n              {sharedData.image_urls.slice(0, 4).map((url, index) => (\n                <div key={index} className=\"relative group\">\n                  <img\n                    src={url}\n                    alt={`Shared content ${index + 1}`}\n                    className=\"w-full h-20 object-cover rounded cursor-pointer hover:brightness-95 transition-all\"\n                    onClick={() => window.open(url, '_blank')}\n                  />\n                  <div className=\"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 rounded-full p-1\">\n                    <BiDownload\n                      className=\"w-3 h-3 text-white cursor-pointer\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        handleDownload(url, getFileName(url));\n                      }}\n                    />\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  const handleCopyLink = useCallback((post) => {\n    // console.log(post)\n    if (post) {\n      navigator.clipboard.writeText(`https://dev-verified.jamsara.com/postView/${post}`);\n      // http://localhost:3000/postView/68a2f34d189e623973cda851\n      navigate(`/postView/${post}`)\n      toast.success('Link copied to clipboard');\n    } else {\n      toast.error('Invalid post data');\n    }\n    // setShowOptionsDropdown(null);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handlePollVote = (optionIndex) => {\n    setPollVote(optionIndex);\n    // Here you would typically call an API to record the vote\n    toast.success('Vote recorded!');\n  };\n\n  const renderLinkPreview = (sharedData) => {\n    return (\n      <div className=\"mb-3\">\n        {/* Link thumbnail */}\n        {sharedData.thumbnail && (\n          <div className=\"relative group mb-2\">\n            <img\n              src={sharedData.thumbnail}\n              alt=\"Link preview\"\n              className=\"w-full h-32 object-cover rounded-lg cursor-pointer hover:brightness-95 transition-all\"\n              onClick={() => window.open(sharedData.link, '_blank')}\n            />\n          </div>\n        )}\n\n        {/* Link details */}\n        <div\n          className={`p-3 rounded-lg border cursor-pointer hover:bg-opacity-80 transition-all ${isOwn ? 'bg-white/10 border-white/20' : 'bg-gray-50 border-gray-200'\n            }`}\n          onClick={() => window.open(sharedData.link, '_blank')}\n        >\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex-1\">\n              {sharedData.title && (\n                <h4 className={`font-semibold text-sm mb-1 ${isOwn ? 'text-black/90' : 'text-gray-800'\n                  }`}>\n                  {sharedData.title}\n                </h4>\n              )}\n              {sharedData.link && (\n                <p className={`text-xs mb-2 ${isOwn ? 'text-black/70' : 'text-gray-600'\n                  }`}>\n                  {new URL(sharedData.link).hostname}\n                </p>\n              )}\n            </div>\n            <BiLink className={`w-4 h-4 ml-2 ${isOwn ? 'text-black/70' : 'text-gray-500'\n              }`} />\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const renderPoll = (sharedData) => {\n    const poll = sharedData.poll || {};\n    const totalVotes = poll.total_votes || 0;\n\n    return (\n      <div className=\"mb-3\">\n        <div className={`flex items-center space-x-2 mb-3 ${isOwn ? 'text-black/80' : 'text-gray-600'\n          }`}>\n          {/* <ch className=\"w-4 h-4\" /> */}\n          <span className=\"text-xs font-medium\">Poll â€¢ {totalVotes} votes</span>\n        </div>\n\n        <div className=\"space-y-2\">\n          {poll.options?.map((option, index) => {\n            const percentage = totalVotes > 0 ? Math.round((option.vote_count / totalVotes) * 100) : 0;\n            const hasVoted = pollVote === index;\n\n            return (\n              <div\n                key={index}\n                className={`relative p-3 rounded-lg border cursor-pointer transition-all ${hasVoted\n                  ? isOwn\n                    ? 'bg-blue-500/20 border-blue-400/50'\n                    : 'bg-blue-50 border-blue-200'\n                  : isOwn\n                    ? 'bg-white/10 border-white/20 hover:bg-white/20'\n                    : 'bg-gray-50 border-gray-200 hover:bg-gray-100'\n                  }`}\n                onClick={() => handlePollVote(index)}\n              >\n                {/* Progress bar background */}\n                <div\n                  className={`absolute inset-0 rounded-lg transition-all ${isOwn ? 'bg-blue-400/20' : 'bg-blue-100'\n                    }`}\n                  style={{ width: `${percentage}%` }}\n                />\n\n                <div className=\"relative flex items-center justify-between\">\n                  <span className={`text-sm font-medium ${isOwn ? 'text-black/90' : 'text-gray-800'\n                    }`}>\n                    {option.text}\n                  </span>\n                  <div className=\"flex items-center space-x-2\">\n                    <span className={`text-xs ${isOwn ? 'text-black/70' : 'text-gray-600'\n                      }`}>\n                      {percentage}%\n                    </span>\n                    <span className={`text-xs ${isOwn ? 'text-black/70' : 'text-gray-600'\n                      }`}>\n                      ({option.vote_count})\n                    </span>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        {poll.voting_length && (\n          <p className={`text-xs mt-2 ${isOwn ? 'text-black/70' : 'text-gray-500'\n            }`}>\n            Voting ends in {poll.voting_length} days\n          </p>\n        )}\n      </div>\n    );\n  };\n\n  const renderMessageContent = () => {\n    switch (msg.file_type) {\n      case 'shared-interview':\n        const interview = msg.shared_data || {};\n        const job = interview.job_details || {};\n        const company = job.company || {};\n        const skills = job.required_skills || [];\n\n        return (\n          <div\n            className={`border rounded-lg overflow-hidden max-w-[320px] ${isOwn ? 'bg-white/10 border-white/20' : 'bg-white border-gray-200'\n              }`}\n          >\n            <div\n              className={`flex items-center space-x-2 p-3 border-b ${isOwn ? 'border-white/20' : 'border-gray-200'\n                }`}\n            >\n              <BiShare className={`w-4 h-4 ${isOwn ? 'text-[#000000E6]' : 'text-gray-500'}`} />\n              <span\n                className={`text-xs font-medium ${isOwn ? 'text-[#000000E6]' : 'text-gray-500'}`}\n              >\n                Interview Scheduled\n              </span>\n            </div>\n\n            <div className=\"p-3\">\n              <div className=\"flex items-center space-x-3 mb-3\">\n                {company.logo_url && (\n                  <img\n                    src={company.logo_url}\n                    alt={company.name || 'Company Logo'}\n                    className=\"w-10 h-10 rounded-full object-cover border\"\n                  />\n                )}\n                <div>\n                  <p className=\"text-sm font-semibold text-gray-800\">{company.name}</p>\n                  <p className=\"text-xs text-gray-500\">{job.job_title_details?.name}</p>\n                </div>\n              </div>\n\n              <div className=\"text-xs text-gray-600 space-y-1 mb-3\">\n                <p><strong>Type:</strong> {job.job_type}</p>\n                <p><strong>Location:</strong> {job.job_location} ({job.work_location})</p>\n                <p><strong>Pay:</strong> {job.pay_type} ({job.salary_range})</p>\n                <p><strong>Industry:</strong> {job.industry?.name}</p>\n              </div>\n\n              {interview.content && (\n                <p className=\"text-sm mb-3 text-gray-800\">{interview.content}</p>\n              )}\n\n              {(interview.select_date || interview.select_time) && (\n                <div className=\"text-xs text-gray-600 mb-3\">\n                  {interview.select_date && (\n                    <p>\n                      <strong>Date:</strong>{' '}\n                      {new Date(interview.select_date).toLocaleDateString()}\n                    </p>\n                  )}\n                  {interview.select_time && (\n                    <p>\n                      <strong>Time:</strong>{' '}\n                      {new Date(interview.select_time).toLocaleTimeString([], {\n                        hour: '2-digit',\n                        minute: '2-digit'\n                      })}\n                    </p>\n                  )}\n                </div>\n              )}\n              {skills.length > 0 && (\n                <div className=\"flex flex-wrap gap-1 mb-3\">\n                  {skills.map((skill) => (\n                    <span\n                      key={skill._id}\n                      className=\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full\"\n                    >\n                      {skill.name}\n                    </span>\n                  ))}\n                </div>\n              )}\n\n              {/* Meeting URL */}\n              {interview.meeting_url && (\n                <a\n                  href={interview.meeting_url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"text-xs text-blue-500 hover:underline\"\n                >\n                  Join Meeting\n                </a>\n              )}\n            </div>\n          </div>\n        );\n\n      case 'image':\n        return (\n          <div className=\"relative group\">\n            <img\n              src={msg.file_url}\n              alt=\"Shared image\"\n              className=\"max-w-[280px] rounded-lg object-cover cursor-pointer hover:brightness-95 transition-all\"\n              onClick={() => window.open(msg.file_url, '_blank')}\n            />\n            {msg.message && (\n              <div className={`mt-2 text-sm ${isOwn ? 'text-white' : 'text-gray-800'}`}>\n                {msg.message}\n              </div>\n            )}\n            <div className={`absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 rounded-full p-1.5`}>\n              <BiDownload\n                className=\"w-4 h-4 text-white cursor-pointer\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleDownload(msg.file_url, getFileName(msg.file_url));\n                }}\n              />\n            </div>\n          </div>\n        );\n\n      case 'video':\n        return (\n          <div className=\"relative group\">\n            <video\n              controls\n              className=\"max-w-[280px] rounded-lg\"\n              preload=\"metadata\"\n            >\n              <source src={msg.file_url} type=\"video/mp4\" />\n              Your browser does not support the video tag.\n            </video>\n            {msg.message && (\n              <div className={`mt-2 text-sm ${isOwn ? 'text-white' : 'text-gray-800'}`}>\n                {msg.message}\n              </div>\n            )}\n            <div className={`absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 rounded-full p-1.5`}>\n              <BiDownload\n                className=\"w-4 h-4 text-white cursor-pointer\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  handleDownload(msg.file_url, getFileName(msg.file_url));\n                }}\n              />\n            </div>\n          </div>\n        );\n\n      case 'pdf':\n        return (\n          <div className={`flex items-center space-x-3 p-3 rounded-lg max-w-[280px] ${isOwn ? 'bg-white/20' : 'bg-gray-100'}`}>\n\n            <div className=\"flex-1 min-w-0\">\n              <p className={`text-sm font-medium truncate ${isOwn ? 'text-[#000000E6]' : 'text-[#000000E6]'}`}>\n\n                {msg?.file_url && (\n                  <iframe\n                    src={`https://docs.google.com/gview?url=${msg?.file_url}&embedded=true`}\n                    style={{ width: \"100%\", height: \"100px\", border: \"none\" }}\n                    title=\"PDF Preview\"\n                  />\n\n                )}\n\n              </p>\n              <p className={`text-xs ${isOwn ? 'text-[#000000E6]/70' : 'text-gray-500'}`}>\n                PDF Document\n              </p>\n            </div>\n            <button\n              onClick={() => handleDownload(msg.file_url, getFileName(msg.file_url))}\n              className={`flex-shrink-0 p-2 rounded-full hover:bg-opacity-20 transition-colors ${isOwn ? 'hover:bg-white/30' : 'hover:bg-gray-300'}`}\n            >\n              <BiDownload className={`w-4 h-4 ${isOwn ? 'text-[#000000E6]' : 'text-gray-600'}`} />\n            </button>\n          </div>\n        );\n\n      case 'shared-post':\n        const sharedData = msg.shared_data || {};\n        if (sharedData.post_type === 'jobs') {\n          return <JobPost job={sharedData?.post_job_id} isOwn={isOwn} />;\n        }\n        if (sharedData?.post_type === 'certificates') {\n          return <LinkedInCertificate\n            certificateName={sharedData?.post_certificate_id?.name} issueBy={sharedData?.post_certificate_id?.issuing_organization} description={sharedData?.post_certificate_id?.description}\n            date={convertTimestampToDate(sharedData?.post_certificate_id?.issue_date)} record={sharedData?.post_certificate_id} type=\"certifications\" username={sharedData?.user_details?.name} />\n        }\n        return (\n          <div className={`border rounded-lg overflow-hidden max-w-[320px] ${isOwn ? 'bg-white/10 border-white/20' : 'bg-white border-gray-200'}`}>\n            <div className={`flex items-center space-x-2 p-3 border-b ${isOwn ? 'border-white/20' : 'border-gray-200'}`}\n              onClick={() => {\n                sessionStorage.setItem('currentPostId', msg?.shared_data?.share_id);\n                // navigate(`/user/post-view/${user_id?.first_name}`);\n                handleCopyLink(msg?.shared_data?.share_id)\n              }}\n            >\n              <BiShare className={`w-4 h-4 ${isOwn ? 'text-[#000000E6]' : 'text-gray-500'}`} />\n              <span className={`text-xs font-medium ${isOwn ? 'text-[#000000E6]' : 'text-gray-500'}`}>\n                Shared Post\n              </span>\n            </div>\n\n            <div className=\"flex items-center space-x-3 p-2\">\n              {sharedData?.user_details && (\n                <img\n                  src={sharedData?.user_details?.profile_picture_url || '/0684456b-aa2b-4631-86f7-93ceaf33303c.png'}\n                  alt={'User Avatar'}\n                  className=\"w-8 h-8 rounded-full object-cover border\"\n                />\n              )}\n              <div>\n                <p className=\"text-sm font-semibold text-gray-800\">\n                  {sharedData?.user_details?.first_name} {sharedData?.user_details?.last_name} {sharedData?.user_details?.name}\n                </p>\n              </div>\n            </div>\n\n            <div className=\"p-3\">\n              {sharedData.content && (\n                <p className={`text-sm mb-3 ${isOwn ? 'text-[#000000E6]' : 'text-gray-800'}`}>\n                  {sharedData.content}\n                </p>\n              )}\n\n              {sharedData.post_type === 'link' && renderLinkPreview(sharedData)}\n              {sharedData.post_type === 'poll' && renderPoll(sharedData)}\n              {(!sharedData.post_type || sharedData.post_type === 'media') && renderSharedPostMedia(sharedData)}\n\n              {sharedData.tags?.length > 0 && (\n                <div className=\"flex flex-wrap gap-1\">\n                  {sharedData.tags.slice(0, 3).map((tag, index) => (\n                    <span\n                      key={index}\n                      className={`inline-flex items-center space-x-1 text-xs px-2 py-1 rounded-full ${isOwn ? 'bg-white/20 text-[#000000E6]' : 'bg-blue-100 text-blue-800'\n                        }`}\n                    >\n                      <BiTag className=\"w-3 h-3\" />\n                      <span>{tag}</span>\n                    </span>\n                  ))}\n                  {sharedData.tags.length > 3 && (\n                    <span className={`text-xs px-2 py-1 rounded-full ${isOwn ? 'bg-white/20 text-[#000000E6]' : 'bg-gray-100 text-gray-600'}`}>\n                      +{sharedData.tags.length - 3} more\n                    </span>\n                  )}\n                </div>\n              )}\n\n              <div>\n                <img src={sharedData?.image_urls[0]} alt='img'/>\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'text':\n      default:\n        return msg.message ? (\n          <div className={`text-sm whitespace-pre-wrap break-words ${isOwn ? 'text-[#000000E6]' : 'text-gray-800'}`}>\n            {/* {msg.message} */}\n            <MessageText msg={msg} />\n          </div>\n        ) : null;\n    }\n  };\n\n  return (\n    <div className={`flex msg_ui overflow-hidden overflow-auto mb-1.5 px-4 ${isOwn ? 'justify-end' : 'justify-start'}`}>\n      <div className={`max-w-[85%] relative group ${isOwn\n        ? 'bg-[#fcfcff] text-[#000000E6] rounded-tr-none rounded-lg'\n        : 'bg-white text-gray-800 rounded-tl-none rounded-lg shadow-sm'\n        }`}\n        style={{\n          borderRadius: isOwn ? '7.5px 0 7.5px 7.5px' : '0 7.5px 7.5px 7.5px'\n        }}\n      >\n\n        <div className=\"px-3 pt-3 pb-1 \">\n          {renderRepliedMessage()}\n\n          {renderMessageContent()}\n\n          <div className={`flex justify-between items-center mt-2 space-x-2 ${isOwn ? 'text-[#000000E6]' : 'text-gray-500'\n            }`}>\n            {/* Reply button */}\n            <button\n              onClick={handleReplyClick}\n              className={`  transition-opacity p-1 rounded-full hover:bg-gray-200/50 ${isOwn ? 'hover:bg-white/20' : 'hover:bg-gray-100'\n                }`}\n              title=\"Reply\"\n            >\n              <FaReply className=\"w-4 h-4\" />\n            </button>\n\n            {/* Timestamp and read status */}\n            <div className='flex justify-end items-center gap-2'>\n              <span className=\"text-[11px]\">\n                {formatTime(msg.timestamp || msg.createdAt)}\n              </span>\n              {isOwn && (\n                <span className=\"text-xs\">\n                  {msg.isRead ? (\n\n                    <RiCheckDoubleLine size={20} color=\"blue\" />\n                  ) : (\n                    <RiCheckLine size={20} color=\"blue\" />\n                  )}\n                </span>\n              )}\n\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MessageBubble","import React from 'react';\nimport { BiPaperclip, BiSend, BiX, BiFile, BiImage, BiVideo, BiBlock } from 'react-icons/bi';\nimport { FaRegSmile } from 'react-icons/fa';\nimport EmojiPicker from 'emoji-picker-react';\n\nconst MessageInput = ({\n    fileInputRef,\n    handleFileChange,\n    messageInput,\n    setMessageInput,\n    handleKeyPress,\n    sendingMessage,\n    handleSendMessage,\n    mediaPreview,\n    setMediaPreview,\n    uploadProgress,\n    loading,\n    contacts,\n    onUnblock,\n    replyingTo,\n    cancelReply\n}) => {\n\n    const [showEmojiPicker, setShowEmojiPicker] = React.useState(false);\n    const textAreaRef = React.useRef(null);\n\n    const clearMediaPreview = () => {\n        if (mediaPreview.file_url && typeof mediaPreview.file_url === 'string' && mediaPreview.file_url.startsWith('blob:')) {\n            URL.revokeObjectURL(mediaPreview.file_url);\n        }\n        setMediaPreview({ file_url: null, file_type: null });\n    };\n\n    const getFileIcon = (fileType) => {\n        switch (fileType) {\n            case 'image':\n                return <BiImage className=\"w-5 h-5 text-green-600\" />;\n            case 'video':\n                return <BiVideo className=\"w-5 h-5 text-purple-600\" />;\n            case 'pdf':\n                return <BiFile className=\"w-5 h-5 text-red-600\" />;\n            default:\n                return <BiFile className=\"w-5 h-5 text-gray-600\" />;\n        }\n    };\n\n    const renderReplyPreview = () => {\n        if (!replyingTo) return null;\n\n        const getReplyText = () => {\n            if (replyingTo.message) return replyingTo.message;\n            if (replyingTo.file_type === 'image') return 'ğŸ“· Image';\n            if (replyingTo.file_type === 'video') return 'ğŸ¥ Video';\n            if (replyingTo.file_type === 'pdf') return 'ğŸ“„ PDF';\n            if (replyingTo.file_type === 'shared-post') return 'ğŸ“ Shared Post';\n            if (replyingTo.file_type === 'shared-interview') return 'ğŸ“… Interview Scheduled';\n            return 'Message';\n        };\n\n        return (\n            <div className=\"px-4 py-3 border-t border-gray-200 bg-blue-50\">\n                <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                        <div className=\"flex items-center space-x-2 mb-1\">\n                            <div className=\"w-1 h-8 bg-blue-500 rounded-full\"></div>\n                            <div>\n                                <p className=\"text-xs font-medium text-blue-700\">\n                                    Replying to {replyingTo.sender_id === contacts?.connectionUserId ? contacts?.first_name : 'You'}\n                                </p>\n                                <p className=\"text-sm text-gray-600 truncate max-w-xs\">\n                                    {getReplyText()}\n                                </p>\n                            </div>\n                        </div>\n                    </div>\n                    <button\n                        onClick={cancelReply}\n                        className=\"p-1 hover:bg-blue-100 rounded-full transition-colors\"\n                    >\n                        <BiX className=\"w-4 h-4 text-blue-500\" />\n                    </button>\n                </div>\n            </div>\n        );\n    };\n\n    const handleEmojiClick = (emojiData) => {\n        const cursorPos = textAreaRef.current.selectionStart;\n        const textBefore = messageInput.slice(0, cursorPos);\n        const textAfter = messageInput.slice(cursorPos);\n        const newText = textBefore + emojiData.emoji + textAfter\n        setMessageInput(newText);\n        setTimeout(() => {\n            textAreaRef.current.focus();\n            textAreaRef.current.selectionStart = cursorPos + emojiData.emoji.length;\n            textAreaRef.current.selectionEnd = cursorPos + emojiData.emoji.length;\n        }, 0);\n\n        setShowEmojiPicker(false);\n    };\n\n\n    const renderMediaPreview = () => {\n        if (!mediaPreview.file_url) return null;\n\n        return (\n            <div className=\"px-4 py-3 border-t border-gray-200 bg-gray-50\">\n                <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-3\">\n                        {mediaPreview.file_type === 'image' && typeof mediaPreview.file_url === 'string' && mediaPreview.file_url.startsWith('blob:') ? (\n                            <img\n                                src={mediaPreview.file_url}\n                                alt=\"Preview\"\n                                className=\"w-12 h-12 object-cover rounded-lg\"\n                            />\n                        ) : mediaPreview.file_type === 'video' && typeof mediaPreview.file_url === 'string' && mediaPreview.file_url.startsWith('blob:') ? (\n                            <video\n                                src={mediaPreview.file_url}\n                                className=\"w-12 h-12 object-cover rounded-lg\"\n                                muted\n                            />\n                        ) : (\n                            <div className=\"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center\">\n                                {getFileIcon(mediaPreview.file_type)}\n                            </div>\n                        )}\n\n                        <div className=\"flex-1\">\n                            <p className=\"text-sm font-medium text-[#000000E6]\">\n                                {mediaPreview.file_type === 'pdf'\n                                    ? mediaPreview.file_url\n                                    : `${mediaPreview.file_type.charAt(0).toUpperCase() + mediaPreview.file_type.slice(1)} file`\n                                }\n                            </p>\n                            {loading && (\n                                <div className=\"mt-1\">\n                                    <div className=\"text-xs text-gray-500 mb-1\">\n                                        Uploading... {uploadProgress}%\n                                    </div>\n                                    <div className=\"w-full bg-gray-200 rounded-full h-1\">\n                                        <div\n                                            className=\"bg-blue-500 h-1 rounded-full transition-all duration-300\"\n                                            style={{ width: `${uploadProgress}%` }}\n                                        ></div>\n                                    </div>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n\n                    <button\n                        onClick={clearMediaPreview}\n                        className=\"p-1 hover:bg-gray-200 rounded-full transition-colors\"\n                        disabled={loading}\n                    >\n                        <BiX className=\"w-5 h-5 text-gray-500\" />\n                    </button>\n                </div>\n            </div>\n        );\n    };\n\n    return (\n        <>\n            {!contacts?.isBlocked ? (\n                <div className=\"border-t border-gray-200 bg-white\">\n                    {/* Reply Preview */}\n                    {renderReplyPreview()}\n\n                    {/* Media Preview */}\n                    {renderMediaPreview()}\n\n                    <div className=\"p-4\">\n                        <div className=\"flex items-end space-x-3\">\n                            {/* File attachment button */}\n                            <div className=\"relative\">\n                                <button\n                                    onClick={() => fileInputRef.current?.click()}\n                                    className=\"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors\"\n                                    disabled={loading || sendingMessage}\n                                >\n                                    <BiPaperclip className=\"w-5 h-5\" />\n                                </button>\n                                <input\n                                    ref={fileInputRef}\n                                    type=\"file\"\n                                    onChange={handleFileChange}\n                                    accept=\"image/*,video/*,.pdf\"\n                                    className=\"hidden\"\n                                    disabled={loading || sendingMessage}\n                                />\n                            </div>\n\n                            <div className=\"flex-1 relative\">\n                                <textarea\n                                    value={messageInput}\n                                    ref={textAreaRef}\n                                    onChange={(e) => setMessageInput(e.target.value)}\n                                    onKeyPress={handleKeyPress}\n                                    placeholder={replyingTo ? \"Reply to message...\" : \"Type a message...\"}\n                                    className=\"w-full px-4 py-2 border border-gray-300 rounded-2xl resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent max-h-32 min-h-[40px]\"\n                                    rows={1}\n                                    disabled={loading || sendingMessage}\n                                    style={{\n                                        height: 'auto',\n                                        minHeight: '40px',\n                                        maxHeight: '128px',\n                                        overflowY: messageInput.split('\\n').length > 3 ? 'auto' : 'hidden'\n                                    }}\n                                    onInput={(e) => {\n                                        e.target.style.height = 'auto';\n                                        e.target.style.height = Math.min(e.target.scrollHeight, 128) + 'px';\n                                    }}\n                                />\n                                <span\n                                    onClick={() => setShowEmojiPicker(!showEmojiPicker)}\n                                    className=\"absolute right-3 top-2.5 text-gray-500 cursor-pointer hover:text-gray-700\"\n                                >\n                                    <FaRegSmile size={20} />\n                                </span>\n\n                                {showEmojiPicker && (\n                                    <div className=\"absolute bottom-full mb-2 right-0 z-50\">\n                                        <EmojiPicker onEmojiClick={handleEmojiClick} />\n                                    </div>\n                                )}\n                            </div>\n\n                            <button\n                                onClick={handleSendMessage}\n                                disabled={(!messageInput.trim() && !mediaPreview.file_url) || sendingMessage || loading}\n                                className={`p-2 rounded-full transition-all duration-200 ${(!messageInput.trim() && !mediaPreview.file_url) || sendingMessage || loading\n                                        ? 'bg-gray-200 text-gray-400 cursor-not-allowed'\n                                        : 'bg-blue-500 text-white hover:bg-blue-600 transform hover:scale-105'\n                                    }`}\n                            >\n                                {sendingMessage ? (\n                                    <div className=\"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin\"></div>\n                                ) : (\n                                    <BiSend className=\"w-5 h-5\" />\n                                )}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            ) : (\n                <div className=\"border-t border-gray-200 bg-white\">\n                    <div className=\"p-6 text-center\">\n                        <div className=\"flex flex-col items-center justify-center space-y-4\">\n                            <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center\">\n                                <BiBlock className=\"w-8 h-8 text-red-500\" />\n                            </div>\n                            <h3 className=\"text-lg font-medium text-[#000000E6]\">\n                                {contacts?.isBlockedByYou ? \"You blocked this user\" : \"You've been blocked\"}\n                            </h3>\n                            <p className=\"text-gray-500 max-w-md text-center\">\n                                {contacts?.isBlockedByYou\n                                    ? \"You won't be able to send or receive messages from this user until you unblock them.\"\n                                    : \"This user has blocked you. You can't send messages to them.\"}\n                            </p>\n\n                            {contacts?.isBlockedByYou && onUnblock && (\n                                <button\n                                    onClick={onUnblock}\n                                    className=\"mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\"\n                                >\n                                    Unblock User\n                                </button>\n                            )}\n                        </div>\n                    </div>\n                </div>\n            )}\n        </>\n    );\n};\n\nexport default MessageInput;","import React, { useState, useRef, useEffect } from \"react\";\nimport { convertTimestampToDate } from \"../../components/utils/globalFunction\";\nimport { BiDotsHorizontal } from \"react-icons/bi\";\n\nconst ContactItem = React.memo(\n  ({ contact, isSelected, onClick, onDelete }) => {\n    const [menuOpen, setMenuOpen] = useState(false);\n    const menuRef = useRef(null);\n\n    // Close menu when clicking outside\n    useEffect(() => {\n      const handleClickOutside = (event) => {\n        if (menuRef.current && !menuRef.current.contains(event.target)) {\n          setMenuOpen(false);\n        }\n      };\n      document.addEventListener(\"mousedown\", handleClickOutside);\n      return () => {\n        document.removeEventListener(\"mousedown\", handleClickOutside);\n      };\n    }, []);\n\n    return (\n      <div\n        className={`flex items-center p-4 hover:bg-gray-50 cursor-pointer transition-colors duration-150 ${\n          isSelected ? \"bg-blue-50 border-r-2 border-blue-500\" : \"\"\n        }`}\n        onClick={() => onClick(contact)}\n      >\n        {/* Avatar */}\n        <div className=\"relative\">\n          <div\n            className={`w-12 h-12 rounded-full flex items-center justify-center overflow-hidden shadow-md\n             ${\n               contact?.isBlocked\n                 ? \"bg-gradient-to-br from-gray-400 to-gray-600\"\n                 : \"bg-gradient-to-br from-blue-400 to-blue-600\"\n             }`}\n          >\n            {contact?.profile_picture_url ? (\n              <img\n                src={contact.profile_picture_url}\n                alt=\"Profile\"\n                className=\"w-full h-full object-cover\"\n                onError={(e) => {\n                  e.target.onerror = null;\n                  e.target.src =\n                    \"/0684456b-aa2b-4631-86f7-93ceaf33303c.png\";\n                }}\n              />\n            ) : (\n              <span className=\"text-white text-sm font-semibold\">\n                <img\n                  src=\"/0684456b-aa2b-4631-86f7-93ceaf33303c.png\"\n                  alt=\"default logo\"\n                />\n              </span>\n            )}\n          </div>\n          {contact.unread > 0 && (\n            <div className=\"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center shadow-sm\">\n              <span className=\"text-white text-xs font-medium\">\n                {contact.unread}\n              </span>\n            </div>\n          )}\n        </div>\n\n        {/* Content */}\n        <div className=\"ml-3 flex-1 min-w-0\">\n          <div className=\"flex items-center justify-between relative\" ref={menuRef}>\n            <h3 className=\"text-sm font-medium text-[#000000E6] truncate capitalize\">\n              {contact.first_name} {contact?.last_name}\n              {contact?.isBlocked && (\n                <span className=\"ml-2 text-xs text-red-500\">(Blocked)</span>\n              )}\n            </h3>\n            <span className=\"text-xs text-gray-500\">\n              {convertTimestampToDate(contact.latestMessageTime)}\n            </span>\n\n            {/* Dots menu toggle */}\n            <button\n              className=\"ml-2 p-1 rounded-full hover:bg-gray-200\"\n              onClick={(e) => {\n                e.stopPropagation(); // prevent parent onClick\n                setMenuOpen((prev) => !prev);\n              }}\n            >\n              <BiDotsHorizontal />\n            </button>\n\n            {/* Dropdown menu */}\n            {menuOpen && (\n              <div className=\"absolute right-0 top-6 w-28 bg-white border rounded-lg shadow-lg z-10\">\n                <button\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    onDelete(contact); // Call delete function\n                    setMenuOpen(false);\n                  }}\n                  className=\"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 rounded-t-lg\"\n                >\n                  Delete\n                </button>\n              </div>\n            )}\n          </div>\n\n          <p\n            className={`text-sm truncate mt-1 ${\n              contact?.isBlocked\n                ? \"text-gray-400 italic\"\n                : \"text-gray-600\"\n            }`}\n          >\n            {contact?.isBlocked\n              ? \"You have blocked this user\"\n              : contact.latestMessage || \"No messages yet\"}\n          </p>\n        </div>\n      </div>\n    );\n  }\n);\n\nexport default ContactItem;\n","/* eslint-disable react-hooks/exhaustive-deps */\n\n\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\nimport { BiArrowBack, BiSearch } from \"react-icons/bi\";\nimport { useDispatch } from \"react-redux\";\nimport { useParams } from \"react-router-dom\";\n\nimport { blockUnblockUser, clearChats, createUserConnection, messageChatUser, userChatList } from '../../redux/Users/userSlice';\nimport { toast } from \"sonner\";\nimport { uploadImageDirectly, uploadPdfDirectly, uploadVideoDirectly } from '../../components/utils/globalFunction';\nimport { FiMoreVertical } from \"react-icons/fi\";\nimport MessageBubble from \"./MessageBubble\";\nimport MessageInput from \"./MessageInput\";\nimport ContactItem from \"./ContactList\";\n\nexport default function Message({ profileData, socket }) {\n  const { id, isConnected } = useParams();\n  const dispatch = useDispatch();\n  const [messages, setMessages] = useState([]);\n  const [selectedContact, setSelectedContact] = useState(null);\n  const [isMobileView, setIsMobileView] = useState(false);\n  const [showChat, setShowChat] = useState(false);\n  const [contacts, setContacts] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [loading2, setLoading2] = useState(false);\n\n  const [chatLoading, setChatLoading] = useState(false);\n  const [sendingMessage, setSendingMessage] = useState(false);\n  const [messageInput, setMessageInput] = useState('');\n  const [searchKeyword, setSearchKeyword] = useState('');\n  const fileInputRef = useRef();\n  const [mediaPreview, setMediaPreview] = useState({ file_url: null, file_type: null });\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const messagesEndRef = useRef(null);\n  const [isMenuShow, setIsMenuShow] = useState(false);\n  const [replyingTo, setReplyingTo] = useState(null); // New state for reply\n  const currentUserId = profileData?.getProfileData?.data?.data?._id;\n\n  const getFileTypeFromUrl = (url) => {\n    if (!url) return null;\n\n    const extension = url.split('.').pop().toLowerCase();\n    if (['jpg', 'jpeg', 'png', 'gif', 'webp'].includes(extension)) return 'image';\n    if (['mp4', 'mov', 'avi', 'mkv', 'webm'].includes(extension)) return 'video';\n    if (extension === 'pdf') return 'pdf';\n    return null;\n  };\n\n  const defaultInterviewData = {\n    share_id: null,\n    share_path: '',\n    content: '',\n    select_date: null,\n    select_time: null,\n    meeting_url: '',\n    image_urls: [],\n    tags: [],\n    user_details: {},\n    job_details: {\n      _id: null,\n      job_type: '',\n      job_location: '',\n      work_location: '',\n      pay_type: '',\n      salary_range: '',\n      company: {\n        name: '',\n        logo_url: ''\n      },\n      industry: {\n        name: ''\n      },\n      job_title_details: {\n        name: ''\n      },\n      required_skills: []\n    }\n  };\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  // const normalizeMessage = useCallback((msg) => {\n  //   const uniqueId = msg._id || msg.id || `temp_${Date.now()}_${Math.random()}_${msg.sender_id}`;\n\n  //   let fileType = 'text';\n\n  //   if (msg.file_type === 'shared-interview') {\n  //     fileType = 'shared-interview';\n  //   } else if (msg.shared_data && (msg.shared_data.content || msg.shared_data.image_urls?.length > 0)) {\n  //     fileType = 'shared-post';\n  //   } else if (msg.file_type) {\n  //     fileType = msg.file_type;\n  //   } else if (msg.file_url) {\n  //     fileType = getFileTypeFromUrl(msg.file_url);\n  //   }\n\n\n\n  //   return {\n  //     ...msg,\n  //     id: uniqueId,\n  //     _id: msg._id || uniqueId,\n  //     timestamp: msg.createdAt || msg.timestamp || Date.now(),\n  //     file_type: fileType,\n  //     shared_data: fileType === 'shared-interview'\n  //       ? { ...defaultInterviewData, ...msg.shared_data }\n  //       : msg.shared_data || { image_urls: [], content: \"\", tags: [], share_id: null },\n  //     // Include reply data if exists\n  //     isReplied: msg.isReplied || false,\n  //     chat_id: msg.chat_id || null,\n  //     reply_to: msg.reply_to || null\n  //   };\n  // });\n\n\n  const normalizeMessage = useCallback((msg) => {\n    const uniqueId = msg._id || msg.id || `temp_${Date.now()}_${Math.random()}_${msg.sender_id}`;\n\n    let fileType = 'text';\n\n    if (msg.file_type === 'shared-interview') {\n      fileType = 'shared-interview';\n    } else if (msg.shared_data && (msg.shared_data.content || msg.shared_data.image_urls?.length > 0)) {\n      fileType = 'shared-post';\n    } else if (msg.file_type) {\n      fileType = msg.file_type;\n    } else if (msg.file_url) {\n      fileType = getFileTypeFromUrl(msg.file_url);\n    }\n\n    // Handle reply data\n    const replyData = msg.replyChat ? {\n      isReplied: true,\n      chat_id: msg.replyChat._id,\n      reply_to: normalizeMessage(msg.replyChat)\n    } : {\n      isReplied: msg.isReplied || false,\n      chat_id: msg.chat_id || null,\n      reply_to: msg.reply_to || null\n    };\n\n    return {\n      ...msg,\n      id: uniqueId,\n      _id: msg._id || uniqueId,\n      timestamp: msg.createdAt || msg.timestamp || Date.now(),\n      file_type: fileType,\n      shared_data: fileType === 'shared-interview'\n        ? { ...defaultInterviewData, ...msg.shared_data }\n        : msg.shared_data || { image_urls: [], content: \"\", tags: [], share_id: null },\n      ...replyData,\n      isRead: msg.isRead !== undefined ? msg.isRead : false,\n      isPending: msg.isPending || false\n    };\n  }, [defaultInterviewData]);\n\n\n  const fetchUserList = async () => {\n    setLoading(true);\n    try {\n      const res = await dispatch(messageChatUser()).unwrap();\n      setContacts(res?.data || []);\n    } catch (error) {\n      console.error('Failed to fetch contacts:', error);\n      toast.error('Failed to load contacts');\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchUserList();\n  }, [dispatch]);\n\n  useEffect(() => {\n    const handleResize = () => {\n      setIsMobileView(window.innerWidth < 768);\n    };\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  useEffect(() => {\n    if (id || isConnected === 'true') {\n      const targetContact = contacts.find(contact => contact.connectionUserId === id);\n      if (targetContact) {\n        handleContactClick(targetContact);\n      }\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [contacts, id, isConnected]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      handleSendMessage();\n    }\n  };\n\n  // New function to handle reply\n  const handleReply = (message) => {\n    setReplyingTo(message);\n    setIsMenuShow(false);\n  };\n\n  // New function to cancel reply\n  const cancelReply = () => {\n    setReplyingTo(null);\n  };\n\n  // const handleContactClick = useCallback(async (contactData) => {\n  //   setIsMenuShow(false)\n  //   if (!contactData?.connectionUserId) {\n  //     toast.error('Invalid contact data');\n  //     return;\n  //   }\n\n  //   setChatLoading(true);\n  //   setMediaPreview({ file_url: null, file_type: null });\n  //   setReplyingTo(null); // Clear reply when switching contacts\n\n  //   try {\n  //     if (socket) {\n  //       socket.emit(\"unsubscribe-from-chat\", selectedContact?.connectionUserId);\n  //       socket.emit(\"subscribe-to-chat\", contactData.connectionUserId);\n  //     }\n\n  //     setSelectedContact(contactData);\n  //     setMessages([]);\n\n  //     const res = await dispatch(userChatList({\n  //       receiver_id: contactData.connectionUserId,\n  //       page: 1,\n  //       size: 100\n  //     })).unwrap();\n\n  //     const normalizedMessages = (res?.data || []).map(normalizeMessage);\n  //     setMessages(normalizedMessages);\n\n  //     if (isMobileView) {\n  //       setShowChat(true);\n  //     }\n  //   } catch (error) {\n  //     console.error('Failed to load chat:', error);\n  //     toast.error('Failed to load chat messages');\n  //   } finally {\n  //     setChatLoading(false);\n  //   }\n  //   // eslint-disable-next-line react-hooks/exhaustive-deps\n  // }, [dispatch, socket, isMobileView, selectedContact]);\n\n\n\n  const handleContactClick = useCallback(async (contactData) => {\n    setIsMenuShow(false);\n    if (!contactData?.connectionUserId) {\n      toast.error('Invalid contact data');\n      return;\n    }\n\n    setChatLoading(true);\n    setMediaPreview({ file_url: null, file_type: null });\n    setReplyingTo(null); // Clear reply when switching contacts\n\n    try {\n      // Unsubscribe from previous chat if exists\n      if (socket && selectedContact?.connectionUserId) {\n        socket.emit(\"unsubscribe-from-chat\", selectedContact.connectionUserId);\n      }\n\n      // Subscribe to new chat\n      if (socket) {\n        socket.emit(\"subscribe-to-chat\", contactData.connectionUserId);\n      }\n\n      setSelectedContact(contactData);\n      setMessages([]); // Clear previous messages\n\n      // Fetch chat history\n      const res = await dispatch(userChatList({\n        receiver_id: contactData.connectionUserId,\n        page: 1,\n        size: 1000\n      })).unwrap();\n\n      const normalizedMessages = (res?.data || []).map(msg => {\n        const normalized = normalizeMessage(msg);\n\n        if (normalized.isReplied && normalized.chat_id) {\n          const repliedMsg = res.data.find(m =>\n            m._id === normalized.chat_id || m.id === normalized.chat_id\n          );\n          if (repliedMsg) {\n            normalized.reply_to = normalizeMessage(repliedMsg);\n          }\n        }\n\n        return normalized;\n      });\n\n      setMessages(normalizedMessages);\n\n      if (isMobileView) {\n        setShowChat(true);\n      }\n    } catch (error) {\n      console.error('Failed to load chat:', error);\n      toast.error('Failed to load chat messages');\n    } finally {\n      setChatLoading(false);\n    }\n  }, [socket, dispatch, isMobileView, normalizeMessage]);\n\n\n\n  useEffect(() => {\n    return () => {\n      if (mediaPreview.file_url && typeof mediaPreview.file_url === 'string' && mediaPreview.file_url.startsWith('blob:')) {\n        URL.revokeObjectURL(mediaPreview.file_url);\n      }\n\n      if (socket && selectedContact?.connectionUserId) {\n        socket.emit(\"unsubscribe-from-chat\", selectedContact.connectionUserId);\n      }\n    };\n  }, [mediaPreview.file_url, socket, selectedContact]);\n\n  const handleFileChange = async (event) => {\n    const file = event.target.files[0];\n    if (!file) return;\n    event.target.value = null;\n\n\n    if (mediaPreview.file_url && typeof mediaPreview.file_url === 'string' && mediaPreview.file_url.startsWith('blob:')) {\n      URL.revokeObjectURL(mediaPreview.file_url);\n    }\n\n    if (file.size > 10 * 1024 * 1024) {\n      toast.error('File size should be less than 10MB');\n      return;\n    }\n\n    const fileName = file.name.toLowerCase();\n    const isImage = /\\.(png|jpg|jpeg|gif|webp)$/.test(fileName);\n    const isPdf = /\\.pdf$/.test(fileName);\n    const isVideo = /\\.(mp4|mov|avi|mkv|webm)$/.test(fileName);\n\n    if (!isImage && !isPdf && !isVideo) {\n      toast.error('Unsupported file type. Please upload an image, PDF, or video.');\n      return;\n    }\n\n    let previewUrl = null;\n    if (isImage || isVideo) {\n      previewUrl = URL.createObjectURL(file);\n      setMediaPreview({\n        file_url: previewUrl,\n        file_type: isImage ? 'image' : 'video'\n      });\n    } else if (isPdf) {\n      setMediaPreview({\n        file_url: file.name,\n        file_type: 'pdf'\n      });\n    }\n\n    setLoading2(true);\n    setUploadProgress(0);\n\n    try {\n      let result;\n      const onUploadProgress = (progressEvent) => {\n        const percentCompleted = Math.round(\n          (progressEvent.loaded * 100) / progressEvent.total\n        );\n        setUploadProgress(percentCompleted);\n      };\n\n      if (isImage) {\n        result = await uploadImageDirectly(file, \"CHAT_MEDIA\", onUploadProgress);\n      } else if (isPdf) {\n        result = await uploadPdfDirectly(file, \"CHAT_MEDIA\", onUploadProgress);\n      } else if (isVideo) {\n        result = await uploadVideoDirectly(file, \"CHAT_MEDIA\", onUploadProgress);\n      }\n\n      if (result?.data?.imageURL) {\n        setMediaPreview({\n          file_url: result.data.imageURL,\n          file_type: isImage ? 'image' : isPdf ? 'pdf' : 'video'\n        });\n        toast.success('File uploaded successfully');\n      } else {\n        throw new Error(\"Upload failed\");\n      }\n    } catch (error) {\n      console.error(\"Upload error:\", error);\n      setMediaPreview({ file_url: null, file_type: null });\n      toast.error(error?.message || 'Failed to upload file');\n    } finally {\n      setLoading2(false);\n      setUploadProgress(0);\n    }\n  };\n\n  const handleSendMessage = useCallback(async () => {\n    setIsMenuShow(false)\n    if (!selectedContact?.connectionUserId) {\n      toast.error('No contact selected');\n      return;\n    }\n\n    if ((!messageInput.trim() && !mediaPreview.file_url) || sendingMessage) {\n      return;\n    }\n\n    setSendingMessage(true);\n    const messageText = messageInput.trim();\n\n    try {\n      const messagePayload = {\n        id: `temp_${Date.now()}_${Math.random()}_${currentUserId}`,\n        receiverId: selectedContact.connectionUserId,\n        receiver_id: selectedContact.connectionUserId,\n        sender_id: currentUserId,\n        message: messageText,\n        file_url: mediaPreview.file_url || null,\n        file_type: mediaPreview.file_url ? mediaPreview.file_type : \"text\",\n        timestamp: Date.now(),\n        createdAt: Date.now(),\n        isRead: false,\n        isPending: true,\n        shared_data: {\n          image_urls: [],\n          content: \"\",\n          tags: [],\n          share_id: null\n        },\n        // Reply data\n        isReplied: !!replyingTo,\n        chat_id: replyingTo?._id || null,\n        reply_to: replyingTo || null\n      };\n\n      const normalizedMessage = normalizeMessage(messagePayload);\n      setMessages(prev => [...prev, normalizedMessage]);\n\n      setMessageInput('');\n      setMediaPreview({ file_url: null, file_type: null });\n      setReplyingTo(null);\n\n      if (socket) {\n        socket.emit(\"send-chat-message\", messagePayload);\n        socket.on('message-delivered', (msg) => {\n          // console.log(\"after receipt msg :---->\", msg);\n\n          setMessages((prevMessages) => {\n            const updatedMessages = [...prevMessages];\n\n            const lastPendingIndex = updatedMessages.findIndex(\n              (m) => m.isPending === true\n            );\n\n            if (lastPendingIndex !== -1) {\n              updatedMessages[lastPendingIndex] = {\n                ...updatedMessages[lastPendingIndex],\n                _id: msg._id,\n              };\n            }\n\n            return updatedMessages;\n          });\n        });\n\n      } else {\n        throw new Error(\"Socket not available\");\n      }\n    } catch (error) {\n      console.error('Send message error:', error);\n      toast.error('Failed to send message');\n      setMessages(prev => prev.filter(msg => !msg.isPending));\n    } finally {\n      setSendingMessage(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [messageInput, selectedContact, socket, currentUserId, mediaPreview, sendingMessage, replyingTo]);\n\n  useEffect(() => {\n    if (!socket) return;\n\n    const handleIncomingMessage = (msg) => {\n      // console.log(\"Incoming message-----:\", msg);\n\n      if (!selectedContact) return;\n\n      const isForCurrentChat =\n        (msg.receiver_id === currentUserId && msg.sender_id === selectedContact.connectionUserId) ||\n        (msg.sender_id === currentUserId && msg.receiver_id === selectedContact.connectionUserId);\n\n      if (!isForCurrentChat) return;\n\n      const normalizedMessage = normalizeMessage(msg);\n\n      setMessages(prev => {\n        const filtered = prev.filter(m => {\n          if (m.isPending &&\n            m.message === msg.message &&\n            m.file_url === msg.file_url &&\n            m.sender_id === msg.sender_id) {\n            return false;\n          }\n          return true;\n        });\n\n        const exists = filtered.some(m => {\n          if (m._id === normalizedMessage._id && normalizedMessage._id !== normalizedMessage.id) {\n            return true;\n          }\n\n          if (normalizedMessage.file_type === 'shared-post' && m.file_type === 'shared-post') {\n            const timeDiff = Math.abs((m.timestamp || m.createdAt) - (normalizedMessage.timestamp || normalizedMessage.createdAt));\n            const sameContent = JSON.stringify(m.shared_data) === JSON.stringify(normalizedMessage.shared_data);\n            const sameSender = m.sender_id === normalizedMessage.sender_id;\n            const sameReceiver = m.receiver_id === normalizedMessage.receiver_id;\n\n            if (timeDiff < 1000 && sameContent && sameSender && sameReceiver) {\n              return true;\n            }\n          }\n\n          return false;\n        });\n\n        if (exists) {\n          // console.log(\"Message already exists, not adding duplicate\");\n          return filtered;\n        }\n\n        // console.log(\"Adding new message to chat\");\n        return [...filtered, normalizedMessage];\n      });\n\n      if (msg._id && msg.receiver_id === currentUserId) {\n        socket.emit(\"mark-as-read\", { chatId: msg._id });\n      }\n    };\n\n    socket.on(\"receive-message\", handleIncomingMessage);\n\n    return () => {\n      socket.off(\"receive-message\", handleIncomingMessage);\n    };\n  }, [socket, currentUserId, selectedContact, normalizeMessage]);\n\n  const handleBackClick = () => {\n    setShowChat(false);\n    setSelectedContact(null);\n    setMediaPreview({ file_url: null, file_type: null });\n    setReplyingTo(null); // Clear reply when going back\n  };\n\n  const filteredContacts = useMemo(() =>\n    contacts.filter(contact =>\n      contact.first_name?.toLowerCase().includes(searchKeyword.toLowerCase()) ||\n      contact.last_name?.toLowerCase().includes(searchKeyword.toLowerCase())\n    ),\n    [contacts, searchKeyword]\n  );\n\n  const handleShowOption = () => {\n    setIsMenuShow(!isMenuShow)\n  }\n\n  const handleUserAction = async (action) => {\n    setIsMenuShow(false)\n\n    if (action === 'BLOCK') {\n      const newStatus = selectedContact?.isBlocked ? \"unblock\" : \"block\"\n      let PAYLOAD = {\n        user_id: selectedContact?.connectionUserId,\n        status: newStatus\n      }\n      try {\n        const res = await dispatch(blockUnblockUser(PAYLOAD)).unwrap()\n        setSelectedContact(prev => ({\n          ...prev,\n          isBlocked: !prev.isBlocked,\n        }));\n        setContacts(prev => prev.map(contact =>\n          contact.connectionUserId === selectedContact.connectionUserId\n            ? { ...contact, isBlocked: false, isBlockedByYou: false }\n            : contact\n        ));\n        const result = await dispatch(messageChatUser()).unwrap();\n        setContacts(result?.data || []);\n        toast.info(res?.message)\n      } catch (error) {\n        toast.error(error)\n      }\n\n    } else if (action === \"CLEAR\") {\n      await dispatch(clearChats({ receiver_id: selectedContact?.connectionUserId })).unwrap()\n      setMessages([])\n      setReplyingTo(null); // Clear reply when clearing chat\n    } else {\n      toast.info(\"Ops something went wrong\")\n    }\n  }\n\n  const renderMessages = () => {\n    if (chatLoading) {\n      return (\n        <div className=\"flex justify-center items-center py-8\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\n        </div>\n      );\n    }\n\n    if (messages.length === 0) {\n      return (\n        <div className=\"flex flex-col items-center justify-center py-8\">\n          <div className=\"text-gray-500 text-sm\">No messages yet</div>\n          <div className=\"text-gray-400 text-xs mt-1\">Send a message to start the conversation</div>\n        </div>\n      );\n    }\n\n    return (\n      <>\n        <div className=\"text-center mb-4\">\n          <span className=\"text-xs text-gray-500 bg-white px-3 py-1 rounded-full shadow-sm\">\n            Today\n          </span>\n        </div>\n        {messages.map((msg) => (\n          <MessageBubble\n            key={msg.id || msg._id}\n            msg={msg}\n            isOwn={msg.sender_id === currentUserId}\n            onReply={handleReply}\n            messages={messages}\n            user_id={selectedContact}\n          />\n        ))}\n        <div ref={messagesEndRef} />\n      </>\n    );\n  };\n\n  const onDelete = async (data) => {\n\n    try {\n      const res = await dispatch(\n        createUserConnection({ connection_user_id: data?.connectionUserId })\n      ).unwrap();\n      if (res) toast.success(res?.message || \"User disconnected!\");\n      fetchUserList()\n\n    } catch (e) {\n      toast.error(\"Failed to disconnect\");\n    } finally {\n\n    }\n  }\n\n  if (isMobileView) {\n    return (\n      <div className=\"h-screen bg-white flex flex-col\">\n        {!showChat ? (\n          <>\n            <div className=\"p-4 border-b border-gray-200 sticky top-0 bg-white z-10\">\n              <h1 className=\"text-xl font-bold text-[#000000E6]\">Messages</h1>\n              <div className=\"relative mt-2\">\n                <BiSearch className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  value={searchKeyword}\n                  onChange={(e) => setSearchKeyword(e.target.value)}\n                  placeholder=\"Search conversations...\"\n                  className=\"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex-1 overflow-y-auto\">\n              {loading ? (\n                <div className=\"flex justify-center items-center py-8\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\n                </div>\n              ) : filteredContacts.length > 0 ? (\n                filteredContacts.map((contact) => (\n                  <ContactItem\n                    key={contact.connectionUserId}\n                    contact={contact}\n                    onClick={handleContactClick}\n                  />\n                ))\n              ) : (\n                <div className=\"flex flex-col items-center justify-center h-64\">\n                  <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4\">\n                    <BiSearch className=\"w-8 h-8 text-gray-400\" />\n                  </div>\n                  <p className=\"text-gray-500 text-center\">No conversations found</p>\n                </div>\n              )}\n            </div>\n          </>\n        ) : (\n          <div className=\"h-full flex flex-col\">\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200 bg-white sticky top-0 z-10\">\n              <div className=\"flex items-center space-x-3\">\n                <button onClick={handleBackClick} className=\"p-1\">\n                  <BiArrowBack className=\"w-5 h-5 text-gray-600\" />\n                </button>\n                <div className=\"w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center\">\n                  <span className=\"text-white text-sm font-semibold\">\n                    {(selectedContact?.first_name?.[0] || '?').toUpperCase()}\n                  </span>\n                </div>\n                <div>\n                  <h2 className=\"text-base font-semibold text-[#000000E6] capitalize\">\n                    {selectedContact?.first_name} {selectedContact?.last_name}\n                  </h2>\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-4\">\n                <button className=\"p-1 hover:bg-gray-100 rounded-full\">\n                  <FiMoreVertical className=\"w-5 h-5 text-gray-600\" onClick={() => handleShowOption()} />\n                </button>\n              </div>\n\n              {isMenuShow && (\n                <div className=\"absolute md:right-0 right-[40px] md:mt-20 mt-16 w-32 bg-white border border-gray-200 rounded-xl shadow-lg z-50 transform transition-all duration-200 ease-in-out\">\n                  <ul className=\"text-xs font-medium divide-y divide-gray-100\">\n                    <li className=\"px-4 py-1.5 cursor-pointer hover:bg-gray-50 hover:text-red-500 flex items-center gap-2 transition-colors duration-150\"\n                      onClick={() => handleUserAction(\"BLOCK\")}>\n                      {selectedContact?.isBlocked ? \"UnBlock\" : \"Block\"}\n                    </li>\n                    <li className=\"px-4 py-1.5 cursor-pointer hover:bg-gray-50 hover:text-blue-500 flex items-center gap-2 transition-colors duration-150\"\n                      onClick={() => handleUserAction(\"CLEAR\")}>\n                      Clear\n                    </li>\n                  </ul>\n                </div>\n              )}\n            </div>\n\n            <div className=\"flex-1 overflow-y-auto p-4 bg-gray-200\">\n              {renderMessages()}\n            </div>\n\n            <MessageInput\n              fileInputRef={fileInputRef}\n              handleFileChange={handleFileChange}\n              messageInput={messageInput}\n              setMessageInput={setMessageInput}\n              handleKeyPress={handleKeyPress}\n              sendingMessage={sendingMessage}\n              handleSendMessage={handleSendMessage}\n              mediaPreview={mediaPreview}\n              setMediaPreview={setMediaPreview}\n              uploadProgress={uploadProgress}\n              loading={loading}\n              contacts={selectedContact}\n              replyingTo={replyingTo}\n              cancelReply={cancelReply}\n            />\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-[92vh] bg-gray-50 p-4\">\n      <div className=\"bg-white h-full rounded-xl shadow-sm overflow-hidden\">\n        <div className=\"flex h-full\">\n          <div className=\"w-1/3 border-r border-gray-200 flex flex-col\">\n            <div className=\"p-4 border-b border-gray-200\">\n              <h1 className=\"text-xl font-bold text-[#000000E6]\">Messages</h1>\n              <div className=\"relative mt-3\">\n                <BiSearch className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  value={searchKeyword}\n                  onChange={(e) => setSearchKeyword(e.target.value)}\n                  placeholder=\"Search conversations...\"\n                  className=\"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex-1 overflow-y-auto custom-scrollbar\">\n              {loading ? (\n                <div className=\"flex justify-center items-center py-8\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500\"></div>\n                </div>\n              ) : filteredContacts.length > 0 ? (\n                filteredContacts.map((contact) => (\n                  <ContactItem\n                    key={contact.connectionUserId}\n                    contact={contact}\n                    isSelected={selectedContact?.connectionUserId === contact.connectionUserId}\n                    onClick={handleContactClick}\n                    onDelete={onDelete}\n                  />\n                ))\n              ) : (\n                <div className=\"flex flex-col items-center justify-center h-64\">\n                  <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4\">\n                    <BiSearch className=\"w-8 h-8 text-gray-400\" />\n                  </div>\n                  <p className=\"text-gray-500 text-center\">No conversations found</p>\n                </div>\n              )}\n            </div>\n          </div>\n\n          <div className=\"flex-1 flex flex-col\">\n            {selectedContact ? (\n              <>\n                <div className=\"flex items-center justify-between p-4 border-b border-gray-200 relative\">\n                  <div className=\"flex items-center space-x-3\">\n                    <div className=\"w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center\">\n                      {selectedContact?.profile_picture_url ? (\n                        <img src={selectedContact?.profile_picture_url} alt=\"user\" className=\"rounded-full\" />\n                      ) : (\n                        <span className=\"text-white text-sm font-semibold rounded-full\">\n                          <img src=\"/0684456b-aa2b-4631-86f7-93ceaf33303c.png\" alt=\"default logo\" className=\"rounded-full\" />\n                        </span>\n                      )}\n                    </div>\n                    <div>\n                      <h2 className=\"text-lg font-semibold text-[#000000E6] capitalize\">\n                        {selectedContact.first_name} {selectedContact.last_name}\n                      </h2>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-4\">\n                    <button className=\"p-1 hover:bg-gray-100 rounded-full\">\n                      <FiMoreVertical className=\"w-5 h-5 text-gray-600\" onClick={() => handleShowOption()} />\n                    </button>\n                  </div>\n\n                  {isMenuShow && (\n                    <div className=\"absolute md:right-0 right-[88px] md:mt-20 mt-16 w-32 bg-white border border-gray-200 rounded-xl shadow-lg z-50 transform transition-all duration-200 ease-in-out\">\n                      <ul className=\"text-xs font-medium divide-y divide-gray-100\">\n                        <li className=\"px-4 py-1.5 cursor-pointer hover:bg-gray-50 hover:text-red-500 flex items-center gap-2 transition-colors duration-150\"\n                          onClick={() => handleUserAction(\"BLOCK\")}>\n                          {selectedContact?.isBlocked ? \"UnBlock\" : \"Block\"}\n                        </li>\n                        <li className=\"px-4 py-1.5 cursor-pointer hover:bg-gray-50 hover:text-blue-500 flex items-center gap-2 transition-colors duration-150\"\n                          onClick={() => handleUserAction(\"CLEAR\")}>\n                          Clear\n                        </li>\n                      </ul>\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"flex-1 overflow-y-auto p-4 bg-gray-200\">\n                  {renderMessages()}\n                </div>\n\n                <MessageInput\n                  fileInputRef={fileInputRef}\n                  handleFileChange={handleFileChange}\n                  messageInput={messageInput}\n                  setMessageInput={setMessageInput}\n                  handleKeyPress={handleKeyPress}\n                  sendingMessage={sendingMessage}\n                  handleSendMessage={handleSendMessage}\n                  mediaPreview={mediaPreview}\n                  setMediaPreview={setMediaPreview}\n                  uploadProgress={uploadProgress}\n                  loading={loading2}\n                  contacts={selectedContact}\n                  replyingTo={replyingTo}\n                  cancelReply={cancelReply}\n                />\n              </>\n            ) : (\n              <div className=\"flex-1 flex items-center justify-center bg-gray-50\">\n                <div className=\"text-center p-6 max-w-md\">\n                  <div className=\"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-6\">\n                    <BiSearch className=\"w-10 h-10 text-blue-500\" />\n                  </div>\n                  <h3 className=\"text-xl font-semibold text-[#000000E6] mb-2\">Select a chat to start messaging</h3>\n                  <p className=\"text-sm text-gray-500 mb-4\">\n                    Choose from your existing conversations or start a new one\n                  </p>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":["MessageText","_ref","msg","isOwn","urlRegex","urls","message","match","renderPreview","url","embeddedUrl","isYoutube","includes","videoId","_url$split$","split","_url$split$2","concat","window","location","origin","_url$split$3","_url$split$4","error","console","getYouTubeEmbedUrl","isImage","test","isVideo","_jsx","href","target","rel","children","className","src","title","alt","controls","_jsxs","length","map","part","index","idx","_ref2","onReply","messages","user_id","pollVote","setPollVote","useState","navigate","useNavigate","getFileName","pop","handleDownload","filename","link","document","createElement","download","body","appendChild","click","removeChild","renderSharedPostMedia","sharedData","_sharedData$image_url","_sharedData$image_url2","video_url","image_urls","onClick","open","BiDownload","e","stopPropagation","preload","type","slice","handleCopyLink","useCallback","post","navigator","clipboard","writeText","toast","success","renderLinkPreview","thumbnail","URL","hostname","BiLink","renderPoll","_poll$options","poll","totalVotes","total_votes","options","option","percentage","Math","round","vote_count","hasVoted","style","width","text","voting_length","borderRadius","renderRepliedMessage","repliedMsg","isReplied","chat_id","reply_to","find","m","_id","id","repliedMessageOwn","sender_id","file_type","renderMessageContent","_job$job_title_detail","_job$industry","_sharedData$user_deta2","_sharedData$user_deta3","_sharedData$user_deta4","_sharedData$user_deta5","_sharedData$tags","interview","shared_data","job","job_details","company","skills","required_skills","BiShare","logo_url","name","job_title_details","job_type","job_location","work_location","pay_type","salary_range","industry","content","select_date","select_time","Date","toLocaleDateString","toLocaleTimeString","hour","minute","skill","meeting_url","file_url","height","border","post_type","JobPost","post_job_id","LinkedInCertificate","certificateName","_sharedData$post_cert","post_certificate_id","issueBy","_sharedData$post_cert2","issuing_organization","description","_sharedData$post_cert3","date","convertTimestampToDate","_sharedData$post_cert4","issue_date","record","username","_sharedData$user_deta","user_details","_msg$shared_data","_msg$shared_data2","sessionStorage","setItem","share_id","profile_picture_url","first_name","last_name","tags","tag","BiTag","FaReply","timestamp","createdAt","hour12","toLowerCase","replace","isRead","RiCheckDoubleLine","size","color","RiCheckLine","fileInputRef","handleFileChange","messageInput","setMessageInput","handleKeyPress","sendingMessage","handleSendMessage","mediaPreview","setMediaPreview","uploadProgress","loading","contacts","onUnblock","replyingTo","cancelReply","showEmojiPicker","setShowEmojiPicker","React","textAreaRef","clearMediaPreview","startsWith","revokeObjectURL","getFileIcon","fileType","BiImage","BiVideo","BiFile","_Fragment","isBlocked","BiBlock","isBlockedByYou","renderReplyPreview","connectionUserId","BiX","muted","charAt","toUpperCase","disabled","_fileInputRef$current","current","BiPaperclip","ref","onChange","accept","value","onKeyPress","placeholder","rows","minHeight","maxHeight","overflowY","onInput","min","scrollHeight","FaRegSmile","EmojiPicker","onEmojiClick","emojiData","cursorPos","selectionStart","textBefore","textAfter","newText","emoji","setTimeout","focus","selectionEnd","trim","BiSend","contact","isSelected","onDelete","menuOpen","setMenuOpen","menuRef","useRef","useEffect","handleClickOutside","event","contains","addEventListener","removeEventListener","onError","onerror","unread","latestMessageTime","prev","BiDotsHorizontal","latestMessage","Message","_profileData$getProfi","_profileData$getProfi2","_profileData$getProfi3","profileData","socket","isConnected","useParams","dispatch","useDispatch","setMessages","selectedContact","setSelectedContact","isMobileView","setIsMobileView","showChat","setShowChat","setContacts","setLoading","loading2","setLoading2","chatLoading","setChatLoading","setSendingMessage","searchKeyword","setSearchKeyword","setUploadProgress","messagesEndRef","isMenuShow","setIsMenuShow","setReplyingTo","currentUserId","getProfileData","data","defaultInterviewData","share_path","normalizeMessage","_msg$shared_data$imag","uniqueId","now","random","extension","getFileTypeFromUrl","replyData","replyChat","_objectSpread","undefined","isPending","fetchUserList","async","res","messageChatUser","unwrap","handleResize","innerWidth","targetContact","handleContactClick","scrollToBottom","_messagesEndRef$curre","scrollIntoView","behavior","key","shiftKey","preventDefault","handleReply","contactData","emit","userChatList","receiver_id","page","normalizedMessages","normalized","file","files","fileName","isPdf","previewUrl","createObjectURL","_result","_result$data","result","onUploadProgress","progressEvent","percentCompleted","loaded","total","uploadImageDirectly","uploadPdfDirectly","uploadVideoDirectly","imageURL","Error","messageText","messagePayload","receiverId","normalizedMessage","on","prevMessages","updatedMessages","lastPendingIndex","findIndex","filter","handleIncomingMessage","filtered","some","timeDiff","abs","sameContent","JSON","stringify","sameSender","sameReceiver","chatId","off","handleBackClick","filteredContacts","useMemo","_contact$first_name","_contact$last_name","handleShowOption","handleUserAction","action","newStatus","PAYLOAD","status","blockUnblockUser","info","clearChats","renderMessages","MessageBubble","createUserConnection","connection_user_id","_selectedContact$firs","BiArrowBack","FiMoreVertical","MessageInput","BiSearch","ContactItem"],"sourceRoot":""}