"use strict";(self.webpackChunkcomfygen_react_new_base_folder=self.webpackChunkcomfygen_react_new_base_folder||[]).push([[608],{9608:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var l=t(5043),n=t(9981),a=t(3003),o=t(9461),i=t(9804),r=t(9698),d=t(5051),c=t(6328),u=t(579);const m=()=>{var e,s,t,m,x,p,h,g,v;const{id:y}=(0,n.g)(),b=(0,a.wA)(),f=(0,a.d4)(e=>e.user),j=(0,n.Zp)(),N=(null===f||void 0===f||null===(e=f.jobScreeningQuestionData)||void 0===e||null===(s=e.data)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.screening_questions)||[],_=null===f||void 0===f||null===(m=f.jobScreeningQuestionData)||void 0===m||null===(x=m.data)||void 0===x?void 0:x.data;console.log("\ud83e\udde9 Job Data fetched from backend:",_);const[w,q]=(0,l.useState)(!1);(0,l.useEffect)(()=>{y&&b((0,o.eO)({job_id:y}))},[b,y]),(0,l.useEffect)(()=>{console.log("this is the jobdata",null===_||void 0===_?void 0:_.isApplied),!0===(null===_||void 0===_?void 0:_.isApplied)&&(c.oR.warning("You have already applied for this job."),j("/user/opportunitiess"))},[null===_||void 0===_?void 0:_.isApplied,j]);const[k,S]=(0,l.useState)(0),[C,T]=(0,l.useState)([]),[Y,E]=(0,l.useState)(!1),[A,D]=(0,l.useState)(0),[I,Q]=(0,l.useState)(!0),[R,O]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(N.length>0){var e;T(N.map(e=>({question:e.question,question_type:e.question_type,options:e.options||[],selected_options:[]})));const s=60*((null===(e=N[0])||void 0===e?void 0:e.time_limit)||0);D(s),Q(!0)}},[N]),(0,l.useEffect)(()=>{if(!I||A<=0)return;const e=setInterval(()=>{D(s=>s<=1?(clearInterval(e),G(),0):s-1)},1e3);return()=>clearInterval(e)},[A,I,k,N]);const G=()=>{k<N.length-1?setTimeout(()=>{var e;S(e=>e+1);const s=60*((null===(e=N[k+1])||void 0===e?void 0:e.time_limit)||0);D(s),Q(!0)},1e3):(O(!0),K(!0))},K=async function(){for(let l=0;l<C.length;l++){var e;const s=C[l];if(0===s.selected_options.length||"theoretical"===s.question_type&&(null===(e=s.selected_options[0])||void 0===e||!e.trim()))return c.oR.error("Please answer question ".concat(l+1," before submitting.")),void S(l)}const s={job_id:_._id,answers:C.map(e=>({question:e.question,question_type:e.question_type,options:e.options,selected_options:e.selected_options}))};try{q(!0);const e=await b((0,o.cf)(s)).unwrap();c.oR.success((null===e||void 0===e?void 0:e.message)||"Your answers have been submitted successfully!"),j("/user/opportunitiess")}catch(t){c.oR.error(t)}finally{q(!1)}};if(0===N.length)return(0,u.jsx)("div",{className:"min-h-screen  flex items-center justify-center p-4",children:(0,u.jsxs)("div",{className:"glassy-card rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,u.jsx)("div",{className:"animate-spin w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full mx-auto mb-4"}),(0,u.jsx)("p",{className:"text-lg glassy-text-secondary",children:"Loading screening questions..."})]})});if(Y)return(0,u.jsx)("div",{className:"min-h-screen   flex items-center justify-center p-4",children:(0,u.jsxs)("div",{className:"glassy-card rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,u.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,u.jsx)(i.qGT,{className:"w-12 h-12 text-green-600"})}),(0,u.jsx)("h1",{className:"text-2xl font-bold glassy-text-primary mb-4",children:R?"Time Completed!":"Thank You!"}),(0,u.jsx)("p",{className:"glassy-text-secondary mb-6",children:R?"Your screening answers have been automatically submitted due to time completion.":"Your screening answers have been successfully submitted."}),(0,u.jsx)("button",{className:"w-full glassy-button hover:bg-blue-700 glassy-text-primary font-semibold py-3 px-6 rounded-lg transition-colors",onClick:()=>j("/user/opportunitiess/"),children:"Back to Your Opportunities"})]})});const L=N[k],M=C[k]||{};return(0,u.jsx)("div",{className:"min-h-screen   p-4",children:(0,u.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,u.jsx)("div",{className:"glassy-card rounded-2xl shadow-lg mb-6 p-6",children:(0,u.jsxs)("div",{className:"flex items-start gap-4",children:[(0,u.jsx)(n.N_,{to:"/user/view-details/companies/".concat(null===_||void 0===_?void 0:_.company_id),children:(0,u.jsx)("img",{src:null===_||void 0===_||null===(p=_.company_id)||void 0===p?void 0:p.logo_url,alt:"Company Logo",className:"w-16 h-16 rounded-lg object-cover border",onError:e=>{e.currentTarget.onerror=null,e.currentTarget.src="https://res.cloudinary.com/dsnqduetr/image/upload/v1761043320/post-media/companylogo.png"}})}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,u.jsx)(n.N_,{to:"/user/view-details/companies/".concat(null===_||void 0===_||null===(h=_.company_id)||void 0===h?void 0:h._id),children:(0,u.jsx)("h1",{className:"text-xl font-bold glassy-text-primary",children:_.job_title.name})}),(0,u.jsx)("span",{className:"px-3 py-1 glassy-card text-blue-800 text-sm font-medium rounded-full",children:_.job_type})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2 glassy-text-secondary mb-3",children:[(0,u.jsx)(r.MbK,{className:"w-4 h-4"}),(0,u.jsx)("span",{className:"font-medium",children:_.company_id.name}),(0,u.jsx)("span",{className:"glassy-text-secondary",children:"\u2022"}),(0,u.jsx)("span",{children:_.industry_id.name})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 text-sm glassy-text-secondary",children:[(0,u.jsx)(i.$D5,{className:"w-4 h-4"}),(0,u.jsxs)("span",{children:[_.work_location.city.name,","," ",_.work_location.state.name]})]}),(0,u.jsx)("div",{className:"flex items-center gap-2 text-sm glassy-text-secondary",children:(0,u.jsx)("span",{children:(z=_.salary_range,"\u20b9".concat(z.split("-").join(" - ")))})})]})]})]})}),(0,u.jsxs)("div",{className:"glassy-card rounded-2xl shadow-lg p-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-lg font-semibold glassy-text-primary",children:"Screening Questions"}),(0,u.jsxs)("p",{className:"text-sm glassy-text-secondary",children:["Question ",k+1," of ",N.length]})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg ".concat(A<=30?"glassy-card text-red-700":"glassy-card text-blue-700"),children:[(0,u.jsx)(d.IeK,{className:"w-4 h-4"}),(0,u.jsx)("span",{className:"font-mono font-semibold",children:(e=>{const s=Math.floor(e/60),t=e%60;return"".concat(s.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))})(A)})]})]}),(0,u.jsxs)("div",{className:"mb-8",children:[(0,u.jsx)("h3",{className:"text-lg font-medium glassy-text-primary mb-6",children:L.question}),"single_choice"===L.question_type&&(0,u.jsx)("div",{className:"space-y-3",children:L.options.map((e,s)=>{var t,l;return(0,u.jsx)("div",{className:"p-4 rounded-lg border-2 cursor-pointer transition-all hover:glassy-card hover:glassy-card ".concat(null!==(t=M.selected_options)&&void 0!==t&&t.includes(e)?"border-blue-500 glassy-card":"border-gray-200"),onClick:()=>(e=>{const s=[...C];s[k]&&(s[k].selected_options=[e],T(s))})(e),children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"radio",className:"w-5 h-5 text-blue-600 border-gray-300 focus:ring-blue-500",checked:(null===(l=M.selected_options)||void 0===l?void 0:l.includes(e))||!1,onChange:()=>{}}),(0,u.jsx)("label",{className:"ml-3 glassy-text-primary cursor-pointer",children:e})]})},s)})}),"multi_choice"===L.question_type&&(0,u.jsx)("div",{className:"space-y-3",children:L.options.map((e,s)=>{var t,l;return(0,u.jsx)("div",{className:"p-4 rounded-lg border-2 cursor-pointer transition-all hover:border-blue-300 hover:glassy-card ".concat(null!==(t=M.selected_options)&&void 0!==t&&t.includes(e)?"border-blue-500 glassy-card":"border-gray-200"),onClick:()=>(e=>{const s=[...C];if(s[k]){const t=s[k].selected_options;t.includes(e)?s[k].selected_options=t.filter(s=>s!==e):s[k].selected_options=[...t,e],T(s)}})(e),children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:(null===(l=M.selected_options)||void 0===l?void 0:l.includes(e))||!1,onChange:()=>{}}),(0,u.jsx)("label",{className:"ml-3 glassy-text-primary cursor-pointer",children:e})]})},s)})}),"theoretical"===L.question_type&&(0,u.jsxs)("div",{children:[(0,u.jsx)("textarea",{className:"w-full h-40 p-4 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none resize-none",placeholder:"Type your detailed answer here...",value:(null===(g=M.selected_options)||void 0===g?void 0:g[0])||"",onChange:e=>{const s=[...C],t=e.target.value;s[k]&&(s[k].selected_options=[t],T(s))}}),(0,u.jsxs)("div",{className:"mt-2 text-sm glassy-text-secondary",children:["Character count:"," ",((null===(v=M.selected_options)||void 0===v?void 0:v[0])||"").length]})]})]}),(0,u.jsx)("div",{className:"flex justify-end",children:k<N.length-1?(0,u.jsxs)("button",{onClick:()=>{if(k<N.length-1){var e;Q(!1),S(k+1);const s=60*((null===(e=N[k+1])||void 0===e?void 0:e.time_limit)||0);D(s),Q(!0)}},className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 glassy-text-primary font-semibold rounded-lg transition-all",children:["Next",(0,u.jsx)(i.trk,{className:"w-4 h-4"})]}):(0,u.jsxs)("button",{onClick:()=>K(!1),disabled:w,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 glassy-text-primary font-semibold rounded-lg transition-all",children:[(0,u.jsx)(i.qGT,{className:"w-4 h-4"}),w?"Submitting...":"Submit"]})}),A<=30&&A>0&&(0,u.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,u.jsxs)("p",{className:"text-red-700 text-sm font-medium",children:["\u26a0\ufe0f Warning: Only ",A," seconds remaining for this question!"]})})]})]})});var z}}}]);
//# sourceMappingURL=608.3a279b04.chunk.js.map