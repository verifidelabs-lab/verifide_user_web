"use strict";(self.webpackChunkcomfygen_react_new_base_folder=self.webpackChunkcomfygen_react_new_base_folder||[]).push([[736],{3736:(e,s,t)=>{t.r(s),t.d(s,{default:()=>g});var a=t(9379),r=t(5043),l=t(9804),i=t(1462),n=t(5051),o=t(3003),c=t(9461),d=t(9981),x=t(423),m=t(579);const u=e=>{let{handleClick:s,isToggle:t}=e;return(0,m.jsx)("div",{className:"flex",children:(0,m.jsxs)("label",{className:"relative inline-flex items-center w-11 h-6",children:[(0,m.jsx)("input",{type:"checkbox",className:"sr-only peer",checked:t,readOnly:!0,onClick:s}),(0,m.jsx)("div",{className:"w-9 h-5 rounded-full bg-[#E9E9EA] \n            peer-checked:bg-[#2563EB] transition-all duration-300 cursor-pointer"}),(0,m.jsx)("div",{className:"absolute top-[4px] left-[1px] w-4 h-4 rounded-full flex items-center justify-center \n            transition-all duration-300 transform ".concat(t?"translate-x-full bg-white text-white":"bg-white"),children:t&&(0,m.jsx)(x.J1G,{className:"text-md",size:24})})]})})},h={"Profile Completion":"profile-completion","Skill Updates":"skill-updates","Identity Verification":"identity-verification","Education Verification":"education-verification","Employment Verification":"employment-verification","Project Verification":"project-verification","Certificate Verification":"certificate-verification","Course Progress":"course-progress","Assessments Progress":"assessments-progress"},f=e=>{var s;let{notification:t,onMarkAsRead:a,navigate:r}=e;const{Icon:o,color:c}=(e=>{switch(e){case"profile-completion":case"identity-verification":case"education-verification":case"employment-verification":case"project-verification":case"certificate-verification":return{Icon:n.IeK,color:"bg-blue-500"};case"skill-updates":case"course-progress":case"assessments-progress":return{Icon:l.Jk1,color:"bg-orange-500"};default:return{Icon:i.U68,color:"bg-purple-500"}}})(t.type);return(0,m.jsxs)("div",{className:"flex items-start justify-between p-4 border-b border-gray-100 ".concat(t.isRead?"bg-white":"bg-blue-50"),children:[(0,m.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,m.jsx)("div",{className:"p-2 rounded-full ".concat(c),children:(0,m.jsx)(o,{className:"w-4 h-4 text-white"})}),(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)("h3",{className:"text-sm font-medium text-[#000000E6] mb-1",children:t.title}),(0,m.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:t.message}),(0,m.jsxs)("div",{className:"flex items-center text-xs text-gray-400",children:[(0,m.jsx)(n.IeK,{className:"w-3 h-3 mr-1"}),(d=t.createdAt,new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]})]})]}),(0,m.jsx)("button",{onClick:()=>{t.isRead?null!==t&&void 0!==t&&t.redirectPath&&r(null===t||void 0===t?void 0:t.redirectPath):a(t._id,null===t||void 0===t?void 0:t.redirectPath)},className:"px-3 py-1 text-[#2563EB] bg-[#2563EB]/10 text-sm font-semibold rounded hover:opacity-80 ".concat(t.isRead?"opacity-50 cursor-default":""),children:(null===(s=t.meta)||void 0===s?void 0:s.buttonText)||"View"})]});var d},p=e=>{let{onFilterChange:s,onSearch:t,onMarkAllRead:a,unreadCount:i,filterValue:n,isToggle:o,setIsToggle:c}=e;const[x,f]=(0,r.useState)(""),[p,g]=(0,r.useState)(!1),b=(0,d.Zp)(),j=e=>{e.preventDefault(),t(x)};return(0,m.jsxs)("div",{className:"bg-white border-b border-gray-200 px-4 md:px-6 py-2 md:py-4",children:[(0,m.jsxs)("div",{className:"hidden md:flex flex-col",children:[(0,m.jsxs)("div",{className:"flex flex-row items-center justify-between mb-4",children:[(0,m.jsxs)("nav",{className:"flex items-center space-x-2 text-sm",children:[(0,m.jsx)("span",{className:"text-blue-600 hover:text-blue-800 cursor-pointer",onClick:()=>b("/user/feed"),children:"Home"}),(0,m.jsx)("span",{className:"text-gray-400",children:"\u203a"}),(0,m.jsx)("span",{className:"text-gray-600",children:"Notifications"})]}),(0,m.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,m.jsxs)("form",{onSubmit:j,className:"relative",children:[(0,m.jsx)(l.iyI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,m.jsx)("input",{type:"text",placeholder:"Search...",value:x,onChange:e=>f(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsxs)("button",{type:"button",className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50",onClick:()=>g(!p),children:[(0,m.jsx)(l.Jw7,{className:"w-4 h-4"}),(0,m.jsx)("span",{children:"Filter"})]}),p&&(0,m.jsx)("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg z-10 border border-gray-200",children:(0,m.jsx)("div",{className:"p-2",children:(0,m.jsxs)("select",{value:n,onChange:e=>{s(e.target.value),g(!1)},className:"w-full p-2 border border-gray-300 rounded-md text-sm",children:[(0,m.jsx)("option",{value:"",children:"All Notifications"}),Object.entries(h).map(e=>{let[s,t]=e;return(0,m.jsx)("option",{value:t,children:s},t)})]})})})]}),(0,m.jsx)("button",{onClick:a,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700",children:"Mark All as Read"})]})]}),(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsx)("h1",{className:"text-xl font-semibold text-[#000000E6]",children:"All Notifications"}),(0,m.jsxs)("span",{className:"text-sm text-gray-500 flex",children:[(0,m.jsx)(u,{handleClick:()=>c(e=>!e),isToggle:o}),"Unread"]})]})]}),(0,m.jsxs)("div",{className:"md:hidden flex flex-col gap-3",children:[(0,m.jsxs)("nav",{className:"flex items-center space-x-2 text-sm mb-2",children:[(0,m.jsx)("span",{className:"text-blue-600 hover:text-blue-800 cursor-pointer",onClick:()=>b("/user/feed"),children:"Home"}),(0,m.jsx)("span",{className:"text-gray-400",children:"\u203a"}),(0,m.jsx)("span",{className:"text-gray-600",children:"Notifications"})]}),(0,m.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,m.jsxs)("form",{onSubmit:j,className:"relative w-full",children:[(0,m.jsx)(l.iyI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,m.jsx)("input",{type:"text",placeholder:"Search...",value:x,onChange:e=>f(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md text-sm w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,m.jsxs)("div",{className:"relative w-full",children:[(0,m.jsxs)("button",{type:"button",className:"w-full flex items-center justify-center space-x-2 px-3 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50",onClick:()=>g(!p),children:[(0,m.jsx)(l.Jw7,{className:"w-4 h-4"}),(0,m.jsx)("span",{children:"Filter"})]}),p&&(0,m.jsx)("div",{className:"absolute right-0 mt-2 w-full bg-white rounded-md shadow-lg z-10 border border-gray-200",children:(0,m.jsx)("div",{className:"p-2",children:(0,m.jsxs)("select",{value:n,onChange:e=>{s(e.target.value),g(!1)},className:"w-full p-2 border border-gray-300 rounded-md text-sm",children:[(0,m.jsx)("option",{value:"",children:"All Notifications"}),Object.entries(h).map(e=>{let[s,t]=e;return(0,m.jsx)("option",{value:t,children:s},t)})]})})})]})]}),(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mt-2",children:[(0,m.jsx)("h1",{className:"text-lg font-semibold text-[#000000E6]",children:"All Notifications"}),(0,m.jsxs)("div",{className:"flex justify-between w-full sm:w-auto items-center gap-2",children:[(0,m.jsxs)("span",{className:"text-sm text-gray-500 flex items-center",children:[(0,m.jsx)(u,{handleClick:()=>c(e=>!e),isToggle:o}),"Unread"]}),(0,m.jsx)("button",{onClick:a,className:"px-3 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 w-full sm:w-auto",children:"Mark All as Read"})]})]})]})]})},g=()=>{var e,s;const t=(0,d.Zp)(),l=(0,o.wA)(),i=(0,o.d4)(e=>e.user),n=null===i||void 0===i||null===(e=i.notificationsData)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.data,[x,u]=(0,r.useState)(!0),[h,g]=(0,r.useState)(1),[b]=(0,r.useState)(10),[j,v]=(0,r.useState)(""),[y,N]=(0,r.useState)(""),[w,k]=(0,r.useState)(!1),C=(null===n||void 0===n?void 0:n.list)||[],S=C.filter(e=>!e.isRead).length,A=async()=>{u(!0);try{const e=(0,a.A)((0,a.A)({},j&&{type:j}),y&&{title:{$regex:y,$options:"i"}});w&&(e.isRead=!w);const s={page:h,size:b,query:JSON.stringify(e)};await l((0,c.ne)(s))}catch(e){console.error("Error fetching notifications:",e)}finally{u(!1)}},E=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{await l((0,c.Mo)({_id:e})),s&&t(s),A()}catch(a){console.error("Error marking notification as read:",a)}};(0,r.useEffect)(()=>{A()},[h,j,y,w]);return(0,m.jsxs)("div",{className:"min-h-screen p-3",children:[(0,m.jsx)(p,{onFilterChange:e=>{v(e),g(1)},onSearch:e=>{N(e),g(1)},onMarkAllRead:async()=>{try{await l((0,c.zV)()),A()}catch(e){console.error("Error marking all notifications as read:",e)}},unreadCount:S,filterValue:j,isToggle:w,setIsToggle:k}),(0,m.jsxs)("div",{className:"w-full mx-auto shadow-sm",children:[x?(0,m.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,m.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):0===C.length?(0,m.jsx)("div",{className:"text-center p-8 text-gray-500",children:"No notifications found"}):C.map(e=>(0,m.jsx)(f,{notification:e,onMarkAsRead:E,navigate:t},e._id)),!x&&(null===n||void 0===n?void 0:n.total)>b&&(0,m.jsxs)("div",{className:"flex justify-between items-center p-4 bg-white border-t border-gray-100",children:[(0,m.jsx)("button",{onClick:()=>g(e=>Math.max(1,e-1)),disabled:1===h,className:"px-4 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50",children:"Previous"}),(0,m.jsxs)("span",{className:"text-sm text-gray-500",children:["Page ",h," of ",Math.ceil(n.total/b)]}),(0,m.jsx)("button",{onClick:()=>g(e=>e+1),disabled:h>=Math.ceil(n.total/b),className:"px-4 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50",children:"Next"})]})]})]})}}}]);
//# sourceMappingURL=736.294af21d.chunk.js.map