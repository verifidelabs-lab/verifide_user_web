"use strict";(self.webpackChunkcomfygen_react_new_base_folder=self.webpackChunkcomfygen_react_new_base_folder||[]).push([[307],{1307:(e,t,i)=>{i.r(t),i.d(t,{default:()=>C});var s=i(9379),o=i(5043),l=i(9804),a=i(8214),n=i(3974),d=i(3003),r=i(4272),c=i(152),u=i(6328),_=i(5413),p=i(9981),v=i(10),m=i(8059),y=i(8454),h=i(9461),b=i(693),g=i(8155),x=i(9442),j=i(3537),f=i(130),q=i(579);const A=e=>{var t;let{allCompanies:i,allIndustry:o,formData:l,setFormData:n,handleInputChange:d,handleSelectChange:r,errors:c,setAddModalState:u,countryList:_,handleLocationSelectChange:p,getNestedValue:v,stateList:m,citiesList:y,setInputField:h,isCreatableIndustry:b,getSelectedOption:A}=e;return console.log(null===l||void 0===l?void 0:l.start_date),(0,q.jsxs)("div",{className:"space-y-8",children:[(0,q.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 space-y-4",children:[(0,q.jsx)("h2",{className:"text-lg font-semibold text-gray-800 capitalize border-b pb-2",children:"Company & Industry"}),(0,q.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,q.jsx)("div",{className:"col-span-2",children:(0,q.jsx)(j.A,{options:i||[],label:"Company Name",className:"w-full",placeholder:"Select Company",onChange:e=>r("company_id",e),selectedOption:i.find(e=>e.value===l.company_id),required:!0,error:null===c||void 0===c?void 0:c.company_id,onCreateOption:(e,t)=>{console.log("this is the inputalue and field",t,e),u({isOpen:!0,type:"companies",field:t}),h(t=>(0,s.A)((0,s.A)({},t),{},{name:e}))},isClearable:!0,isCreatedByUser:!0,isDisabled:l.company_id})}),(0,q.jsxs)("div",{className:"col-span-2 grid grid-cols-2 gap-3",children:[(0,q.jsx)(j.A,{label:"Industry Name",name:"industry_id",placeholder:"Select Industry",options:o,selectedOption:A(o,null===l||void 0===l?void 0:l.industry_id),onChange:e=>r("industry_id",e),error:c.industry_id,className:"w-full h-10",required:!0,onCreateOption:(e,t)=>{u({isOpen:!0,type:"industries",field:t}),h(t=>(0,s.A)((0,s.A)({},t),{},{name:e}))},isClearable:!0,isDisabled:!(null!==l&&void 0!==l&&l.company_id),disabledTooltip:"Please select first Company",isCreatedByUser:b}),(0,q.jsx)(a.A,{type:"number",value:null===l||void 0===l?void 0:l.current_openings,label:"Available Opening",onChange:e=>d("current_openings",e.target.value),name:"current_openings",className:"w-full h-10 border rounded-lg px-4",placeholder:"Enter number of available posts ",required:!0,error:null===c||void 0===c?void 0:c.current_openings})]})]})]}),(0,q.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 space-y-4",children:[(0,q.jsx)("h2",{className:"text-lg font-semibold text-gray-800 capitalize border-b pb-2",children:"Job Details"}),(0,q.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,q.jsx)(j.A,{label:"Job Type",options:(null===f||void 0===f?void 0:f.Job_Type_List)||[],placeholder:"Select Job Type",onChange:e=>r("job_type",e),selectedOption:null===f||void 0===f?void 0:f.Job_Type_List.find(e=>e.value===l.job_type),required:!0,error:null===c||void 0===c?void 0:c.job_type}),(0,q.jsx)(j.A,{label:"Location Type",options:(null===f||void 0===f?void 0:f.Job_Location_List)||[],placeholder:"Select Location",onChange:e=>r("job_location",e),selectedOption:null===f||void 0===f?void 0:f.Job_Location_List.find(e=>e.value===l.job_location),required:!0,error:null===c||void 0===c?void 0:c.job_location}),(0,q.jsx)(j.A,{label:"Pay Type",options:(null===f||void 0===f?void 0:f.Job_Pay_Type_List)||[],placeholder:"Select Pay Type",onChange:e=>r("pay_type",e),selectedOption:null===f||void 0===f?void 0:f.Job_Pay_Type_List.find(e=>e.value===l.pay_type),required:!0,error:null===c||void 0===c?void 0:c.pay_type})]}),(0,q.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[!("internship"===l.job_type||"unpaid"===l.pay_type)&&(0,q.jsx)(a.A,{label:"Salary Range",placeholder:"e.g. \u20b930,000 - \u20b950,000",value:l.salary_range,onChange:e=>d("salary_range",e.target.value),required:!0,error:null===c||void 0===c?void 0:c.salary_range,className:"h-10 w-full"}),(0,q.jsx)(x.A,{label:"Start Date",value:null===l||void 0===l?void 0:l.start_date,onChange:e=>d("start_date",e.target.value),required:!0,error:null===c||void 0===c?void 0:c.start_date,allowPastDate:!1}),(0,q.jsx)(x.A,{label:"End Date",value:null===l||void 0===l?void 0:l.end_date,onChange:e=>d("end_date",e.target.value),required:!0,error:null===c||void 0===c?void 0:c.end_date,allowPastDate:!1,minDateOverride:null===l||void 0===l?void 0:l.start_date})]})]}),(0,q.jsxs)("div",{className:"bg-white p-4 rounded-2xl shadow-sm border border-gray-100 space-y-4",children:[(0,q.jsx)("h2",{className:"text-lg font-semibold text-gray-800 capitalize border-b pb-2",children:"Location"}),(0,q.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,q.jsx)(g.A,{label:"Country",selectedOption:(null===_||void 0===_?void 0:_.find(e=>e.label===v(l,"address.country.name")))||null,onChange:e=>p("country",e),options:_||[],required:!0,isClearable:!1,error:null===c||void 0===c?void 0:c.country}),(0,q.jsx)(g.A,{label:"State",selectedOption:(null===m||void 0===m?void 0:m.find(e=>e.label===v(l,"address.state.name")))||null,onChange:e=>p("state",e),options:m||[],required:!0,isClearable:!1,error:null===c||void 0===c?void 0:c.state}),(0,q.jsx)(g.A,{label:"City",selectedOption:(null===y||void 0===y?void 0:y.find(e=>(null===e||void 0===e?void 0:e.label)===v(l,"address.city.name")))||null,onChange:e=>p("city",e),options:y||[],required:!0,isClearable:!1,error:null===c||void 0===c?void 0:c.city}),(0,q.jsx)(a.A,{label:"Pin Code",placeholder:"e.g. 696969",value:null===l||void 0===l||null===(t=l.address)||void 0===t?void 0:t.pin_code,className:"w-full h-10",onChange:e=>n(t=>(0,s.A)((0,s.A)({},t),{},{address:(0,s.A)((0,s.A)({},t.address),{},{pin_code:e.target.value})})),required:!0,error:null===c||void 0===c?void 0:c.pin_code})]})]})]})},k=e=>{let{handleSelectChange:t,allProfileRoles:i,allSkills:o,formData:a,errors:n,setAddModalState:d,handleInputChange:r,selectedSkills:c,removeSkill:u,handleSkillSelect:_,isCreatableIndustry:p,getSelectedOption:v,setInputField:m}=e;return(0,q.jsx)("div",{children:(0,q.jsxs)("div",{className:"space-y-6",children:[(0,q.jsx)(j.A,{label:"Job Title",name:"job_title",placeholder:"Select Position",options:i,selectedOption:v(i,null===a||void 0===a?void 0:a.job_title),onChange:e=>t("job_title",e),error:n.job_title,className:"w-full h-10",required:!0,onCreateOption:(e,t)=>{d({isOpen:!0,type:"profile-roles",field:t}),m(t=>(0,s.A)((0,s.A)({},t),{},{name:e}))},isClearable:!0,isDisabled:!(null!==a&&void 0!==a&&a.industry_id),disabledTooltip:"Please select first Industry",isCreatedByUser:!!p}),(0,q.jsxs)("div",{children:[(0,q.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Job Description ",(0,q.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,q.jsx)("textarea",{value:a.job_description,onChange:e=>r("job_description",e.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Describe the job role and what you're looking for in a candidate..."}),(0,q.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Tell people about this position and what you're looking for. For example, what they'll be doing on a typical day, why they should be interested, and requirements you may have."}),(0,q.jsx)("p",{className:"text-xs text-red-600",children:null===n||void 0===n?void 0:n.job_description})]}),(0,q.jsxs)("div",{children:[(0,q.jsx)(j.A,{label:"Skills Required ",options:o||[],name:"required_skills",className:"w-full h-10",placeholder:"Select skills",onChange:_,required:!0,error:null===n||void 0===n?void 0:n.required_skills,selectedOption:c,onCreateOption:(e,t)=>{console.log("this is the inputalue and field",t,e),d({isOpen:!0,type:"skill",field:t}),m(t=>(0,s.A)((0,s.A)({},t),{},{name:e}))},isClearable:!0,isCreatedByUser:!0}),(0,q.jsx)("div",{className:"flex flex-wrap gap-2 mt-3",children:c.map((e,t)=>(0,q.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800",children:[e.label,(0,q.jsx)("button",{onClick:()=>u(e.value),className:"ml-2 hover:text-blue-600",children:(0,q.jsx)(l.Gsv,{className:"h-4 w-4"})})]},t))})]})]})})};i(5167),i(9796);const C=()=>{var e,t,i,g,x,j,f,C,N,w,S,O,D,E,I,L,P,J,T;const{id:R}=(0,p.g)(),F=(0,d.wA)(),M=(0,p.Zp)(),B=(0,d.d4)(e=>{var t,i,s;return(null===(t=e.companyAuth)||void 0===t||null===(i=t.companiesProfileData)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.data)||{}});console.log("this is te company prifie data",B),console.log("This is the company");const K=(0,d.d4)(e=>e.work),Q=(0,d.d4)(e=>e.global),G=(0,d.d4)(e=>e.global),V=(0,r.eu)((null===K||void 0===K||null===(e=K.getAllCompaniesData)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data)||[]),z=(0,r.Kj)((null===K||void 0===K||null===(i=K.getAllIndustryData)||void 0===i||null===(g=i.data)||void 0===g?void 0:g.data)||[]),U=(0,r.Kj)((null===Q||void 0===Q||null===(x=Q.masterSkillsData)||void 0===x||null===(j=x.data)||void 0===j||null===(f=j.data)||void 0===f?void 0:f.list)||[]),W=(0,r.Kj)((null===K||void 0===K||null===(C=K.getAllProfileRoleData)||void 0===C||null===(N=C.data)||void 0===N?void 0:N.data)||[]);console.log("this is the prifiles roles",W);const X=(0,r.Kj)((null===G||void 0===G||null===(w=G.countriesData)||void 0===w||null===(S=w.data)||void 0===S?void 0:S.data)||[]),Z=(0,r.Kj)((null===G||void 0===G||null===(O=G.stateData)||void 0===O||null===(D=O.data)||void 0===D?void 0:D.data)||[]),$=(0,r.Kj)((null===G||void 0===G||null===(E=G.citiesData)||void 0===E||null===(I=E.data)||void 0===I?void 0:I.data)||[]),[H,Y]=(0,o.useState)(1),[ee,te]=(0,o.useState)(!1),[ie,se]=(0,o.useState)(!1),[oe,le]=(0,o.useState)((0,v.Ri)("ACCESS_MODE")),[ae,ne]=(0,o.useState)([]),[de,re]=(0,o.useState)([{question:"",question_type:"single_choice",options:[],option_format:"alphabetically",correct_options:[],verification_type:"auto",time_limit:2}]),[ce,ue]=(0,o.useState)({}),[_e,pe]=(0,o.useState)({name:"",logo_url:""}),[ve,me]=(0,o.useState)({isOpen:!1,type:"",field:""});console.log("this is the addModalState",ve);const[ye,he]=(0,o.useState)({company_id:B._id||"",industry_id:"",job_type:"",job_location:"",pay_type:"",salary_range:"",job_title:"",job_description:"",start_date:"",end_date:"",current_openings:"",required_skills:[],address:{country:{name:"",dial_code:"",short_name:"",emoji:"\ud83c\uddee"},state:{name:"",code:""},city:{name:""},pin_code:""},screening_questions:[],isDisable:!1,isShareAsPost:!1});(0,o.useEffect)(()=>{he((0,s.A)((0,s.A)({},ye),{},{company_id:null===B||void 0===B?void 0:B._id}))},[null===B||void 0===B?void 0:B._id]);const[be,ge]=(0,o.useState)(!0),{handleLocationSelectChange:xe}=(0,b.I)(he,ye,ue);(0,o.useEffect)(()=>{const e=()=>{const e=(0,v.Ri)("ACCESS_MODE");(0,v.Ri)("ACTIVE_MODE");le(e),5===e&&M("/user/opportunitiess")};return e(),window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[M]);const je=(0,o.useCallback)((e,t)=>{if(!t)return null;const i=t._id?t._id:t;return e.find(e=>e.value===i)||null},[]);(0,o.useEffect)(()=>{F((0,n.f$)()),F((0,c.Xr)())},[F]),(0,o.useEffect)(()=>{F((0,n.a_)({company_id:null===B||void 0===B?void 0:B._id,created_by_users:null===B||void 0===B?void 0:B.created_by_users}))},[F,null===B||void 0===B?void 0:B._id]);const fe=(0,o.useCallback)(e=>{if(U.length>0&&e.length>0){const t=U.filter(t=>e.includes(t.value));ne(t)}},[U]),qe=null===ye||void 0===ye||null===(L=ye.address)||void 0===L||null===(P=L.country)||void 0===P?void 0:P.short_name,Ae=null===ye||void 0===ye||null===(J=ye.address)||void 0===J||null===(T=J.state)||void 0===T?void 0:T.name,ke=(0,o.useCallback)(async()=>{try{var e,t,i,o,l,a,d,r;const u=await F((0,c.Sk)({_id:R||B._id,populate:"company_id:created_by_users|industry_id:created_by_users"})).unwrap(),x=null===u||void 0===u?void 0:u.data,j=x.work_location||x.address||{country:{name:"",dial_code:"",short_name:"",emoji:"\ud83c\uddee"},state:{name:"",code:""},city:{name:""},pin_code:""};var _,p,v,m,y,h,b,g;if(he((0,s.A)((0,s.A)({},x),{},{address:j,company_id:null===u||void 0===u||null===(e=u.data)||void 0===e||null===(t=e.company_id)||void 0===t?void 0:t._id,industry_id:null===u||void 0===u||null===(i=u.data)||void 0===i||null===(o=i.industry_id)||void 0===o?void 0:o._id,start_date:null!==u&&void 0!==u&&null!==(l=u.data)&&void 0!==l&&l.start_date?new Date(u.data.start_date).toISOString().split("T")[0]:"",end_date:null!==u&&void 0!==u&&null!==(a=u.data)&&void 0!==a&&a.end_date?new Date(u.data.end_date).toISOString().split("T")[0]:""})),null!==u&&void 0!==u&&null!==(d=u.data)&&void 0!==d&&d.company_id)F((0,n.a_)({company_id:null===u||void 0===u||null===(_=u.data)||void 0===_||null===(p=_.company_id)||void 0===p?void 0:p._id,created_by_users:null===u||void 0===u||null===(v=u.data)||void 0===v||null===(m=v.company_id)||void 0===m?void 0:m.created_by_users}));if(null!==u&&void 0!==u&&null!==(r=u.data)&&void 0!==r&&r.industry_id)F((0,n.JL)({industry_id:null===u||void 0===u||null===(y=u.data)||void 0===y||null===(h=y.industry_id)||void 0===h?void 0:h._id,created_by_users:null===u||void 0===u||null===(b=u.data)||void 0===b||null===(g=b.industry_id)||void 0===g?void 0:g.created_by_users}));x.screening_questions&&x.screening_questions.length>0&&re(x.screening_questions),x.required_skills&&x.required_skills.length>0&&fe(x.required_skills)}catch(x){console.error("Error fetching job data:",x),u.oR.error((null===x||void 0===x?void 0:x.message)||"Failed to fetch job data")}},[R,B,F]);(0,o.useEffect)(()=>{qe&&F((0,c.wk)({country_code:qe})),Ae&&F((0,c.E8)({state_name:Ae}))},[F,qe,Ae]),(0,o.useEffect)(()=>{R&&ke()},[R,ke]),(0,o.useEffect)(()=>{R&&U.length>0&&ye.required_skills.length>0&&0===ae.length&&fe(ye.required_skills)},[U,ye.required_skills,R,fe,ae.length]);const Ce=e=>{const t={};var i,s,o,l,a,n,d;1===e&&(ye.company_id||(t.company_id="Company is required"),ye.industry_id||(t.industry_id="Industry is required"),ye.job_type||(t.job_type="Job type is required"),ye.job_location||(t.job_location="Job location is required"),ye.pay_type||(t.pay_type="Pay type is required"),ye.salary_range||"internship"===ye.job_type||"unpaid"===ye.pay_type||(t.salary_range="Salary range is required"),ye.start_date||(t.start_date="Start date is required"),ye.end_date||(t.end_date="End date is required"),ye.current_openings||(t.current_openings="current opening is required"),null!==(i=ye.address)&&void 0!==i&&null!==(s=i.country)&&void 0!==s&&s.name||(t.country="Country is required"),null!==(o=ye.address)&&void 0!==o&&null!==(l=o.state)&&void 0!==l&&l.name||(t.state="State is required"),null!==(a=ye.address)&&void 0!==a&&null!==(n=a.city)&&void 0!==n&&n.name||(t.city="City is required"),null!==(d=ye.address)&&void 0!==d&&d.pin_code||(t.pin_code="Pin No is required"));return 2===e&&(ye.job_title||(t.job_title="Job title is required"),ye.job_description||(t.job_description="Job description is required"),ye.job_description&&ye.job_description.length<50&&(t.job_description="Description should be at least 50 characters"),0===ye.required_skills.length&&(t.required_skills="At least one skill is required")),3===e&&(0===de.length?t.screening_questions="At least one screening question is required":de.forEach((e,i)=>{e.question&&""!==e.question.trim()||(t["screening_question_".concat(i)]="Question is required"),"theoretical"!==e.question_type&&(e.options.length<2&&(t["screening_options_".concat(i)]="At least two options are required"),e.options.forEach((e,s)=>{e&&""!==e.trim()||(t["screening_option_".concat(i,"_").concat(s)]="Option cannot be empty")}),0===e.correct_options.length&&(t["screening_correct_".concat(i)]="At least one correct option is required"))})),ue(t),0===Object.keys(t).length},Ne=(e,t)=>{he(i=>{const o=(0,s.A)((0,s.A)({},i),{},{[e]:t||""});let l=(0,s.A)({},ce);if("start_date"===e&&i.end_date){const e=new Date(t);new Date(i.end_date)<e&&(o.end_date="",l.end_date="End date cleared because it was before Start date")}if(o.start_date&&o.end_date){const e=new Date(o.start_date);new Date(o.end_date)<e?l.end_date="End date cannot be before Start date":(delete l.start_date,delete l.end_date)}return ue(l),o}),ce[e]&&ue(t=>{const i=(0,s.A)({},t);return delete i[e],i})},we=async(e,t)=>{const i=(null===t||void 0===t?void 0:t.value)||"";switch(he(t=>(0,s.A)((0,s.A)({},t),{},{[e]:i})),console.log("field, selectedOption",e,t),"company_id"===e&&ge(!0),e){case"institution_id":await F((0,y.Q_)({institution_id:i,created_by_users:null===t||void 0===t?void 0:t.created_by_users}));break;case"degree_id":await F((0,y.BB)({degree_id:i,created_by_users:null===t||void 0===t?void 0:t.created_by_users}));break;case"field_of_studies":await F((0,y.P8)({study_id:i,created_by_users:null===t||void 0===t?void 0:t.created_by_users}));break;case"company_id":await F((0,n.a_)({company_id:i,created_by_users:null===t||void 0===t?void 0:t.created_by_users}));break;case"industry_id":await F((0,n.JL)({industry_id:i,created_by_users:null===t||void 0===t?void 0:t.created_by_users}));break;case"profile_role_id":await F((0,n.O_)({profile_role_id:i,created_by_users:null===t||void 0===t?void 0:t.created_by_users}))}ce[e]&&ue(t=>{const i=(0,s.A)({},t);return delete i[e],i})},Se=e=>{e&&!ye.required_skills.includes(e.value)&&(he(t=>(0,s.A)((0,s.A)({},t),{},{required_skills:[...t.required_skills,e.value]})),ne(t=>[...t,e]),ce.required_skills&&ue(e=>{const t=(0,s.A)({},e);return delete t.required_skills,t}))},Oe=e=>{he(t=>(0,s.A)((0,s.A)({},t),{},{required_skills:t.required_skills.filter(t=>t!==e)})),ne(t=>t.filter(t=>t.value!==e))},De=(e,t,i)=>{const o=[...de];"question_type"===t?(o[e][t]=i,"theoretical"===i?(o[e].options=[],o[e].correct_options=[]):(o[e].options||(o[e].options=[]),o[e].correct_options||(o[e].correct_options=[]))):"options"===t?(o[e].options=i,o[e].correct_options=o[e].correct_options.filter(e=>i.includes(e))):o[e][t]=i,re(o),"question"===t&&ce["screening_question_".concat(e)]&&ue(t=>{const i=(0,s.A)({},t);return delete i["screening_question_".concat(e)],i})},Ee=()=>{re([...de,{question:"",question_type:"single_choice",options:[],correct_options:[],option_format:"alphabetically",verification_type:"auto",time_limit:2}])},Ie=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const s=t.split(".");let o=e;for(const a of s){var l;if(o=null===(l=o)||void 0===l?void 0:l[a],void 0===o)return i}return o||i};return(0,q.jsxs)("div",{className:"p-4",children:[(0,q.jsx)("div",{className:"min-h-screen",children:(0,q.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,q.jsxs)("div",{className:"",children:[(0,q.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,q.jsx)("button",{onClick:()=>M(-1),className:"p-1 rounded hover:bg-gray-100",children:(0,q.jsx)(l.OLK,{size:32})}),(0,q.jsx)("h1",{className:"text-2xl font-semibold text-[#000000E6]",children:R?"Edit Job":"Post a Job"}),(0,q.jsxs)("span",{className:"text-sm text-gray-500",children:[H,"/3"]})]}),(0,q.jsxs)("div",{className:"mb-8",children:[1===H&&(0,q.jsx)("div",{className:"space-y-3",children:(0,q.jsx)(A,{allCompanies:V,allIndustry:z,formData:ye,setFormData:he,handleInputChange:Ne,handleSelectChange:we,errors:ce,setAddModalState:me,countryList:X,handleLocationSelectChange:xe,getNestedValue:Ie,stateList:Z,citiesList:$,setInputField:pe,isCreatableIndustry:be,getSelectedOption:je})}),2===H&&(0,q.jsx)(k,{handleSelectChange:we,allProfileRoles:W,allSkills:U,formData:ye,errors:ce,setAddModalState:me,handleInputChange:Ne,selectedSkills:ae,removeSkill:Oe,handleSkillSelect:Se,setInputField:pe,isCreatableIndustry:be,getSelectedOption:je}),3===H&&(0,q.jsxs)("div",{className:"space-y-6",children:[(0,q.jsxs)("div",{children:[(0,q.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:["Screening Questions ",(0,q.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,q.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Add screening questions to filter candidates. All questions are required."}),ce.screening_questions&&(0,q.jsx)("p",{className:"text-sm text-red-500 mb-4 bg-red-50 p-2 rounded-md",children:ce.screening_questions}),de.map((e,t)=>{const i=ce["screening_question_".concat(t)],o=ce["screening_options_".concat(t)],n=ce["screening_correct_".concat(t)];return(0,q.jsxs)("div",{className:"mb-6 p-4 border rounded-lg ".concat(i||o||n?"border-red-300 bg-red-50":"border-gray-200"),children:[(0,q.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,q.jsxs)("h3",{className:"font-medium",children:["Question ",t+1," ",(0,q.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,q.jsx)("button",{onClick:()=>(e=>{const t=[...de];t.splice(e,1),re(t);const i=(0,s.A)({},ce);Object.keys(i).forEach(t=>{(t.startsWith("screening_question_".concat(e))||t.startsWith("screening_options_".concat(e))||t.startsWith("screening_correct_".concat(e))||t.startsWith("screening_option_".concat(e,"_")))&&delete i[t]}),ue(i)})(t),className:"text-red-500 hover:text-red-700",children:(0,q.jsx)(l.Gsv,{className:"h-5 w-5"})})]}),(0,q.jsx)("div",{className:"mb-3",children:(0,q.jsx)(a.A,{value:e.question,onChange:e=>De(t,"question",e.target.value),placeholder:"Enter your question",className:"w-full h-10",error:i,required:!0})}),(0,q.jsxs)("div",{className:"mb-3",children:[(0,q.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question Type"}),(0,q.jsxs)("select",{value:e.question_type,onChange:e=>De(t,"question_type",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[(0,q.jsx)("option",{value:"single_choice",children:"Single Choice"}),(0,q.jsx)("option",{value:"multi_choice",children:"Multiple Choice"}),(0,q.jsx)("option",{value:"theoretical",children:"Theoretical"})]})]}),"theoretical"===e.question_type?(0,q.jsxs)("div",{className:"mb-3",children:[(0,q.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expected Answer (Optional)"}),(0,q.jsx)("textarea",{value:e.expected_answer||"",onChange:e=>De(t,"expected_answer",e.target.value),rows:3,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Describe what you're looking for in an answer (optional)"})]}):(0,q.jsxs)("div",{className:"space-y-2",children:[(0,q.jsxs)("div",{className:"flex justify-between items-center",children:[(0,q.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["Options ",(0,q.jsx)("span",{className:"text-red-500",children:"*"})]}),o&&(0,q.jsx)("span",{className:"text-sm text-red-500",children:o})]}),e.options.map((i,o)=>{const n=ce["screening_option_".concat(t,"_").concat(o)];return(0,q.jsxs)("div",{className:"flex items-center",children:[(0,q.jsx)("input",{type:"single_choice"===e.question_type?"radio":"checkbox",checked:e.correct_options.includes(i),onChange:()=>((e,t)=>{const i=[...de],o=i[e];"single_choice"===o.question_type?o.correct_options=[t]:"multi_choice"===o.question_type&&(o.correct_options.includes(t)?o.correct_options=o.correct_options.filter(e=>e!==t):o.correct_options.push(t)),re(i);const l="screening_correct_".concat(e);ce[l]&&ue(e=>{const t=(0,s.A)({},e);return delete t[l],t})})(t,i),className:"mr-2 ",name:"question-".concat(t)}),(0,q.jsx)("div",{className:"flex-1",children:(0,q.jsx)(a.A,{value:i,onChange:e=>{const s=e.target.value,l=[...de];if(l[t].correct_options.includes(i)){const e=l[t].correct_options.indexOf(i);l[t].correct_options[e]=s}l[t].options[o]=s,re(l)},placeholder:"Option ".concat(o+1),error:n,required:!0})}),(0,q.jsx)("button",{onClick:()=>((e,t)=>{const i=[...de],o=i[e].options.splice(t,1)[0];i[e].correct_options=i[e].correct_options.filter(e=>e!==o),re(i);const l="screening_option_".concat(e,"_").concat(t);ce[l]&&ue(e=>{const t=(0,s.A)({},e);return delete t[l],t})})(t,o),className:"ml-2 text-red-500 hover:text-red-700",children:(0,q.jsx)(l.Gsv,{className:"h-5 w-5"})})]},o)}),(0,q.jsx)("button",{onClick:()=>(e=>{const t=[...de];t[e].options.push(""),re(t)})(t),className:"mt-2 text-blue-500 hover:text-blue-700 text-sm",children:"+ Add Option"}),n&&(0,q.jsx)("p",{className:"text-sm text-red-500 mt-2",children:n})]}),(0,q.jsxs)("div",{className:"mt-3",children:[(0,q.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Time Limit (minutes) ",(0,q.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,q.jsx)("input",{type:"number",value:e.time_limit,onChange:e=>De(t,"time_limit",parseInt(e.target.value)||0),min:"1",className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]})]},t)}),(0,q.jsxs)("button",{onClick:Ee,className:"mt-2 text-blue-500 hover:text-blue-700 flex items-center",children:[(0,q.jsx)("span",{className:"text-lg mr-1",children:"+"})," Add Another Question"]})]}),!R&&(0,q.jsx)(a.A,{type:"checkbox",label:"Share As a post",checked:null===ye||void 0===ye?void 0:ye.isShareAsPost,onChange:e=>he(t=>(0,s.A)((0,s.A)({},t),{},{isShareAsPost:e.target.checked}))})]})]}),(0,q.jsxs)("div",{className:"flex justify-between mt-8 gap-3",children:[H>1&&(0,q.jsx)("button",{onClick:()=>{H>1&&Y(H-1)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300",children:"Back"}),H<3?(0,q.jsx)("button",{onClick:()=>{if(Ce(H))H<3&&Y(H+1);else{const e=Object.keys(ce)[0];if(e){const t=document.querySelector('[data-error="'.concat(e,'"]'));t&&t.scrollIntoView({behavior:"smooth",block:"center"})}}},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 ml-auto",children:"Next"}):(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(_.A,{onClick:async()=>{if(console.log("this is te error",Ce(3)),!Ce(3)){const e=Object.keys(ce)[0];if(e){const t=document.querySelector('[data-error="'.concat(e,'"]'));t&&t.scrollIntoView({behavior:"smooth",block:"center"})}return}te(!0);const e={company_id:(null===ye||void 0===ye?void 0:ye.company_id)||"",industry_id:(null===ye||void 0===ye?void 0:ye.industry_id)||"",job_type:(null===ye||void 0===ye?void 0:ye.job_type)||"",job_location:(null===ye||void 0===ye?void 0:ye.job_location)||"",pay_type:(null===ye||void 0===ye?void 0:ye.pay_type)||"",salary_range:(null===ye||void 0===ye?void 0:ye.salary_range)||"",job_title:(null===ye||void 0===ye?void 0:ye.job_title)||"",job_description:(null===ye||void 0===ye?void 0:ye.job_description)||"",required_skills:(null===ye||void 0===ye?void 0:ye.required_skills)||[],work_location:(null===ye||void 0===ye?void 0:ye.address)||"",isDisable:!1,screening_questions:de,start_date:(0,r.TG)(null===ye||void 0===ye?void 0:ye.start_date)||"",end_date:(0,r.TG)(null===ye||void 0===ye?void 0:ye.end_date)||"",isShareAsPost:null===ye||void 0===ye?void 0:ye.isShareAsPost,current_openings:null===ye||void 0===ye?void 0:ye.current_openings};R&&(e._id=R);const t=R?c.m8:c.ts;try{const i="company"===(0,v.Ri)("ACTIVE_MODE"),s=await F(t(e)).unwrap();u.oR.success((null===s||void 0===s?void 0:s.message)||(null===s||void 0===s?void 0:s.success)||(R?"Job updated successfully!":"Job posted successfully!")),Y(1),M(i?"/company/opportunities":"/user/opportunitiess"),he({company_id:"",industry_id:"",job_type:"",job_location:"",pay_type:"",salary_range:"",job_title:"",job_description:"",required_skills:[],address:{country:{name:"",dial_code:"",short_name:"",emoji:"\ud83c\uddee"},state:{name:"",code:""},city:{name:""},pin_code:""},screening_questions:[],isDisable:!1,start_date:"",end_date:""}),ne([]),re([{question:"",question_type:"single_choice",options:[],option_format:"alphabetically",correct_options:[],verification_type:"auto",time_limit:2}]),ue({})}catch(i){console.error("Error submitting job:",i),u.oR.error((null===i||void 0===i?void 0:i.message)||(R?"Failed to update job. Please try again.":"Failed to post job. Please try again."))}finally{te(!1)}},loading:ee,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 ml-auto",children:R?"Update Job":"Post Job"})})]})]})})}),(0,q.jsx)(m.A,{isOpen:ve.isOpen,title:"Add ".concat(ve.type),onClose:()=>{me({isOpen:!1,type:"",field:""}),pe({name:"",logo_url:""})},handleSubmit:async()=>{try{let e="",t=null,i=ve.field;switch(ve.type){case"industries":e="industries",t=n.IQ;break;case"profile-roles":e="profile-roles",t=n.fJ;break;case"skill":e="skills",t=c.bG;break;default:return}se(!0);const o=await F((0,h.A5)((0,s.A)({type:e},_e))).unwrap();se(!1);const l={_id:o.data._id,name:o.data.name,created_by_users:o.data.created_by_users};if(F(t(l)),console.log("This is the add formdata int the market place ",i,e,t),"required_skills"===i){const e={value:l._id,label:l.name,created_by_users:l.created_by_users};he(e=>(0,s.A)((0,s.A)({},e),{},{required_skills:[...e.required_skills||[],l._id]})),ne(t=>[...t||[],e])}else he(e=>(0,s.A)((0,s.A)({},e),{},{[i]:l._id}));me({isOpen:!1,type:"",field:""}),pe({name:"",logo_url:""})}catch(e){u.oR.error((null===e||void 0===e?void 0:e.message)||"Something went wrong")}finally{se(!1)}},loading:ie,children:(0,q.jsx)("div",{className:"space-y-3",children:(0,q.jsx)(a.A,{className:"w-full h-10",label:"Enter Name",required:!0,placeholder:"Enter name",value:null===_e||void 0===_e?void 0:_e.name,onChange:e=>pe(t=>(0,s.A)((0,s.A)({},t),{},{name:e.target.value}))})})})]})}}}]);
//# sourceMappingURL=307.8b8b835f.chunk.js.map