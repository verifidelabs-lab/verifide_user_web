"use strict";(self.webpackChunkcomfygen_react_new_base_folder=self.webpackChunkcomfygen_react_new_base_folder||[]).push([[937],{2937:(e,s,t)=>{t.r(s),t.d(s,{default:()=>w});var l=t(9379),r=t(5043),i=t(9804),a=t(3003),n=t(9981),o=t(9461),c=t(6328),d=t(4272),u=t(5200),m=t(3156),x=t(7196),h=t(1177),g=t(8322),p=t(579);const v=e=>{let{msg:s,isOwn:t}=e;const l=/(https?:\/\/[^\s]+)/g,r=s.message.match(l)||[],i=e=>{let s="",t=!1;(e.includes("youtube.com")||e.includes("youtu.be"))&&(s=(e=>{if(!e)return null;let s=null;try{var t;if(null!==e&&void 0!==e&&e.includes("youtube.com/watch?v="))s=null===(t=e.split("v=")[1])||void 0===t?void 0:t.split("&")[0];else if(e.includes("youtu.be/")){var l;s=null===(l=e.split("youtu.be/")[1])||void 0===l?void 0:l.split("?")[0]}else{if(e.includes("youtube.com/embed/"))return e.includes("?")?e:"".concat(e,"?enablejsapi=1&origin=").concat(window.location.origin);var r;if(e.includes("youtube.com/v/"))s=null===(r=e.split("v/")[1])||void 0===r?void 0:r.split("?")[0];else if(e.includes("youtube.com/shorts/")){var i;s=null===(i=e.split("shorts/")[1])||void 0===i?void 0:i.split("?")[0]}}if(s)return"https://www.youtube.com/embed/".concat(s,"?enablejsapi=1&origin=").concat(window.location.origin,"&rel=0&modestbranding=1")}catch(a){console.error("Error parsing YouTube URL:",a)}return null})(e),t=!0);const l=/\.(jpeg|jpg|gif|png|webp|svg)$/i.test(e),r=/\.(mp4|webm|ogg|mov)$/i.test(e);return t?(0,p.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:(0,p.jsx)("div",{className:"mt-3 border rounded-lg overflow-hidden w-full h-80",children:(0,p.jsx)("iframe",{src:s,title:"Link Preview",className:"w-full h-full pointer-events-none"})})}):l?(0,p.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:(0,p.jsx)("img",{src:e,alt:"Preview",className:"w-full h-auto max-h-80 object-contain rounded-lg"})}):r?(0,p.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",children:(0,p.jsx)("video",{src:e,controls:!0,className:"w-full max-h-80 rounded-lg"})}):(0,p.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"block p-4 bg-gray-100 hover:bg-gray-200 rounded-lg",children:(0,p.jsxs)("div",{className:"flex items-center gap-3",children:[(0,p.jsx)("img",{src:"https://www.google.com/s2/favicons?sz=64&domain_url=".concat(e),alt:"favicon",className:"w-6 h-6"}),(0,p.jsx)("span",{className:"truncate text-blue-600",children:e})]})})};return(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:"text-sm whitespace-pre-wrap break-words ".concat(r.length?"text-blue-600 cursor-pointer hover:underline":t?"text-[#000000E6]":"text-gray-800"),children:s.message.split(l).map((e,s)=>l.test(e)?(0,p.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:e},s):e)}),r.length>0&&(0,p.jsx)("div",{className:"mt-3 space-y-3 w-full max-w-md",children:r.map((e,s)=>(0,p.jsx)("div",{className:"border rounded-lg overflow-hidden shadow-sm",children:i(e)},s))})]})},f=e=>{let{msg:s,isOwn:t,onReply:l,messages:a=[],user_id:o}=e;const[u,f]=(0,r.useState)(null),b=(0,n.Zp)(),j=e=>e&&e.split("/").pop().split("?")[0]||"file",y=(e,s)=>{const t=document.createElement("a");t.href=e,t.download=s,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)},_=e=>{var s,t;return e.video_url&&(null===(s=e.image_urls)||void 0===s?void 0:s.length)>0?(0,p.jsx)("div",{className:"mb-3",children:(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("img",{src:e.image_urls[0],alt:"Shared content",className:"w-full h-32 object-cover rounded-lg cursor-pointer hover:brightness-95 transition-all",onClick:()=>window.open(e.image_urls[0],"_blank")}),(0,p.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 rounded-full p-1.5",children:(0,p.jsx)(i.Ah9,{className:"w-4 h-4 text-white cursor-pointer",onClick:s=>{s.stopPropagation(),y(e.image_urls[0],j(e.image_urls[0]))}})})]})}):e.video_url?(0,p.jsxs)("div",{className:"relative group mb-3",children:[(0,p.jsxs)("video",{controls:!0,className:"w-full h-32 object-contain bg-black rounded-lg",preload:"metadata",children:[(0,p.jsx)("source",{src:e.video_url,type:"video/mp4"}),"Your browser does not support the video tag."]}),(0,p.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 rounded-full p-1.5",children:(0,p.jsx)(i.Ah9,{className:"w-4 h-4 text-white cursor-pointer",onClick:s=>{s.stopPropagation(),y(e.video_url,j(e.video_url))}})})]}):(null===(t=e.image_urls)||void 0===t?void 0:t.length)>0?(0,p.jsx)("div",{className:"mb-3",children:1===e.image_urls.length?(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("img",{src:e.image_urls[0],alt:"Shared content",className:"w-full h-32 object-cover rounded-lg cursor-pointer hover:brightness-95 transition-all",onClick:()=>window.open(e.image_urls[0],"_blank")}),(0,p.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 rounded-full p-1.5",children:(0,p.jsx)(i.Ah9,{className:"w-4 h-4 text-white cursor-pointer",onClick:s=>{s.stopPropagation(),y(e.image_urls[0],j(e.image_urls[0]))}})})]}):(0,p.jsx)("div",{className:"grid grid-cols-2 gap-1",children:e.image_urls.slice(0,4).map((e,s)=>(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("img",{src:e,alt:"Shared content ".concat(s+1),className:"w-full h-20 object-cover rounded cursor-pointer hover:brightness-95 transition-all",onClick:()=>window.open(e,"_blank")}),(0,p.jsx)("div",{className:"absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 rounded-full p-1",children:(0,p.jsx)(i.Ah9,{className:"w-3 h-3 text-white cursor-pointer",onClick:s=>{s.stopPropagation(),y(e,j(e))}})})]},s))})}):null},w=(0,r.useCallback)(e=>{e?(navigator.clipboard.writeText("https://dev-verified.jamsara.com/postView/".concat(e)),b("/postView/".concat(e)),c.oR.success("Link copied to clipboard")):c.oR.error("Invalid post data")},[]),N=e=>(0,p.jsxs)("div",{className:"mb-3",children:[e.thumbnail&&(0,p.jsx)("div",{className:"relative group mb-2",children:(0,p.jsx)("img",{src:e.thumbnail,alt:"Link preview",className:"w-full h-32 object-cover rounded-lg cursor-pointer hover:brightness-95 transition-all",onClick:()=>window.open(e.link,"_blank")})}),(0,p.jsx)("div",{className:"p-3 rounded-lg border cursor-pointer hover:bg-opacity-80 transition-all ".concat(t?"bg-white/10 border-white/20":"bg-gray-50 border-gray-200"),onClick:()=>window.open(e.link,"_blank"),children:(0,p.jsxs)("div",{className:"flex items-start justify-between",children:[(0,p.jsxs)("div",{className:"flex-1",children:[e.title&&(0,p.jsx)("h4",{className:"font-semibold text-sm mb-1 ".concat(t?"text-black/90":"text-gray-800"),children:e.title}),e.link&&(0,p.jsx)("p",{className:"text-xs mb-2 ".concat(t?"text-black/70":"text-gray-600"),children:new URL(e.link).hostname})]}),(0,p.jsx)(i.o9J,{className:"w-4 h-4 ml-2 ".concat(t?"text-black/70":"text-gray-500")})]})})]}),k=e=>{var s;const l=e.poll||{},r=l.total_votes||0;return(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsx)("div",{className:"flex items-center space-x-2 mb-3 ".concat(t?"text-black/80":"text-gray-600"),children:(0,p.jsxs)("span",{className:"text-xs font-medium",children:["Poll \u2022 ",r," votes"]})}),(0,p.jsx)("div",{className:"space-y-2",children:null===(s=l.options)||void 0===s?void 0:s.map((e,s)=>{const l=r>0?Math.round(e.vote_count/r*100):0,i=u===s;return(0,p.jsxs)("div",{className:"relative p-3 rounded-lg border cursor-pointer transition-all ".concat(i?t?"bg-blue-500/20 border-blue-400/50":"bg-blue-50 border-blue-200":t?"bg-white/10 border-white/20 hover:bg-white/20":"bg-gray-50 border-gray-200 hover:bg-gray-100"),onClick:()=>(f(s),void c.oR.success("Vote recorded!")),children:[(0,p.jsx)("div",{className:"absolute inset-0 rounded-lg transition-all ".concat(t?"bg-blue-400/20":"bg-blue-100"),style:{width:"".concat(l,"%")}}),(0,p.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,p.jsx)("span",{className:"text-sm font-medium ".concat(t?"text-black/90":"text-gray-800"),children:e.text}),(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsxs)("span",{className:"text-xs ".concat(t?"text-black/70":"text-gray-600"),children:[l,"%"]}),(0,p.jsxs)("span",{className:"text-xs ".concat(t?"text-black/70":"text-gray-600"),children:["(",e.vote_count,")"]})]})]})]},s)})}),l.voting_length&&(0,p.jsxs)("p",{className:"text-xs mt-2 ".concat(t?"text-black/70":"text-gray-500"),children:["Voting ends in ",l.voting_length," days"]})]})};return(0,p.jsx)("div",{className:"flex msg_ui overflow-hidden overflow-auto mb-1.5 px-4 ".concat(t?"justify-end":"justify-start"),children:(0,p.jsx)("div",{className:"max-w-[85%] relative group ".concat(t?"bg-[#fcfcff] text-[#000000E6] rounded-tr-none rounded-lg":"bg-white text-gray-800 rounded-tl-none rounded-lg shadow-sm"),style:{borderRadius:t?"7.5px 0 7.5px 7.5px":"0 7.5px 7.5px 7.5px"},children:(0,p.jsxs)("div",{className:"px-3 pt-3 pb-1 ",children:[(()=>{const e=s.isReplied&&s.chat_id?s.reply_to?s.reply_to:s.isReplied&&s.chat_id?a.find(e=>e._id===s.chat_id||e.id===s.chat_id):null:null;if(!e)return null;const l=e.sender_id===s.sender_id;return(0,p.jsxs)("div",{className:"mb-2 p-2 rounded-lg border-l-2 ".concat(t?"bg-gray-600 border-white/40":"bg-gray-100 border-gray-300"),children:[(0,p.jsx)("p",{className:"text-xs font-medium mb-1 ".concat(t?"text-white/80":"text-gray-600"),children:l?"You":"Them"}),(0,p.jsx)("p",{className:"text-xs truncate ".concat(t?"text-white/90":"text-gray-700"),children:e.message?e.message:"image"===e.file_type?"\ud83d\udcf7 Image":"video"===e.file_type?"\ud83c\udfa5 Video":"pdf"===e.file_type?"\ud83d\udcc4 PDF":"shared-post"===e.file_type?"\ud83d\udcdd Shared Post":"shared-interview"===e.file_type?"\ud83d\udcc5 Interview Scheduled":"Message"})]})})(),(()=>{var e,l,r,a,n,o,c;switch(s.file_type){case"shared-interview":const C=s.shared_data||{},R=C.job_details||{},I=R.company||{},S=R.required_skills||[];return(0,p.jsxs)("div",{className:"border rounded-lg overflow-hidden max-w-[320px] ".concat(t?"bg-white/10 border-white/20":"bg-white border-gray-200"),children:[(0,p.jsxs)("div",{className:"flex items-center space-x-2 p-3 border-b ".concat(t?"border-white/20":"border-gray-200"),children:[(0,p.jsx)(i.Xck,{className:"w-4 h-4 ".concat(t?"text-[#000000E6]":"text-gray-500")}),(0,p.jsx)("span",{className:"text-xs font-medium ".concat(t?"text-[#000000E6]":"text-gray-500"),children:"Interview Scheduled"})]}),(0,p.jsxs)("div",{className:"p-3",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[I.logo_url&&(0,p.jsx)("img",{src:I.logo_url,alt:I.name||"Company Logo",className:"w-10 h-10 rounded-full object-cover border"}),(0,p.jsxs)("div",{children:[(0,p.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:I.name}),(0,p.jsx)("p",{className:"text-xs text-gray-500",children:null===(e=R.job_title_details)||void 0===e?void 0:e.name})]})]}),(0,p.jsxs)("div",{className:"text-xs text-gray-600 space-y-1 mb-3",children:[(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"Type:"})," ",R.job_type]}),(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"Location:"})," ",R.job_location," (",R.work_location,")"]}),(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"Pay:"})," ",R.pay_type," (",R.salary_range,")"]}),(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"Industry:"})," ",null===(l=R.industry)||void 0===l?void 0:l.name]})]}),C.content&&(0,p.jsx)("p",{className:"text-sm mb-3 text-gray-800",children:C.content}),(C.select_date||C.select_time)&&(0,p.jsxs)("div",{className:"text-xs text-gray-600 mb-3",children:[C.select_date&&(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"Date:"})," ",new Date(C.select_date).toLocaleDateString()]}),C.select_time&&(0,p.jsxs)("p",{children:[(0,p.jsx)("strong",{children:"Time:"})," ",new Date(C.select_time).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),S.length>0&&(0,p.jsx)("div",{className:"flex flex-wrap gap-1 mb-3",children:S.map(e=>(0,p.jsx)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:e.name},e._id))}),C.meeting_url&&(0,p.jsx)("a",{href:C.meeting_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Join Meeting"})]})]});case"image":return(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsx)("img",{src:s.file_url,alt:"Shared image",className:"max-w-[280px] rounded-lg object-cover cursor-pointer hover:brightness-95 transition-all",onClick:()=>window.open(s.file_url,"_blank")}),s.message&&(0,p.jsx)("div",{className:"mt-2 text-sm ".concat(t?"text-white":"text-gray-800"),children:s.message}),(0,p.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 rounded-full p-1.5",children:(0,p.jsx)(i.Ah9,{className:"w-4 h-4 text-white cursor-pointer",onClick:e=>{e.stopPropagation(),y(s.file_url,j(s.file_url))}})})]});case"video":return(0,p.jsxs)("div",{className:"relative group",children:[(0,p.jsxs)("video",{controls:!0,className:"max-w-[280px] rounded-lg",preload:"metadata",children:[(0,p.jsx)("source",{src:s.file_url,type:"video/mp4"}),"Your browser does not support the video tag."]}),s.message&&(0,p.jsx)("div",{className:"mt-2 text-sm ".concat(t?"text-white":"text-gray-800"),children:s.message}),(0,p.jsx)("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-black/30 rounded-full p-1.5",children:(0,p.jsx)(i.Ah9,{className:"w-4 h-4 text-white cursor-pointer",onClick:e=>{e.stopPropagation(),y(s.file_url,j(s.file_url))}})})]});case"pdf":return(0,p.jsxs)("div",{className:"flex items-center space-x-3 p-3 rounded-lg max-w-[280px] ".concat(t?"bg-white/20":"bg-gray-100"),children:[(0,p.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,p.jsx)("p",{className:"text-sm font-medium truncate ".concat("text-[#000000E6]"),children:(null===s||void 0===s?void 0:s.file_url)&&(0,p.jsx)("iframe",{src:"https://docs.google.com/gview?url=".concat(null===s||void 0===s?void 0:s.file_url,"&embedded=true"),style:{width:"100%",height:"100px",border:"none"},title:"PDF Preview"})}),(0,p.jsx)("p",{className:"text-xs ".concat(t?"text-[#000000E6]/70":"text-gray-500"),children:"PDF Document"})]}),(0,p.jsx)("button",{onClick:()=>y(s.file_url,j(s.file_url)),className:"flex-shrink-0 p-2 rounded-full hover:bg-opacity-20 transition-colors ".concat(t?"hover:bg-white/30":"hover:bg-gray-300"),children:(0,p.jsx)(i.Ah9,{className:"w-4 h-4 ".concat(t?"text-[#000000E6]":"text-gray-600")})})]});case"shared-post":const U=s.shared_data||{};return"jobs"===U.post_type?(0,p.jsx)(h.A,{job:null===U||void 0===U?void 0:U.post_job_id,isOwn:t}):"certificates"===(null===U||void 0===U?void 0:U.post_type)?(0,p.jsx)(g.A,{certificateName:null===U||void 0===U||null===(u=U.post_certificate_id)||void 0===u?void 0:u.name,issueBy:null===U||void 0===U||null===(m=U.post_certificate_id)||void 0===m?void 0:m.issuing_organization,description:null===U||void 0===U||null===(x=U.post_certificate_id)||void 0===x?void 0:x.description,date:(0,d.D3)(null===U||void 0===U||null===(f=U.post_certificate_id)||void 0===f?void 0:f.issue_date),record:null===U||void 0===U?void 0:U.post_certificate_id,type:"certifications",username:null===U||void 0===U||null===(b=U.user_details)||void 0===b?void 0:b.name}):(0,p.jsxs)("div",{className:"border rounded-lg overflow-hidden max-w-[320px] ".concat(t?"bg-white/10 border-white/20":"bg-white border-gray-200"),children:[(0,p.jsxs)("div",{className:"flex items-center space-x-2 p-3 border-b ".concat(t?"border-white/20":"border-gray-200"),onClick:()=>{var e,t;sessionStorage.setItem("currentPostId",null===s||void 0===s||null===(e=s.shared_data)||void 0===e?void 0:e.share_id),w(null===s||void 0===s||null===(t=s.shared_data)||void 0===t?void 0:t.share_id)},children:[(0,p.jsx)(i.Xck,{className:"w-4 h-4 ".concat(t?"text-[#000000E6]":"text-gray-500")}),(0,p.jsx)("span",{className:"text-xs font-medium ".concat(t?"text-[#000000E6]":"text-gray-500"),children:"Shared Post"})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-3 p-2",children:[(null===U||void 0===U?void 0:U.user_details)&&(0,p.jsx)("img",{src:(null===U||void 0===U||null===(r=U.user_details)||void 0===r?void 0:r.profile_picture_url)||"/0684456b-aa2b-4631-86f7-93ceaf33303c.png",alt:"User Avatar",className:"w-8 h-8 rounded-full object-cover border"}),(0,p.jsx)("div",{children:(0,p.jsxs)("p",{className:"text-sm font-semibold text-gray-800",children:[null===U||void 0===U||null===(a=U.user_details)||void 0===a?void 0:a.first_name," ",null===U||void 0===U||null===(n=U.user_details)||void 0===n?void 0:n.last_name," ",null===U||void 0===U||null===(o=U.user_details)||void 0===o?void 0:o.name]})})]}),(0,p.jsxs)("div",{className:"p-3",children:[U.content&&(0,p.jsx)("p",{className:"text-sm mb-3 ".concat(t?"text-[#000000E6]":"text-gray-800"),children:U.content}),"link"===U.post_type&&N(U),"poll"===U.post_type&&k(U),(!U.post_type||"media"===U.post_type)&&_(U),(null===(c=U.tags)||void 0===c?void 0:c.length)>0&&(0,p.jsxs)("div",{className:"flex flex-wrap gap-1",children:[U.tags.slice(0,3).map((e,s)=>(0,p.jsxs)("span",{className:"inline-flex items-center space-x-1 text-xs px-2 py-1 rounded-full ".concat(t?"bg-white/20 text-[#000000E6]":"bg-blue-100 text-blue-800"),children:[(0,p.jsx)(i.uao,{className:"w-3 h-3"}),(0,p.jsx)("span",{children:e})]},s)),U.tags.length>3&&(0,p.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(t?"bg-white/20 text-[#000000E6]":"bg-gray-100 text-gray-600"),children:["+",U.tags.length-3," more"]})]}),(0,p.jsx)("div",{children:(0,p.jsx)("img",{src:null===U||void 0===U?void 0:U.image_urls[0],alt:"img"})})]})]});var u,m,x,f,b;default:return s.message?(0,p.jsx)("div",{className:"text-sm whitespace-pre-wrap break-words ".concat(t?"text-[#000000E6]":"text-gray-800"),children:(0,p.jsx)(v,{msg:s})}):null}})(),(0,p.jsxs)("div",{className:"flex justify-between items-center mt-2 space-x-2 ".concat(t?"text-[#000000E6]":"text-gray-500"),children:[(0,p.jsx)("button",{onClick:e=>{e.stopPropagation(),l(s)},className:"  transition-opacity p-1 rounded-full hover:bg-gray-200/50 ".concat(t?"hover:bg-white/20":"hover:bg-gray-100"),title:"Reply",children:(0,p.jsx)(m.w1Z,{className:"w-4 h-4"})}),(0,p.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,p.jsx)("span",{className:"text-[11px]",children:(C=s.timestamp||s.createdAt,new Date(C).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).toLowerCase().replace(" ",""))}),t&&(0,p.jsx)("span",{className:"text-xs",children:s.isRead?(0,p.jsx)(x.Jnp,{size:20,color:"blue"}):(0,p.jsx)(x.s0,{size:20,color:"blue"})})]})]})]})})});var C};var b=t(184),j=t(4258);const y=e=>{let{fileInputRef:s,handleFileChange:t,messageInput:l,setMessageInput:a,handleKeyPress:n,sendingMessage:o,handleSendMessage:c,mediaPreview:d,setMediaPreview:u,uploadProgress:m,loading:x,contacts:h,onUnblock:g,replyingTo:v,cancelReply:f}=e;const[y,_]=r.useState(!1),w=r.useRef(null),N=()=>{d.file_url&&"string"===typeof d.file_url&&d.file_url.startsWith("blob:")&&URL.revokeObjectURL(d.file_url),u({file_url:null,file_type:null})},k=e=>{switch(e){case"image":return(0,p.jsx)(i.tai,{className:"w-5 h-5 text-green-600"});case"video":return(0,p.jsx)(i.HA1,{className:"w-5 h-5 text-purple-600"});case"pdf":return(0,p.jsx)(i.MG2,{className:"w-5 h-5 text-red-600"});default:return(0,p.jsx)(i.MG2,{className:"w-5 h-5 text-gray-600"})}};return(0,p.jsx)(p.Fragment,{children:null!==h&&void 0!==h&&h.isBlocked?(0,p.jsx)("div",{className:"border-t border-gray-200 bg-white",children:(0,p.jsx)("div",{className:"p-6 text-center",children:(0,p.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,p.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:(0,p.jsx)(i.PLI,{className:"w-8 h-8 text-red-500"})}),(0,p.jsx)("h3",{className:"text-lg font-medium text-[#000000E6]",children:null!==h&&void 0!==h&&h.isBlockedByYou?"You blocked this user":"You've been blocked"}),(0,p.jsx)("p",{className:"text-gray-500 max-w-md text-center",children:null!==h&&void 0!==h&&h.isBlockedByYou?"You won't be able to send or receive messages from this user until you unblock them.":"This user has blocked you. You can't send messages to them."}),(null===h||void 0===h?void 0:h.isBlockedByYou)&&g&&(0,p.jsx)("button",{onClick:g,className:"mt-4 px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Unblock User"})]})})}):(0,p.jsxs)("div",{className:"border-t border-gray-200 bg-white",children:[(()=>{if(!v)return null;return(0,p.jsx)("div",{className:"px-4 py-3 border-t border-gray-200 bg-blue-50",children:(0,p.jsxs)("div",{className:"flex items-start justify-between",children:[(0,p.jsx)("div",{className:"flex-1",children:(0,p.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,p.jsx)("div",{className:"w-1 h-8 bg-blue-500 rounded-full"}),(0,p.jsxs)("div",{children:[(0,p.jsxs)("p",{className:"text-xs font-medium text-blue-700",children:["Replying to ",v.sender_id===(null===h||void 0===h?void 0:h.connectionUserId)?null===h||void 0===h?void 0:h.first_name:"You"]}),(0,p.jsx)("p",{className:"text-sm text-gray-600 truncate max-w-xs",children:v.message?v.message:"image"===v.file_type?"\ud83d\udcf7 Image":"video"===v.file_type?"\ud83c\udfa5 Video":"pdf"===v.file_type?"\ud83d\udcc4 PDF":"shared-post"===v.file_type?"\ud83d\udcdd Shared Post":"shared-interview"===v.file_type?"\ud83d\udcc5 Interview Scheduled":"Message"})]})]})}),(0,p.jsx)("button",{onClick:f,className:"p-1 hover:bg-blue-100 rounded-full transition-colors",children:(0,p.jsx)(i.Gsv,{className:"w-4 h-4 text-blue-500"})})]})})})(),d.file_url?(0,p.jsx)("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50",children:(0,p.jsxs)("div",{className:"flex items-center justify-between",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-3",children:["image"===d.file_type&&"string"===typeof d.file_url&&d.file_url.startsWith("blob:")?(0,p.jsx)("img",{src:d.file_url,alt:"Preview",className:"w-12 h-12 object-cover rounded-lg"}):"video"===d.file_type&&"string"===typeof d.file_url&&d.file_url.startsWith("blob:")?(0,p.jsx)("video",{src:d.file_url,className:"w-12 h-12 object-cover rounded-lg",muted:!0}):(0,p.jsx)("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",children:k(d.file_type)}),(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("p",{className:"text-sm font-medium text-[#000000E6]",children:"pdf"===d.file_type?d.file_url:"".concat(d.file_type.charAt(0).toUpperCase()+d.file_type.slice(1)," file")}),x&&(0,p.jsxs)("div",{className:"mt-1",children:[(0,p.jsxs)("div",{className:"text-xs text-gray-500 mb-1",children:["Uploading... ",m,"%"]}),(0,p.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1",children:(0,p.jsx)("div",{className:"bg-blue-500 h-1 rounded-full transition-all duration-300",style:{width:"".concat(m,"%")}})})]})]})]}),(0,p.jsx)("button",{onClick:N,className:"p-1 hover:bg-gray-200 rounded-full transition-colors",disabled:x,children:(0,p.jsx)(i.Gsv,{className:"w-5 h-5 text-gray-500"})})]})}):null,(0,p.jsx)("div",{className:"p-4",children:(0,p.jsxs)("div",{className:"flex items-end space-x-3",children:[(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("button",{onClick:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.click()},className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full transition-colors",disabled:x||o,children:(0,p.jsx)(i._YS,{className:"w-5 h-5"})}),(0,p.jsx)("input",{ref:s,type:"file",onChange:t,accept:"image/*,video/*,.pdf",className:"hidden",disabled:x||o})]}),(0,p.jsxs)("div",{className:"flex-1 relative",children:[(0,p.jsx)("textarea",{value:l,ref:w,onChange:e=>a(e.target.value),onKeyPress:n,placeholder:v?"Reply to message...":"Type a message...",className:"w-full px-4 py-2 border border-gray-300 rounded-2xl resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent max-h-32 min-h-[40px]",rows:1,disabled:x||o,style:{height:"auto",minHeight:"40px",maxHeight:"128px",overflowY:l.split("\n").length>3?"auto":"hidden"},onInput:e=>{e.target.style.height="auto",e.target.style.height=Math.min(e.target.scrollHeight,128)+"px"}}),(0,p.jsx)("span",{onClick:()=>_(!y),className:"absolute right-3 top-2.5 text-gray-500 cursor-pointer hover:text-gray-700",children:(0,p.jsx)(b.kqk,{size:20})}),y&&(0,p.jsx)("div",{className:"absolute bottom-full mb-2 right-0 z-50",children:(0,p.jsx)(j.Ay,{onEmojiClick:e=>{const s=w.current.selectionStart,t=l.slice(0,s),r=l.slice(s),i=t+e.emoji+r;a(i),setTimeout(()=>{w.current.focus(),w.current.selectionStart=s+e.emoji.length,w.current.selectionEnd=s+e.emoji.length},0),_(!1)}})})]}),(0,p.jsx)("button",{onClick:c,disabled:!l.trim()&&!d.file_url||o||x,className:"p-2 rounded-full transition-all duration-200 ".concat(!l.trim()&&!d.file_url||o||x?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-blue-500 text-white hover:bg-blue-600 transform hover:scale-105"),children:o?(0,p.jsx)("div",{className:"w-5 h-5 border-2 border-current border-t-transparent rounded-full animate-spin"}):(0,p.jsx)(i.IkI,{className:"w-5 h-5"})})]})})]})})},_=r.memo(e=>{let{contact:s,isSelected:t,onClick:l,onDelete:a}=e;const[n,o]=(0,r.useState)(!1),c=(0,r.useRef)(null);return(0,r.useEffect)(()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,p.jsxs)("div",{className:"flex items-center p-4 hover:bg-gray-50 cursor-pointer transition-colors duration-150 ".concat(t?"bg-blue-50 border-r-2 border-blue-500":""),onClick:()=>l(s),children:[(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center overflow-hidden shadow-md\n             ".concat(null!==s&&void 0!==s&&s.isBlocked?"bg-gradient-to-br from-gray-400 to-gray-600":"bg-gradient-to-br from-blue-400 to-blue-600"),children:null!==s&&void 0!==s&&s.profile_picture_url?(0,p.jsx)("img",{src:s.profile_picture_url,alt:"Profile",className:"w-full h-full object-cover",onError:e=>{e.target.onerror=null,e.target.src="/0684456b-aa2b-4631-86f7-93ceaf33303c.png"}}):(0,p.jsx)("span",{className:"text-white text-sm font-semibold",children:(0,p.jsx)("img",{src:"/0684456b-aa2b-4631-86f7-93ceaf33303c.png",alt:"default logo"})})}),s.unread>0&&(0,p.jsx)("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full flex items-center justify-center shadow-sm",children:(0,p.jsx)("span",{className:"text-white text-xs font-medium",children:s.unread})})]}),(0,p.jsxs)("div",{className:"ml-3 flex-1 min-w-0",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between relative",ref:c,children:[(0,p.jsxs)("h3",{className:"text-sm font-medium text-[#000000E6] truncate capitalize",children:[s.first_name," ",null===s||void 0===s?void 0:s.last_name,(null===s||void 0===s?void 0:s.isBlocked)&&(0,p.jsx)("span",{className:"ml-2 text-xs text-red-500",children:"(Blocked)"})]}),(0,p.jsx)("span",{className:"text-xs text-gray-500",children:(0,d.D3)(s.latestMessageTime)}),(0,p.jsx)("button",{className:"ml-2 p-1 rounded-full hover:bg-gray-200",onClick:e=>{e.stopPropagation(),o(e=>!e)},children:(0,p.jsx)(i.sjm,{})}),n&&(0,p.jsx)("div",{className:"absolute right-0 top-6 w-28 bg-white border rounded-lg shadow-lg z-10",children:(0,p.jsx)("button",{onClick:e=>{e.stopPropagation(),a(s),o(!1)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 rounded-t-lg",children:"Delete"})})]}),(0,p.jsx)("p",{className:"text-sm truncate mt-1 ".concat(null!==s&&void 0!==s&&s.isBlocked?"text-gray-400 italic":"text-gray-600"),children:null!==s&&void 0!==s&&s.isBlocked?"You have blocked this user":s.latestMessage||"No messages yet"})]})]})});function w(e){var s,t,m;let{profileData:x,socket:h}=e;const{id:g,isConnected:v}=(0,n.g)(),b=(0,a.wA)(),[j,w]=(0,r.useState)([]),[N,k]=(0,r.useState)(null),[C,R]=(0,r.useState)(!1),[I,S]=(0,r.useState)(!1),[U,E]=(0,r.useState)([]),[P,A]=(0,r.useState)(!1),[L,M]=(0,r.useState)(!1),[B,D]=(0,r.useState)(!1),[z,F]=(0,r.useState)(!1),[T,Y]=(0,r.useState)(""),[O,H]=(0,r.useState)(""),K=(0,r.useRef)(),[V,W]=(0,r.useState)({file_url:null,file_type:null}),[Z,G]=(0,r.useState)(0),J=(0,r.useRef)(null),[$,q]=(0,r.useState)(!1),[X,Q]=(0,r.useState)(null),ee=null===x||void 0===x||null===(s=x.getProfileData)||void 0===s||null===(t=s.data)||void 0===t||null===(m=t.data)||void 0===m?void 0:m._id,se={share_id:null,share_path:"",content:"",select_date:null,select_time:null,meeting_url:"",image_urls:[],tags:[],user_details:{},job_details:{_id:null,job_type:"",job_location:"",work_location:"",pay_type:"",salary_range:"",company:{name:"",logo_url:""},industry:{name:""},job_title_details:{name:""},required_skills:[]}},te=(0,r.useCallback)(e=>{var s;const t=e._id||e.id||"temp_".concat(Date.now(),"_").concat(Math.random(),"_").concat(e.sender_id);let r="text";"shared-interview"===e.file_type?r="shared-interview":e.shared_data&&(e.shared_data.content||(null===(s=e.shared_data.image_urls)||void 0===s?void 0:s.length)>0)?r="shared-post":e.file_type?r=e.file_type:e.file_url&&(r=(e=>{if(!e)return null;const s=e.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(s)?"image":["mp4","mov","avi","mkv","webm"].includes(s)?"video":"pdf"===s?"pdf":null})(e.file_url));const i=e.replyChat?{isReplied:!0,chat_id:e.replyChat._id,reply_to:te(e.replyChat)}:{isReplied:e.isReplied||!1,chat_id:e.chat_id||null,reply_to:e.reply_to||null};return(0,l.A)((0,l.A)((0,l.A)({},e),{},{id:t,_id:e._id||t,timestamp:e.createdAt||e.timestamp||Date.now(),file_type:r,shared_data:"shared-interview"===r?(0,l.A)((0,l.A)({},se),e.shared_data):e.shared_data||{image_urls:[],content:"",tags:[],share_id:null}},i),{},{isRead:void 0!==e.isRead&&e.isRead,isPending:e.isPending||!1})},[se]),le=async()=>{A(!0);try{const e=await b((0,o.H1)()).unwrap();E((null===e||void 0===e?void 0:e.data)||[])}catch(e){console.error("Failed to fetch contacts:",e),c.oR.error("Failed to load contacts")}finally{A(!1)}};(0,r.useEffect)(()=>{le()},[b]),(0,r.useEffect)(()=>{const e=()=>{R(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{if(g||"true"===v){const e=U.find(e=>e.connectionUserId===g);e&&ne(e)}},[U,g,v]);(0,r.useEffect)(()=>{(()=>{var e;null===(e=J.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[j]);const re=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),ce())},ie=e=>{Q(e),q(!1)},ae=()=>{Q(null)},ne=(0,r.useCallback)(async e=>{if(q(!1),null!==e&&void 0!==e&&e.connectionUserId){D(!0),W({file_url:null,file_type:null}),Q(null);try{h&&null!==N&&void 0!==N&&N.connectionUserId&&h.emit("unsubscribe-from-chat",N.connectionUserId),h&&h.emit("subscribe-to-chat",e.connectionUserId),k(e),w([]);const s=await b((0,o.em)({receiver_id:e.connectionUserId,page:1,size:1e3})).unwrap(),t=((null===s||void 0===s?void 0:s.data)||[]).map(e=>{const t=te(e);if(t.isReplied&&t.chat_id){const e=s.data.find(e=>e._id===t.chat_id||e.id===t.chat_id);e&&(t.reply_to=te(e))}return t});w(t),C&&S(!0)}catch(s){console.error("Failed to load chat:",s),c.oR.error("Failed to load chat messages")}finally{D(!1)}}else c.oR.error("Invalid contact data")},[h,b,C,te]);(0,r.useEffect)(()=>()=>{V.file_url&&"string"===typeof V.file_url&&V.file_url.startsWith("blob:")&&URL.revokeObjectURL(V.file_url),h&&null!==N&&void 0!==N&&N.connectionUserId&&h.emit("unsubscribe-from-chat",N.connectionUserId)},[V.file_url,h,N]);const oe=async e=>{const s=e.target.files[0];if(!s)return;if(e.target.value=null,V.file_url&&"string"===typeof V.file_url&&V.file_url.startsWith("blob:")&&URL.revokeObjectURL(V.file_url),s.size>10485760)return void c.oR.error("File size should be less than 10MB");const t=s.name.toLowerCase(),l=/\.(png|jpg|jpeg|gif|webp)$/.test(t),r=/\.pdf$/.test(t),i=/\.(mp4|mov|avi|mkv|webm)$/.test(t);if(!l&&!r&&!i)return void c.oR.error("Unsupported file type. Please upload an image, PDF, or video.");let a=null;l||i?(a=URL.createObjectURL(s),W({file_url:a,file_type:l?"image":"video"})):r&&W({file_url:s.name,file_type:"pdf"}),M(!0),G(0);try{var n,o;let e;const t=e=>{const s=Math.round(100*e.loaded/e.total);G(s)};if(l?e=await(0,d.pv)(s,"CHAT_MEDIA",t):r?e=await(0,d.It)(s,"CHAT_MEDIA",t):i&&(e=await(0,d.Dp)(s,"CHAT_MEDIA",t)),null===(n=e)||void 0===n||null===(o=n.data)||void 0===o||!o.imageURL)throw new Error("Upload failed");W({file_url:e.data.imageURL,file_type:l?"image":r?"pdf":"video"}),c.oR.success("File uploaded successfully")}catch(u){console.error("Upload error:",u),W({file_url:null,file_type:null}),c.oR.error((null===u||void 0===u?void 0:u.message)||"Failed to upload file")}finally{M(!1),G(0)}},ce=(0,r.useCallback)(async()=>{if(q(!1),null===N||void 0===N||!N.connectionUserId)return void c.oR.error("No contact selected");if(!T.trim()&&!V.file_url||z)return;F(!0);const e=T.trim();try{const s={id:"temp_".concat(Date.now(),"_").concat(Math.random(),"_").concat(ee),receiverId:N.connectionUserId,receiver_id:N.connectionUserId,sender_id:ee,message:e,file_url:V.file_url||null,file_type:V.file_url?V.file_type:"text",timestamp:Date.now(),createdAt:Date.now(),isRead:!1,isPending:!0,shared_data:{image_urls:[],content:"",tags:[],share_id:null},isReplied:!!X,chat_id:(null===X||void 0===X?void 0:X._id)||null,reply_to:X||null},t=te(s);if(w(e=>[...e,t]),Y(""),W({file_url:null,file_type:null}),Q(null),!h)throw new Error("Socket not available");h.emit("send-chat-message",s),h.on("message-delivered",e=>{w(s=>{const t=[...s],r=t.findIndex(e=>!0===e.isPending);return-1!==r&&(t[r]=(0,l.A)((0,l.A)({},t[r]),{},{_id:e._id})),t})})}catch(s){console.error("Send message error:",s),c.oR.error("Failed to send message"),w(e=>e.filter(e=>!e.isPending))}finally{F(!1)}},[T,N,h,ee,V,z,X]);(0,r.useEffect)(()=>{if(!h)return;const e=e=>{if(!N)return;if(!(e.receiver_id===ee&&e.sender_id===N.connectionUserId||e.sender_id===ee&&e.receiver_id===N.connectionUserId))return;const s=te(e);w(t=>{const l=t.filter(s=>!s.isPending||s.message!==e.message||s.file_url!==e.file_url||s.sender_id!==e.sender_id);return l.some(e=>{if(e._id===s._id&&s._id!==s.id)return!0;if("shared-post"===s.file_type&&"shared-post"===e.file_type){const t=Math.abs((e.timestamp||e.createdAt)-(s.timestamp||s.createdAt)),l=JSON.stringify(e.shared_data)===JSON.stringify(s.shared_data),r=e.sender_id===s.sender_id,i=e.receiver_id===s.receiver_id;if(t<1e3&&l&&r&&i)return!0}return!1})?l:[...l,s]}),e._id&&e.receiver_id===ee&&h.emit("mark-as-read",{chatId:e._id})};return h.on("receive-message",e),()=>{h.off("receive-message",e)}},[h,ee,N,te]);const de=()=>{S(!1),k(null),W({file_url:null,file_type:null}),Q(null)},ue=(0,r.useMemo)(()=>U.filter(e=>{var s,t;return(null===(s=e.first_name)||void 0===s?void 0:s.toLowerCase().includes(O.toLowerCase()))||(null===(t=e.last_name)||void 0===t?void 0:t.toLowerCase().includes(O.toLowerCase()))}),[U,O]),me=()=>{q(!$)},xe=async e=>{if(q(!1),"BLOCK"===e){const e=null!==N&&void 0!==N&&N.isBlocked?"unblock":"block";let t={user_id:null===N||void 0===N?void 0:N.connectionUserId,status:e};try{const e=await b((0,o.xw)(t)).unwrap();k(e=>(0,l.A)((0,l.A)({},e),{},{isBlocked:!e.isBlocked})),E(e=>e.map(e=>e.connectionUserId===N.connectionUserId?(0,l.A)((0,l.A)({},e),{},{isBlocked:!1,isBlockedByYou:!1}):e));const s=await b((0,o.H1)()).unwrap();E((null===s||void 0===s?void 0:s.data)||[]),c.oR.info(null===e||void 0===e?void 0:e.message)}catch(s){c.oR.error(s)}}else"CLEAR"===e?(await b((0,o.zn)({receiver_id:null===N||void 0===N?void 0:N.connectionUserId})).unwrap(),w([]),Q(null)):c.oR.info("Ops something went wrong")},he=()=>B?(0,p.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,p.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):0===j.length?(0,p.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(0,p.jsx)("div",{className:"text-gray-500 text-sm",children:"No messages yet"}),(0,p.jsx)("div",{className:"text-gray-400 text-xs mt-1",children:"Send a message to start the conversation"})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"text-center mb-4",children:(0,p.jsx)("span",{className:"text-xs text-gray-500 bg-white px-3 py-1 rounded-full shadow-sm",children:"Today"})}),j.map(e=>(0,p.jsx)(f,{msg:e,isOwn:e.sender_id===ee,onReply:ie,messages:j,user_id:N},e.id||e._id)),(0,p.jsx)("div",{ref:J})]}),ge=async e=>{try{const s=await b((0,o.Gx)({connection_user_id:null===e||void 0===e?void 0:e.connectionUserId})).unwrap();s&&c.oR.success((null===s||void 0===s?void 0:s.message)||"User disconnected!"),le()}catch(s){c.oR.error("Failed to disconnect")}};var pe;return C?(0,p.jsx)("div",{className:"h-screen bg-white flex flex-col",children:I?(0,p.jsxs)("div",{className:"h-full flex flex-col",children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-white sticky top-0 z-10",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,p.jsx)("button",{onClick:de,className:"p-1",children:(0,p.jsx)(i.OLK,{className:"w-5 h-5 text-gray-600"})}),(0,p.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center",children:(0,p.jsx)("span",{className:"text-white text-sm font-semibold",children:((null===N||void 0===N||null===(pe=N.first_name)||void 0===pe?void 0:pe[0])||"?").toUpperCase()})}),(0,p.jsx)("div",{children:(0,p.jsxs)("h2",{className:"text-base font-semibold text-[#000000E6] capitalize",children:[null===N||void 0===N?void 0:N.first_name," ",null===N||void 0===N?void 0:N.last_name]})})]}),(0,p.jsx)("div",{className:"flex items-center space-x-4",children:(0,p.jsx)("button",{className:"p-1 hover:bg-gray-100 rounded-full",children:(0,p.jsx)(u.ZZB,{className:"w-5 h-5 text-gray-600",onClick:()=>me()})})}),$&&(0,p.jsx)("div",{className:"absolute md:right-0 right-[40px] md:mt-20 mt-16 w-32 bg-white border border-gray-200 rounded-xl shadow-lg z-50 transform transition-all duration-200 ease-in-out",children:(0,p.jsxs)("ul",{className:"text-xs font-medium divide-y divide-gray-100",children:[(0,p.jsx)("li",{className:"px-4 py-1.5 cursor-pointer hover:bg-gray-50 hover:text-red-500 flex items-center gap-2 transition-colors duration-150",onClick:()=>xe("BLOCK"),children:null!==N&&void 0!==N&&N.isBlocked?"UnBlock":"Block"}),(0,p.jsx)("li",{className:"px-4 py-1.5 cursor-pointer hover:bg-gray-50 hover:text-blue-500 flex items-center gap-2 transition-colors duration-150",onClick:()=>xe("CLEAR"),children:"Clear"})]})})]}),(0,p.jsx)("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-200",children:he()}),(0,p.jsx)(y,{fileInputRef:K,handleFileChange:oe,messageInput:T,setMessageInput:Y,handleKeyPress:re,sendingMessage:z,handleSendMessage:ce,mediaPreview:V,setMediaPreview:W,uploadProgress:Z,loading:P,contacts:N,replyingTo:X,cancelReply:ae})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"p-4 border-b border-gray-200 sticky top-0 bg-white z-10",children:[(0,p.jsx)("h1",{className:"text-xl font-bold text-[#000000E6]",children:"Messages"}),(0,p.jsxs)("div",{className:"relative mt-2",children:[(0,p.jsx)(i.iyI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,p.jsx)("input",{type:"text",value:O,onChange:e=>H(e.target.value),placeholder:"Search conversations...",className:"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,p.jsx)("div",{className:"flex-1 overflow-y-auto",children:P?(0,p.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,p.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):ue.length>0?ue.map(e=>(0,p.jsx)(_,{contact:e,onClick:ne},e.connectionUserId)):(0,p.jsxs)("div",{className:"flex flex-col items-center justify-center h-64",children:[(0,p.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,p.jsx)(i.iyI,{className:"w-8 h-8 text-gray-400"})}),(0,p.jsx)("p",{className:"text-gray-500 text-center",children:"No conversations found"})]})})]})}):(0,p.jsx)("div",{className:"h-[92vh] bg-gray-50 p-4",children:(0,p.jsx)("div",{className:"bg-white h-full rounded-xl shadow-sm overflow-hidden",children:(0,p.jsxs)("div",{className:"flex h-full",children:[(0,p.jsxs)("div",{className:"w-1/3 border-r border-gray-200 flex flex-col",children:[(0,p.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,p.jsx)("h1",{className:"text-xl font-bold text-[#000000E6]",children:"Messages"}),(0,p.jsxs)("div",{className:"relative mt-3",children:[(0,p.jsx)(i.iyI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,p.jsx)("input",{type:"text",value:O,onChange:e=>H(e.target.value),placeholder:"Search conversations...",className:"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,p.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:P?(0,p.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,p.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):ue.length>0?ue.map(e=>(0,p.jsx)(_,{contact:e,isSelected:(null===N||void 0===N?void 0:N.connectionUserId)===e.connectionUserId,onClick:ne,onDelete:ge},e.connectionUserId)):(0,p.jsxs)("div",{className:"flex flex-col items-center justify-center h-64",children:[(0,p.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:(0,p.jsx)(i.iyI,{className:"w-8 h-8 text-gray-400"})}),(0,p.jsx)("p",{className:"text-gray-500 text-center",children:"No conversations found"})]})})]}),(0,p.jsx)("div",{className:"flex-1 flex flex-col",children:N?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 relative",children:[(0,p.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,p.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-blue-600 rounded-full flex items-center justify-center",children:null!==N&&void 0!==N&&N.profile_picture_url?(0,p.jsx)("img",{src:null===N||void 0===N?void 0:N.profile_picture_url,alt:"user",className:"rounded-full"}):(0,p.jsx)("span",{className:"text-white text-sm font-semibold rounded-full",children:(0,p.jsx)("img",{src:"/0684456b-aa2b-4631-86f7-93ceaf33303c.png",alt:"default logo",className:"rounded-full"})})}),(0,p.jsx)("div",{children:(0,p.jsxs)("h2",{className:"text-lg font-semibold text-[#000000E6] capitalize",children:[N.first_name," ",N.last_name]})})]}),(0,p.jsx)("div",{className:"flex items-center space-x-4",children:(0,p.jsx)("button",{className:"p-1 hover:bg-gray-100 rounded-full",children:(0,p.jsx)(u.ZZB,{className:"w-5 h-5 text-gray-600",onClick:()=>me()})})}),$&&(0,p.jsx)("div",{className:"absolute md:right-0 right-[88px] md:mt-20 mt-16 w-32 bg-white border border-gray-200 rounded-xl shadow-lg z-50 transform transition-all duration-200 ease-in-out",children:(0,p.jsxs)("ul",{className:"text-xs font-medium divide-y divide-gray-100",children:[(0,p.jsx)("li",{className:"px-4 py-1.5 cursor-pointer hover:bg-gray-50 hover:text-red-500 flex items-center gap-2 transition-colors duration-150",onClick:()=>xe("BLOCK"),children:null!==N&&void 0!==N&&N.isBlocked?"UnBlock":"Block"}),(0,p.jsx)("li",{className:"px-4 py-1.5 cursor-pointer hover:bg-gray-50 hover:text-blue-500 flex items-center gap-2 transition-colors duration-150",onClick:()=>xe("CLEAR"),children:"Clear"})]})})]}),(0,p.jsx)("div",{className:"flex-1 overflow-y-auto p-4 bg-gray-200",children:he()}),(0,p.jsx)(y,{fileInputRef:K,handleFileChange:oe,messageInput:T,setMessageInput:Y,handleKeyPress:re,sendingMessage:z,handleSendMessage:ce,mediaPreview:V,setMediaPreview:W,uploadProgress:Z,loading:L,contacts:N,replyingTo:X,cancelReply:ae})]}):(0,p.jsx)("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:(0,p.jsxs)("div",{className:"text-center p-6 max-w-md",children:[(0,p.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-100 to-blue-200 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,p.jsx)(i.iyI,{className:"w-10 h-10 text-blue-500"})}),(0,p.jsx)("h3",{className:"text-xl font-semibold text-[#000000E6] mb-2",children:"Select a chat to start messaging"}),(0,p.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Choose from your existing conversations or start a new one"})]})})})]})})})}}}]);
//# sourceMappingURL=937.eed35d5c.chunk.js.map