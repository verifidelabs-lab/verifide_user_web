"use strict";(self.webpackChunkcomfygen_react_new_base_folder=self.webpackChunkcomfygen_react_new_base_folder||[]).push([[307],{1307:(e,t,s)=>{s.r(t),s.d(t,{default:()=>C});var i=s(9379),l=s(5043),o=s(9804),a=s(8214),n=s(3974),d=s(3003),r=s(4272),c=s(152),u=s(6328),_=s(5413),p=s(9981),v=s(10),m=s(8059),y=s(8454),h=s(9461),b=s(693),g=s(8155),x=s(9442),j=s(3537),f=s(130),q=s(579);const A=e=>{var t;let{allCompanies:s,allIndustry:l,formData:o,setFormData:n,handleInputChange:d,handleSelectChange:r,errors:c,setAddModalState:u,countryList:_,handleLocationSelectChange:p,getNestedValue:v,stateList:m,citiesList:y,setInputField:h,isCreatableIndustry:b,getSelectedOption:A}=e;return console.log(null===o||void 0===o?void 0:o.start_date),(0,q.jsxs)("div",{className:"space-y-8",children:[(0,q.jsxs)("div",{className:"glassy-card p-4 rounded-2xl shadow-sm border border-gray-100 space-y-4",children:[(0,q.jsx)("h2",{className:"text-lg font-semibold glassy-text-primary capitalize border-b pb-2",children:"Company & Industry"}),(0,q.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,q.jsx)("div",{className:"col-span-2",children:(0,q.jsx)(j.A,{options:s||[],label:"Company Name",className:"w-full",placeholder:"Select Company",onChange:e=>r("company_id",e),selectedOption:s.find(e=>e.value===o.company_id),required:!0,error:null===c||void 0===c?void 0:c.company_id,onCreateOption:(e,t)=>{console.log("this is the inputalue and field",t,e),u({isOpen:!0,type:"companies",field:t}),h(t=>(0,i.A)((0,i.A)({},t),{},{name:e}))},isClearable:!0,isCreatedByUser:!0,isDisabled:o.company_id})}),(0,q.jsxs)("div",{className:"col-span-2 grid grid-cols-2 gap-3",children:[(0,q.jsx)(j.A,{label:"Industry Name",name:"industry_id",placeholder:"Select Industry",options:l,selectedOption:A(l,null===o||void 0===o?void 0:o.industry_id),onChange:e=>r("industry_id",e),error:c.industry_id,className:"w-full h-10",required:!0,onCreateOption:(e,t)=>{u({isOpen:!0,type:"industries",field:t}),h(t=>(0,i.A)((0,i.A)({},t),{},{name:e}))},isClearable:!0,isDisabled:!(null!==o&&void 0!==o&&o.company_id),disabledTooltip:"Please select first Company",isCreatedByUser:b}),(0,q.jsx)(a.A,{type:"number",value:null===o||void 0===o?void 0:o.current_openings,label:"Available Opening",onChange:e=>d("current_openings",e.target.value),name:"current_openings",className:"w-full h-10 border rounded-lg px-4",placeholder:"Enter number of available posts ",required:!0,error:null===c||void 0===c?void 0:c.current_openings})]})]})]}),(0,q.jsxs)("div",{className:"glassy-card p-4 rounded-2xl shadow-sm border border-gray-100 space-y-4",children:[(0,q.jsx)("h2",{className:"text-lg font-semibold glassy-text-primary capitalize border-b pb-2",children:"Job Details"}),(0,q.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,q.jsx)(j.A,{label:"Job Type",options:(null===f||void 0===f?void 0:f.Job_Type_List)||[],placeholder:"Select Job Type",onChange:e=>r("job_type",e),selectedOption:null===f||void 0===f?void 0:f.Job_Type_List.find(e=>e.value===o.job_type),required:!0,error:null===c||void 0===c?void 0:c.job_type}),(0,q.jsx)(j.A,{label:"Location Type",options:(null===f||void 0===f?void 0:f.Job_Location_List)||[],placeholder:"Select Location",onChange:e=>r("job_location",e),selectedOption:null===f||void 0===f?void 0:f.Job_Location_List.find(e=>e.value===o.job_location),required:!0,error:null===c||void 0===c?void 0:c.job_location}),(0,q.jsx)(j.A,{label:"Pay Type",options:(null===f||void 0===f?void 0:f.Job_Pay_Type_List)||[],placeholder:"Select Pay Type",onChange:e=>r("pay_type",e),selectedOption:null===f||void 0===f?void 0:f.Job_Pay_Type_List.find(e=>e.value===o.pay_type),required:!0,error:null===c||void 0===c?void 0:c.pay_type})]}),(0,q.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[!("internship"===o.job_type||"unpaid"===o.pay_type)&&(0,q.jsx)(a.A,{label:"Salary Range",placeholder:"e.g. \u20b930,000 - \u20b950,000",value:o.salary_range,onChange:e=>d("salary_range",e.target.value),required:!0,error:null===c||void 0===c?void 0:c.salary_range,className:"h-10 w-full"}),(0,q.jsx)(x.A,{label:"Start Date",value:null===o||void 0===o?void 0:o.start_date,onChange:e=>d("start_date",e.target.value),required:!0,error:null===c||void 0===c?void 0:c.start_date,allowPastDate:!1}),(0,q.jsx)(x.A,{label:"End Date",value:null===o||void 0===o?void 0:o.end_date,onChange:e=>d("end_date",e.target.value),required:!0,error:null===c||void 0===c?void 0:c.end_date,allowPastDate:!1,minDateOverride:null===o||void 0===o?void 0:o.start_date})]})]}),(0,q.jsxs)("div",{className:"glassy-card p-4 rounded-2xl shadow-sm border border-gray-100 space-y-4",children:[(0,q.jsx)("h2",{className:"text-lg font-semibold glassy-text-primary capitalize border-b pb-2",children:"Location"}),(0,q.jsxs)("div",{className:"grid md:grid-cols-4 gap-4",children:[(0,q.jsx)(g.A,{label:"Country",selectedOption:(null===_||void 0===_?void 0:_.find(e=>e.label===v(o,"address.country.name")))||null,onChange:e=>p("country",e),options:_||[],required:!0,isClearable:!1,error:null===c||void 0===c?void 0:c.country}),(0,q.jsx)(g.A,{label:"State",selectedOption:(null===m||void 0===m?void 0:m.find(e=>e.label===v(o,"address.state.name")))||null,onChange:e=>p("state",e),options:m||[],required:!0,isClearable:!1,error:null===c||void 0===c?void 0:c.state}),(0,q.jsx)(g.A,{label:"City",selectedOption:(null===y||void 0===y?void 0:y.find(e=>(null===e||void 0===e?void 0:e.label)===v(o,"address.city.name")))||null,onChange:e=>p("city",e),options:y||[],required:!0,isClearable:!1,error:null===c||void 0===c?void 0:c.city}),(0,q.jsx)(a.A,{label:"Pin Code",placeholder:"e.g. 696969",value:null===o||void 0===o||null===(t=o.address)||void 0===t?void 0:t.pin_code,className:"w-full h-10",onChange:e=>n(t=>(0,i.A)((0,i.A)({},t),{},{address:(0,i.A)((0,i.A)({},t.address),{},{pin_code:e.target.value})})),required:!0,error:null===c||void 0===c?void 0:c.pin_code})]})]})]})},k=e=>{let{handleSelectChange:t,allProfileRoles:s,allSkills:l,formData:a,errors:n,setAddModalState:d,handleInputChange:r,selectedSkills:c,removeSkill:u,handleSkillSelect:_,isCreatableIndustry:p,getSelectedOption:v,setInputField:m}=e;return(0,q.jsx)("div",{children:(0,q.jsxs)("div",{className:"space-y-6",children:[(0,q.jsx)(j.A,{label:"Job Title",name:"job_title",placeholder:"Select Position",options:s,selectedOption:v(s,null===a||void 0===a?void 0:a.job_title),onChange:e=>t("job_title",e),error:n.job_title,className:"w-full h-10",required:!0,onCreateOption:(e,t)=>{d({isOpen:!0,type:"profile-roles",field:t}),m(t=>(0,i.A)((0,i.A)({},t),{},{name:e}))},isClearable:!0,isDisabled:!(null!==a&&void 0!==a&&a.industry_id),disabledTooltip:"Please select first Industry",isCreatedByUser:!!p}),(0,q.jsxs)("div",{children:[(0,q.jsxs)("label",{className:"block text-sm font-medium glassy-text-primary mb-2",children:["Job Description ",(0,q.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,q.jsx)("textarea",{value:a.job_description,onChange:e=>r("job_description",e.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Describe the job role and what you're looking for in a candidate..."}),(0,q.jsx)("p",{className:"text-xs glassy-text-secondary mt-1",children:"Tell people about this position and what you're looking for. For example, what they'll be doing on a typical day, why they should be interested, and requirements you may have."}),(0,q.jsx)("p",{className:"text-xs text-red-600",children:null===n||void 0===n?void 0:n.job_description})]}),(0,q.jsxs)("div",{children:[(0,q.jsx)(j.A,{label:"Skills Required ",options:l||[],name:"required_skills",className:"w-full h-10",placeholder:"Select skills",onChange:_,required:!0,error:null===n||void 0===n?void 0:n.required_skills,selectedOption:c,onCreateOption:(e,t)=>{console.log("this is the inputalue and field",t,e),d({isOpen:!0,type:"skill",field:t}),m(t=>(0,i.A)((0,i.A)({},t),{},{name:e}))},isClearable:!0,isCreatedByUser:!0}),(0,q.jsx)("div",{className:"flex flex-wrap gap-2 mt-3",children:c.map((e,t)=>(0,q.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm glassy-card text-blue-800",children:[e.label,(0,q.jsx)("button",{onClick:()=>u(e.value),className:"ml-2 hover:text-blue-600",children:(0,q.jsx)(o.Gsv,{className:"h-4 w-4"})})]},t))})]})]})})};s(5167),s(9796);const C=()=>{var e,t,s,g,x,j,f,C,N,w,S,O,D,E,I,L,P,J,T;const{id:R}=(0,p.g)(),F=(0,d.wA)(),M=(0,p.Zp)(),B=(0,d.d4)(e=>{var t,s,i;return(null===(t=e.companyAuth)||void 0===t||null===(s=t.companiesProfileData)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.data)||{}});console.log("this is te company prifie data",B),console.log("This is the company");const K=(0,d.d4)(e=>e.work),Q=(0,d.d4)(e=>e.global),G=(0,d.d4)(e=>e.global),V=(0,r.eu)((null===K||void 0===K||null===(e=K.getAllCompaniesData)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data)||[]),z=(0,r.Kj)((null===K||void 0===K||null===(s=K.getAllIndustryData)||void 0===s||null===(g=s.data)||void 0===g?void 0:g.data)||[]),U=(0,r.Kj)((null===Q||void 0===Q||null===(x=Q.masterSkillsData)||void 0===x||null===(j=x.data)||void 0===j||null===(f=j.data)||void 0===f?void 0:f.list)||[]),W=(0,r.Kj)((null===K||void 0===K||null===(C=K.getAllProfileRoleData)||void 0===C||null===(N=C.data)||void 0===N?void 0:N.data)||[]);console.log("this is the prifiles roles",W);const X=(0,r.Kj)((null===G||void 0===G||null===(w=G.countriesData)||void 0===w||null===(S=w.data)||void 0===S?void 0:S.data)||[]),Z=(0,r.Kj)((null===G||void 0===G||null===(O=G.stateData)||void 0===O||null===(D=O.data)||void 0===D?void 0:D.data)||[]),$=(0,r.Kj)((null===G||void 0===G||null===(E=G.citiesData)||void 0===E||null===(I=E.data)||void 0===I?void 0:I.data)||[]),[H,Y]=(0,l.useState)(1),[ee,te]=(0,l.useState)(!1),[se,ie]=(0,l.useState)(!1),[le,oe]=(0,l.useState)((0,v.Ri)("ACCESS_MODE")),[ae,ne]=(0,l.useState)([]),[de,re]=(0,l.useState)([{question:"",question_type:"single_choice",options:[],option_format:"alphabetically",correct_options:[],verification_type:"auto",time_limit:2}]),[ce,ue]=(0,l.useState)({}),[_e,pe]=(0,l.useState)({name:"",logo_url:""}),[ve,me]=(0,l.useState)({isOpen:!1,type:"",field:""});console.log("this is the addModalState",ve);const[ye,he]=(0,l.useState)({company_id:B._id||"",industry_id:"",job_type:"",job_location:"",pay_type:"",salary_range:"",job_title:"",job_description:"",start_date:"",end_date:"",current_openings:"",required_skills:[],address:{country:{name:"",dial_code:"",short_name:"",emoji:"\ud83c\uddee"},state:{name:"",code:""},city:{name:""},pin_code:""},screening_questions:[],isDisable:!1,isShareAsPost:!1});(0,l.useEffect)(()=>{he((0,i.A)((0,i.A)({},ye),{},{company_id:null===B||void 0===B?void 0:B._id}))},[null===B||void 0===B?void 0:B._id]);const[be,ge]=(0,l.useState)(!0),{handleLocationSelectChange:xe}=(0,b.I)(he,ye,ue);(0,l.useEffect)(()=>{const e=()=>{const e=(0,v.Ri)("ACCESS_MODE");(0,v.Ri)("ACTIVE_MODE");oe(e),5===e&&M("/user/opportunitiess")};return e(),window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[M]);const je=(0,l.useCallback)((e,t)=>{if(!t)return null;const s=t._id?t._id:t;return e.find(e=>e.value===s)||null},[]);(0,l.useEffect)(()=>{F((0,n.f$)()),F((0,c.Xr)())},[F]),(0,l.useEffect)(()=>{F((0,n.a_)({company_id:null===B||void 0===B?void 0:B._id,created_by_users:null===B||void 0===B?void 0:B.created_by_users}))},[F,null===B||void 0===B?void 0:B._id]);const fe=(0,l.useCallback)(e=>{if(U.length>0&&e.length>0){const t=U.filter(t=>e.includes(t.value));ne(t)}},[U]),qe=null===ye||void 0===ye||null===(L=ye.address)||void 0===L||null===(P=L.country)||void 0===P?void 0:P.short_name,Ae=null===ye||void 0===ye||null===(J=ye.address)||void 0===J||null===(T=J.state)||void 0===T?void 0:T.name,ke=(0,l.useCallback)(async()=>{try{var e,t,s,l,o,a,d,r;const u=await F((0,c.Sk)({_id:R||B._id,populate:"company_id:created_by_users|industry_id:created_by_users"})).unwrap(),x=null===u||void 0===u?void 0:u.data,j=x.work_location||x.address||{country:{name:"",dial_code:"",short_name:"",emoji:"\ud83c\uddee"},state:{name:"",code:""},city:{name:""},pin_code:""};var _,p,v,m,y,h,b,g;if(he((0,i.A)((0,i.A)({},x),{},{address:j,company_id:null===u||void 0===u||null===(e=u.data)||void 0===e||null===(t=e.company_id)||void 0===t?void 0:t._id,industry_id:null===u||void 0===u||null===(s=u.data)||void 0===s||null===(l=s.industry_id)||void 0===l?void 0:l._id,start_date:null!==u&&void 0!==u&&null!==(o=u.data)&&void 0!==o&&o.start_date?new Date(u.data.start_date).toISOString().split("T")[0]:"",end_date:null!==u&&void 0!==u&&null!==(a=u.data)&&void 0!==a&&a.end_date?new Date(u.data.end_date).toISOString().split("T")[0]:""})),null!==u&&void 0!==u&&null!==(d=u.data)&&void 0!==d&&d.company_id)F((0,n.a_)({company_id:null===u||void 0===u||null===(_=u.data)||void 0===_||null===(p=_.company_id)||void 0===p?void 0:p._id,created_by_users:null===u||void 0===u||null===(v=u.data)||void 0===v||null===(m=v.company_id)||void 0===m?void 0:m.created_by_users}));if(null!==u&&void 0!==u&&null!==(r=u.data)&&void 0!==r&&r.industry_id)F((0,n.JL)({industry_id:null===u||void 0===u||null===(y=u.data)||void 0===y||null===(h=y.industry_id)||void 0===h?void 0:h._id,created_by_users:null===u||void 0===u||null===(b=u.data)||void 0===b||null===(g=b.industry_id)||void 0===g?void 0:g.created_by_users}));x.screening_questions&&x.screening_questions.length>0&&re(x.screening_questions),x.required_skills&&x.required_skills.length>0&&fe(x.required_skills)}catch(x){console.error("Error fetching job data:",x),u.oR.error((null===x||void 0===x?void 0:x.message)||"Failed to fetch job data")}},[R,B,F]);(0,l.useEffect)(()=>{qe&&F((0,c.wk)({country_code:qe})),Ae&&F((0,c.E8)({state_name:Ae}))},[F,qe,Ae]),(0,l.useEffect)(()=>{R&&ke()},[R,ke]),(0,l.useEffect)(()=>{R&&U.length>0&&ye.required_skills.length>0&&0===ae.length&&fe(ye.required_skills)},[U,ye.required_skills,R,fe,ae.length]);const Ce=e=>{const t={};var s,i,l,o,a,n,d;1===e&&(ye.company_id||(t.company_id="Company is required"),ye.industry_id||(t.industry_id="Industry is required"),ye.job_type||(t.job_type="Job type is required"),ye.job_location||(t.job_location="Job location is required"),ye.pay_type||(t.pay_type="Pay type is required"),ye.salary_range||"internship"===ye.job_type||"unpaid"===ye.pay_type||(t.salary_range="Salary range is required"),ye.start_date||(t.start_date="Start date is required"),ye.end_date||(t.end_date="End date is required"),ye.current_openings||(t.current_openings="current opening is required"),null!==(s=ye.address)&&void 0!==s&&null!==(i=s.country)&&void 0!==i&&i.name||(t.country="Country is required"),null!==(l=ye.address)&&void 0!==l&&null!==(o=l.state)&&void 0!==o&&o.name||(t.state="State is required"),null!==(a=ye.address)&&void 0!==a&&null!==(n=a.city)&&void 0!==n&&n.name||(t.city="City is required"),null!==(d=ye.address)&&void 0!==d&&d.pin_code||(t.pin_code="Pin No is required"));return 2===e&&(ye.job_title||(t.job_title="Job title is required"),ye.job_description||(t.job_description="Job description is required"),ye.job_description&&ye.job_description.length<50&&(t.job_description="Description should be at least 50 characters"),0===ye.required_skills.length&&(t.required_skills="At least one skill is required")),3===e&&(0===de.length?t.screening_questions="At least one screening question is required":de.forEach((e,s)=>{e.question&&""!==e.question.trim()||(t["screening_question_".concat(s)]="Question is required"),"theoretical"!==e.question_type&&(e.options.length<2&&(t["screening_options_".concat(s)]="At least two options are required"),e.options.forEach((e,i)=>{e&&""!==e.trim()||(t["screening_option_".concat(s,"_").concat(i)]="Option cannot be empty")}),0===e.correct_options.length&&(t["screening_correct_".concat(s)]="At least one correct option is required"))})),ue(t),0===Object.keys(t).length},Ne=(e,t)=>{he(s=>{const l=(0,i.A)((0,i.A)({},s),{},{[e]:t||""});let o=(0,i.A)({},ce);if("start_date"===e&&s.end_date){const e=new Date(t);new Date(s.end_date)<e&&(l.end_date="",o.end_date="End date cleared because it was before Start date")}if(l.start_date&&l.end_date){const e=new Date(l.start_date);new Date(l.end_date)<e?o.end_date="End date cannot be before Start date":(delete o.start_date,delete o.end_date)}return ue(o),l}),ce[e]&&ue(t=>{const s=(0,i.A)({},t);return delete s[e],s})},we=async(e,t)=>{const s=(null===t||void 0===t?void 0:t.value)||"";switch(he(t=>(0,i.A)((0,i.A)({},t),{},{[e]:s})),console.log("field, selectedOption",e,t),"company_id"===e&&ge(!0),e){case"institution_id":await F((0,y.Q_)({institution_id:s,created_by_users:null===t||void 0===t?void 0:t.created_by_users}));break;case"degree_id":await F((0,y.BB)({degree_id:s,created_by_users:null===t||void 0===t?void 0:t.created_by_users}));break;case"field_of_studies":await F((0,y.P8)({study_id:s,created_by_users:null===t||void 0===t?void 0:t.created_by_users}));break;case"company_id":await F((0,n.a_)({company_id:s,created_by_users:null===t||void 0===t?void 0:t.created_by_users}));break;case"industry_id":await F((0,n.JL)({industry_id:s,created_by_users:null===t||void 0===t?void 0:t.created_by_users}));break;case"profile_role_id":await F((0,n.O_)({profile_role_id:s,created_by_users:null===t||void 0===t?void 0:t.created_by_users}))}ce[e]&&ue(t=>{const s=(0,i.A)({},t);return delete s[e],s})},Se=e=>{e&&!ye.required_skills.includes(e.value)&&(he(t=>(0,i.A)((0,i.A)({},t),{},{required_skills:[...t.required_skills,e.value]})),ne(t=>[...t,e]),ce.required_skills&&ue(e=>{const t=(0,i.A)({},e);return delete t.required_skills,t}))},Oe=e=>{he(t=>(0,i.A)((0,i.A)({},t),{},{required_skills:t.required_skills.filter(t=>t!==e)})),ne(t=>t.filter(t=>t.value!==e))},De=(e,t,s)=>{const l=[...de];"question_type"===t?(l[e][t]=s,"theoretical"===s?(l[e].options=[],l[e].correct_options=[]):(l[e].options||(l[e].options=[]),l[e].correct_options||(l[e].correct_options=[]))):"options"===t?(l[e].options=s,l[e].correct_options=l[e].correct_options.filter(e=>s.includes(e))):l[e][t]=s,re(l),"question"===t&&ce["screening_question_".concat(e)]&&ue(t=>{const s=(0,i.A)({},t);return delete s["screening_question_".concat(e)],s})},Ee=()=>{re([...de,{question:"",question_type:"single_choice",options:[],correct_options:[],option_format:"alphabetically",verification_type:"auto",time_limit:2}])},Ie=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const i=t.split(".");let l=e;for(const a of i){var o;if(l=null===(o=l)||void 0===o?void 0:o[a],void 0===l)return s}return l||s};return(0,q.jsxs)("div",{className:"p-4",children:[(0,q.jsx)("div",{className:"min-h-screen",children:(0,q.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,q.jsxs)("div",{className:"",children:[(0,q.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,q.jsx)("button",{onClick:()=>M(-1),className:"p-1 rounded hover:glassy-card",children:(0,q.jsx)(o.OLK,{size:32})}),(0,q.jsx)("h1",{className:"text-2xl font-semibold glassy-text-primary",children:R?"Edit Job":"Post a Job"}),(0,q.jsxs)("span",{className:"text-sm glassy-text-secondary",children:[H,"/3"]})]}),(0,q.jsxs)("div",{className:"mb-8",children:[1===H&&(0,q.jsx)("div",{className:"space-y-3",children:(0,q.jsx)(A,{allCompanies:V,allIndustry:z,formData:ye,setFormData:he,handleInputChange:Ne,handleSelectChange:we,errors:ce,setAddModalState:me,countryList:X,handleLocationSelectChange:xe,getNestedValue:Ie,stateList:Z,citiesList:$,setInputField:pe,isCreatableIndustry:be,getSelectedOption:je})}),2===H&&(0,q.jsx)(k,{handleSelectChange:we,allProfileRoles:W,allSkills:U,formData:ye,errors:ce,setAddModalState:me,handleInputChange:Ne,selectedSkills:ae,removeSkill:Oe,handleSkillSelect:Se,setInputField:pe,isCreatableIndustry:be,getSelectedOption:je}),3===H&&(0,q.jsxs)("div",{className:"space-y-6",children:[(0,q.jsxs)("div",{children:[(0,q.jsxs)("label",{className:"block text-sm font-medium glassy-text-primary mb-4",children:["Screening Questions ",(0,q.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,q.jsx)("p",{className:"text-sm glassy-text-secondary mb-4",children:"Add screening questions to filter candidates. All questions are required."}),ce.screening_questions&&(0,q.jsx)("p",{className:"text-sm text-red-500 mb-4 bg-red-50 p-2 rounded-md",children:ce.screening_questions}),de.map((e,t)=>{const s=ce["screening_question_".concat(t)],l=ce["screening_options_".concat(t)],n=ce["screening_correct_".concat(t)];return(0,q.jsxs)("div",{className:"mb-6 p-4 border rounded-lg ".concat(s||l||n?"border-red-300 bg-red-50":"border-gray-200"),children:[(0,q.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,q.jsxs)("h3",{className:"font-medium",children:["Question ",t+1," ",(0,q.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,q.jsx)("button",{onClick:()=>(e=>{const t=[...de];t.splice(e,1),re(t);const s=(0,i.A)({},ce);Object.keys(s).forEach(t=>{(t.startsWith("screening_question_".concat(e))||t.startsWith("screening_options_".concat(e))||t.startsWith("screening_correct_".concat(e))||t.startsWith("screening_option_".concat(e,"_")))&&delete s[t]}),ue(s)})(t),className:"text-red-500 hover:text-red-700",children:(0,q.jsx)(o.Gsv,{className:"h-5 w-5"})})]}),(0,q.jsx)("div",{className:"mb-3",children:(0,q.jsx)(a.A,{value:e.question,onChange:e=>De(t,"question",e.target.value),placeholder:"Enter your question",className:"w-full h-10",error:s,required:!0})}),(0,q.jsxs)("div",{className:"mb-3",children:[(0,q.jsx)("label",{className:"block text-sm font-medium glassy-text-primary mb-1",children:"Question Type"}),(0,q.jsxs)("select",{value:e.question_type,onChange:e=>De(t,"question_type",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[(0,q.jsx)("option",{value:"single_choice",children:"Single Choice"}),(0,q.jsx)("option",{value:"multi_choice",children:"Multiple Choice"}),(0,q.jsx)("option",{value:"theoretical",children:"Theoretical"})]})]}),"theoretical"===e.question_type?(0,q.jsxs)("div",{className:"mb-3",children:[(0,q.jsx)("label",{className:"block text-sm font-medium glassy-text-primary mb-1",children:"Expected Answer (Optional)"}),(0,q.jsx)("textarea",{value:e.expected_answer||"",onChange:e=>De(t,"expected_answer",e.target.value),rows:3,className:"w-full p-2 border border-gray-300 rounded-md",placeholder:"Describe what you're looking for in an answer (optional)"})]}):(0,q.jsxs)("div",{className:"space-y-2",children:[(0,q.jsxs)("div",{className:"flex justify-between items-center",children:[(0,q.jsxs)("label",{className:"block text-sm font-medium glassy-text-primary",children:["Options ",(0,q.jsx)("span",{className:"text-red-500",children:"*"})]}),l&&(0,q.jsx)("span",{className:"text-sm text-red-500",children:l})]}),e.options.map((s,l)=>{const n=ce["screening_option_".concat(t,"_").concat(l)];return(0,q.jsxs)("div",{className:"flex items-center",children:[(0,q.jsx)("input",{type:"single_choice"===e.question_type?"radio":"checkbox",checked:e.correct_options.includes(s),onChange:()=>((e,t)=>{const s=[...de],l=s[e];"single_choice"===l.question_type?l.correct_options=[t]:"multi_choice"===l.question_type&&(l.correct_options.includes(t)?l.correct_options=l.correct_options.filter(e=>e!==t):l.correct_options.push(t)),re(s);const o="screening_correct_".concat(e);ce[o]&&ue(e=>{const t=(0,i.A)({},e);return delete t[o],t})})(t,s),className:"mr-2 ",name:"question-".concat(t)}),(0,q.jsx)("div",{className:"flex-1",children:(0,q.jsx)(a.A,{value:s,onChange:e=>{const i=e.target.value,o=[...de];if(o[t].correct_options.includes(s)){const e=o[t].correct_options.indexOf(s);o[t].correct_options[e]=i}o[t].options[l]=i,re(o)},placeholder:"Option ".concat(l+1),error:n,required:!0})}),(0,q.jsx)("button",{onClick:()=>((e,t)=>{const s=[...de],l=s[e].options.splice(t,1)[0];s[e].correct_options=s[e].correct_options.filter(e=>e!==l),re(s);const o="screening_option_".concat(e,"_").concat(t);ce[o]&&ue(e=>{const t=(0,i.A)({},e);return delete t[o],t})})(t,l),className:"ml-2 text-red-500 hover:text-red-700",children:(0,q.jsx)(o.Gsv,{className:"h-5 w-5"})})]},l)}),(0,q.jsx)("button",{onClick:()=>(e=>{const t=[...de];t[e].options.push(""),re(t)})(t),className:"mt-2 text-blue-500 hover:text-blue-700 text-sm",children:"+ Add Option"}),n&&(0,q.jsx)("p",{className:"text-sm text-red-500 mt-2",children:n})]}),(0,q.jsxs)("div",{className:"mt-3",children:[(0,q.jsxs)("label",{className:"block text-sm font-medium glassy-text-primary mb-1",children:["Time Limit (minutes) ",(0,q.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,q.jsx)("input",{type:"number",value:e.time_limit,onChange:e=>De(t,"time_limit",parseInt(e.target.value)||0),min:"1",className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]})]},t)}),(0,q.jsxs)("button",{onClick:Ee,className:"mt-2 text-blue-500 hover:text-blue-700 flex items-center",children:[(0,q.jsx)("span",{className:"text-lg mr-1",children:"+"})," Add Another Question"]})]}),!R&&(0,q.jsx)(a.A,{type:"checkbox",label:"Share As a post",checked:null===ye||void 0===ye?void 0:ye.isShareAsPost,onChange:e=>he(t=>(0,i.A)((0,i.A)({},t),{},{isShareAsPost:e.target.checked}))})]})]}),(0,q.jsxs)("div",{className:"flex justify-between mt-8 gap-3",children:[H>1&&(0,q.jsx)("button",{onClick:()=>{H>1&&Y(H-1)},className:"px-4 py-2 glassy-card glassy-text-primary rounded-md hover:glassy-card",children:"Back"}),H<3?(0,q.jsx)("button",{onClick:()=>{if(Ce(H))H<3&&Y(H+1);else{const e=Object.keys(ce)[0];if(e){const t=document.querySelector('[data-error="'.concat(e,'"]'));t&&t.scrollIntoView({behavior:"smooth",block:"center"})}}},className:"px-4 py-2 glassy-card0 glassy-text-primary rounded-md hover:bg-blue-600 ml-auto",children:"Next"}):(0,q.jsx)(q.Fragment,{children:(0,q.jsx)(_.A,{onClick:async()=>{if(console.log("this is te error",Ce(3)),!Ce(3)){const e=Object.keys(ce)[0];if(e){const t=document.querySelector('[data-error="'.concat(e,'"]'));t&&t.scrollIntoView({behavior:"smooth",block:"center"})}return}te(!0);const e={company_id:(null===ye||void 0===ye?void 0:ye.company_id)||"",industry_id:(null===ye||void 0===ye?void 0:ye.industry_id)||"",job_type:(null===ye||void 0===ye?void 0:ye.job_type)||"",job_location:(null===ye||void 0===ye?void 0:ye.job_location)||"",pay_type:(null===ye||void 0===ye?void 0:ye.pay_type)||"",salary_range:(null===ye||void 0===ye?void 0:ye.salary_range)||"",job_title:(null===ye||void 0===ye?void 0:ye.job_title)||"",job_description:(null===ye||void 0===ye?void 0:ye.job_description)||"",required_skills:(null===ye||void 0===ye?void 0:ye.required_skills)||[],work_location:(null===ye||void 0===ye?void 0:ye.address)||"",isDisable:!1,screening_questions:de,start_date:(0,r.TG)(null===ye||void 0===ye?void 0:ye.start_date)||"",end_date:(0,r.TG)(null===ye||void 0===ye?void 0:ye.end_date)||"",isShareAsPost:null===ye||void 0===ye?void 0:ye.isShareAsPost,current_openings:null===ye||void 0===ye?void 0:ye.current_openings};R&&(e._id=R);const t=R?c.m8:c.ts;try{const s="company"===(0,v.Ri)("ACTIVE_MODE"),i=await F(t(e)).unwrap();u.oR.success((null===i||void 0===i?void 0:i.message)||(null===i||void 0===i?void 0:i.success)||(R?"Job updated successfully!":"Job posted successfully!")),Y(1),M(s?"/company/opportunities":"/user/opportunitiess"),he({company_id:"",industry_id:"",job_type:"",job_location:"",pay_type:"",salary_range:"",job_title:"",job_description:"",required_skills:[],address:{country:{name:"",dial_code:"",short_name:"",emoji:"\ud83c\uddee"},state:{name:"",code:""},city:{name:""},pin_code:""},screening_questions:[],isDisable:!1,start_date:"",end_date:""}),ne([]),re([{question:"",question_type:"single_choice",options:[],option_format:"alphabetically",correct_options:[],verification_type:"auto",time_limit:2}]),ue({})}catch(s){console.error("Error submitting job:",s),u.oR.error((null===s||void 0===s?void 0:s.message)||(R?"Failed to update job. Please try again.":"Failed to post job. Please try again."))}finally{te(!1)}},loading:ee,className:"px-4 py-2 glassy-card glassy-text-primary rounded-md hover:bg-green-600 ml-auto",children:R?"Update Job":"Post Job"})})]})]})})}),(0,q.jsx)(m.A,{isOpen:ve.isOpen,title:"Add ".concat(ve.type),onClose:()=>{me({isOpen:!1,type:"",field:""}),pe({name:"",logo_url:""})},handleSubmit:async()=>{try{let e="",t=null,s=ve.field;switch(ve.type){case"industries":e="industries",t=n.IQ;break;case"profile-roles":e="profile-roles",t=n.fJ;break;case"skill":e="skills",t=c.bG;break;default:return}ie(!0);const l=await F((0,h.A5)((0,i.A)({type:e},_e))).unwrap();ie(!1);const o={_id:l.data._id,name:l.data.name,created_by_users:l.data.created_by_users};if(F(t(o)),console.log("This is the add formdata int the market place ",s,e,t),"required_skills"===s){const e={value:o._id,label:o.name,created_by_users:o.created_by_users};he(e=>(0,i.A)((0,i.A)({},e),{},{required_skills:[...e.required_skills||[],o._id]})),ne(t=>[...t||[],e])}else he(e=>(0,i.A)((0,i.A)({},e),{},{[s]:o._id}));me({isOpen:!1,type:"",field:""}),pe({name:"",logo_url:""})}catch(e){u.oR.error((null===e||void 0===e?void 0:e.message)||"Something went wrong")}finally{ie(!1)}},loading:se,children:(0,q.jsx)("div",{className:"space-y-3",children:(0,q.jsx)(a.A,{className:"w-full h-10",label:"Enter Name",required:!0,placeholder:"Enter name",value:null===_e||void 0===_e?void 0:_e.name,onChange:e=>pe(t=>(0,i.A)((0,i.A)({},t),{},{name:e.target.value}))})})})]})}}}]);
//# sourceMappingURL=307.79a46060.chunk.js.map