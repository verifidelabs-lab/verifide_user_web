"use strict";(self.webpackChunkcomfygen_react_new_base_folder=self.webpackChunkcomfygen_react_new_base_folder||[]).push([[608],{9608:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var n=t(5043),l=t(9981),i=t(3003),o=t(9461),r=t(9804),a=t(9698),c=t(5051),d=t(6328),u=t(579);const m=()=>{var e,s,t,m,x,h,b,g;const{id:p}=(0,l.g)(),v=(0,i.wA)(),f=(0,i.d4)(e=>e.user),j=(0,l.Zp)(),y=(null===f||void 0===f||null===(e=f.jobScreeningQuestionData)||void 0===e||null===(s=e.data)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.screening_questions)||[],N=null===f||void 0===f||null===(m=f.jobScreeningQuestionData)||void 0===m||null===(x=m.data)||void 0===x?void 0:x.data,[_,w]=(0,n.useState)(!1);(0,n.useEffect)(()=>{p&&v((0,o.eO)({job_id:p}))},[v,p]);const[q,k]=(0,n.useState)(0),[S,C]=(0,n.useState)([]),[T,Y]=(0,n.useState)(!1),[I,Q]=(0,n.useState)(0),[D,E]=(0,n.useState)(!0),[O,R]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(y.length>0){var e;C(y.map(e=>({question:e.question,question_type:e.question_type,options:e.options||[],selected_options:[]})));const s=60*((null===(e=y[0])||void 0===e?void 0:e.time_limit)||0);Q(s),E(!0)}},[y]),(0,n.useEffect)(()=>{if(!D||I<=0)return;const e=setInterval(()=>{Q(s=>s<=1?(clearInterval(e),G(),0):s-1)},1e3);return()=>clearInterval(e)},[I,D,q,y]);const G=()=>{q<y.length-1?setTimeout(()=>{var e;k(e=>e+1);const s=60*((null===(e=y[q+1])||void 0===e?void 0:e.time_limit)||0);Q(s),E(!0)},1e3):(R(!0),K(!0))},K=async function(){for(let n=0;n<S.length;n++){var e;const s=S[n];if(0===s.selected_options.length||"theoretical"===s.question_type&&(null===(e=s.selected_options[0])||void 0===e||!e.trim()))return d.oR.error("Please answer question ".concat(n+1," before submitting.")),void k(n)}const s={job_id:N._id,answers:S.map(e=>({question:e.question,question_type:e.question_type,options:e.options,selected_options:e.selected_options}))};try{w(!0);const e=await v((0,o.cf)(s)).unwrap();d.oR.success((null===e||void 0===e?void 0:e.message)||"Your answers have been submitted successfully!"),j("/user/opportunitiess")}catch(t){d.oR.error(t)}finally{w(!1)}};if(0===y.length)return(0,u.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,u.jsx)("div",{className:"animate-spin w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full mx-auto mb-4"}),(0,u.jsx)("p",{className:"text-lg text-gray-600",children:"Loading screening questions..."})]})});if(T)return(0,u.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 flex items-center justify-center p-4",children:(0,u.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,u.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,u.jsx)(r.qGT,{className:"w-12 h-12 text-green-600"})}),(0,u.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:O?"Time Completed!":"Thank You!"}),(0,u.jsx)("p",{className:"text-gray-600 mb-6",children:O?"Your screening answers have been automatically submitted due to time completion.":"Your screening answers have been successfully submitted."}),(0,u.jsx)("button",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors",onClick:()=>j("/user/opportunitiess/"),children:"Back to Your Opportunities"})]})});const L=y[q],M=S[q]||{};return(0,u.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4",children:(0,u.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,u.jsx)("div",{className:"bg-white rounded-2xl shadow-lg mb-6 p-6",children:(0,u.jsxs)("div",{className:"flex items-start gap-4",children:[(0,u.jsx)("img",{src:null===N||void 0===N||null===(h=N.company_id)||void 0===h?void 0:h.logo_url,alt:"Company Logo",className:"w-16 h-16 rounded-lg object-cover border"}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,u.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:N.job_title.name}),(0,u.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm font-medium rounded-full",children:N.job_type})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 mb-3",children:[(0,u.jsx)(a.MbK,{className:"w-4 h-4"}),(0,u.jsx)("span",{className:"font-medium",children:N.company_id.name}),(0,u.jsx)("span",{className:"text-gray-400",children:"\u2022"}),(0,u.jsx)("span",{children:N.industry_id.name})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,u.jsx)(r.$D5,{className:"w-4 h-4"}),(0,u.jsxs)("span",{children:[N.work_location.city.name,", ",N.work_location.state.name]})]}),(0,u.jsx)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:(0,u.jsx)("span",{children:(z=N.salary_range,"\u20b9".concat(z.split("-").join(" - ")))})})]})]})]})}),(0,u.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Screening Questions"}),(0,u.jsxs)("p",{className:"text-sm text-gray-500",children:["Question ",q+1," of ",y.length]})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg ".concat(I<=30?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"),children:[(0,u.jsx)(c.IeK,{className:"w-4 h-4"}),(0,u.jsx)("span",{className:"font-mono font-semibold",children:(e=>{const s=Math.floor(e/60),t=e%60;return"".concat(s.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))})(I)})]})]}),(0,u.jsxs)("div",{className:"mb-8",children:[(0,u.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:L.question}),"single_choice"===L.question_type&&(0,u.jsx)("div",{className:"space-y-3",children:L.options.map((e,s)=>{var t,n;return(0,u.jsx)("div",{className:"p-4 rounded-lg border-2 cursor-pointer transition-all hover:border-blue-300 hover:bg-blue-50 ".concat(null!==(t=M.selected_options)&&void 0!==t&&t.includes(e)?"border-blue-500 bg-blue-50":"border-gray-200"),onClick:()=>(e=>{const s=[...S];s[q]&&(s[q].selected_options=[e],C(s))})(e),children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"radio",className:"w-5 h-5 text-blue-600 border-gray-300 focus:ring-blue-500",checked:(null===(n=M.selected_options)||void 0===n?void 0:n.includes(e))||!1,onChange:()=>{}}),(0,u.jsx)("label",{className:"ml-3 text-gray-700 cursor-pointer",children:e})]})},s)})}),"multi_choice"===L.question_type&&(0,u.jsx)("div",{className:"space-y-3",children:L.options.map((e,s)=>{var t,n;return(0,u.jsx)("div",{className:"p-4 rounded-lg border-2 cursor-pointer transition-all hover:border-blue-300 hover:bg-blue-50 ".concat(null!==(t=M.selected_options)&&void 0!==t&&t.includes(e)?"border-blue-500 bg-blue-50":"border-gray-200"),onClick:()=>(e=>{const s=[...S];if(s[q]){const t=s[q].selected_options;t.includes(e)?s[q].selected_options=t.filter(s=>s!==e):s[q].selected_options=[...t,e],C(s)}})(e),children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:(null===(n=M.selected_options)||void 0===n?void 0:n.includes(e))||!1,onChange:()=>{}}),(0,u.jsx)("label",{className:"ml-3 text-gray-700 cursor-pointer",children:e})]})},s)})}),"theoretical"===L.question_type&&(0,u.jsxs)("div",{children:[(0,u.jsx)("textarea",{className:"w-full h-40 p-4 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none resize-none",placeholder:"Type your detailed answer here...",value:(null===(b=M.selected_options)||void 0===b?void 0:b[0])||"",onChange:e=>{const s=[...S],t=e.target.value;s[q]&&(s[q].selected_options=[t],C(s))}}),(0,u.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Character count: ",((null===(g=M.selected_options)||void 0===g?void 0:g[0])||"").length]})]})]}),(0,u.jsx)("div",{className:"flex justify-end",children:q<y.length-1?(0,u.jsxs)("button",{onClick:()=>{if(q<y.length-1){var e;E(!1),k(q+1);const s=60*((null===(e=y[q+1])||void 0===e?void 0:e.time_limit)||0);Q(s),E(!0)}},className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-all",children:["Next",(0,u.jsx)(r.trk,{className:"w-4 h-4"})]}):(0,u.jsxs)("button",{onClick:()=>K(!1),disabled:_,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-all",children:[(0,u.jsx)(r.qGT,{className:"w-4 h-4"}),_?"Submitting...":"Submit"]})}),I<=30&&I>0&&(0,u.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,u.jsxs)("p",{className:"text-red-700 text-sm font-medium",children:["\u26a0\ufe0f Warning: Only ",I," seconds remaining for this question!"]})})]})]})});var z}}}]);
//# sourceMappingURL=608.3c84ddcd.chunk.js.map