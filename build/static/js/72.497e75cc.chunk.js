"use strict";(self.webpackChunkcomfygen_react_new_base_folder=self.webpackChunkcomfygen_react_new_base_folder||[]).push([[72],{2072:(e,s,a)=>{a.r(s),a.d(s,{default:()=>h});var t=a(9379),r=a(5043),l=a(9804),i=a(1462),n=a(5051),o=a(3003),c=a(9461),d=a(9981),m=a(1014),x=a(5200),u=a(579);const p={"Profile Completion":"profile-completion","Skill Updates":"skill-updates","Identity Verification":"identity-verification","Education Verification":"education-verification","Employment Verification":"employment-verification","Project Verification":"project-verification","Certificate Verification":"certificate-verification","Course Progress":"course-progress","Assessments Progress":"assessments-progress"},y=e=>{var s;let{notification:a,onMarkAsRead:t,navigate:r}=e;const{Icon:o,color:c}=(e=>{switch(e){case"profile-completion":case"identity-verification":case"education-verification":case"employment-verification":case"project-verification":case"certificate-verification":return{Icon:n.IeK,color:"glassy-card0"};case"skill-updates":case"course-progress":case"assessments-progress":return{Icon:l.Jk1,color:"bg-orange-500"};default:return{Icon:i.U68,color:"bg-purple-500"}}})(a.type),{cleanTitle:d,type:m,event:x,company:p}=(e=>{const s=e.match(/\[\[type:(.*?)\]\]/),a=e.match(/\[\[event:(.*?)\]\]/),t=e.match(/\[\[company:(.*?)\]\]/);return{cleanTitle:e.replace(/\[\[.*?\]\]/g,"").trim(),type:s?s[1]:null,event:a?a[1]:null,company:t?t[1]:null}})(a.title);return(0,u.jsxs)("div",{className:"flex items-start justify-between p-4  border-gray-100 ".concat(a.isRead?" ":"bg-card-unread"),children:[(0,u.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,u.jsx)("div",{className:"p-2 rounded-full bg-card",children:(0,u.jsx)(o,{className:"w-4 h-4 glassy-text-primary"})}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2",children:[(0,u.jsx)("h3",{className:"text-sm font-semibold glassy-text-primary",children:d}),(0,u.jsx)("span",{className:"text-xs italic glassy-text-secondary",children:(y=a.createdAt,new Date(y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),(0,u.jsxs)("div",{className:"mt-2 space-y-1 text-xs glassy-text-secondary",children:[x&&(0,u.jsxs)("p",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{className:"glassy-text-primary font-medium",children:"\ud83d\udcbc Job Position:"})," ",x]}),m&&(0,u.jsxs)("p",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{className:"glassy-text-primary font-medium",children:"\ud83d\udd52 Job Type:"})," ",m]}),p&&(0,u.jsxs)("p",{className:"flex items-center gap-1",children:[(0,u.jsx)("span",{className:"glassy-text-primary font-medium",children:"\ud83c\udfe2 Company:"})," ",p]})]}),(0,u.jsx)("p",{className:"text-xs glassy-text-secondary mt-2 leading-relaxed",children:a.message})]})]}),(0,u.jsx)("button",{onClick:()=>{const e=null===a||void 0===a?void 0:a.redirectPath;e&&console.log("Redirect Path:",e),a.isRead?null!==a&&void 0!==a&&a.redirectPath&&r(null===a||void 0===a?void 0:a.redirectPath):t(a._id,null===a||void 0===a?void 0:a.redirectPath)},className:"px-3 py-1 glassy-button text-sm font-semibold rounded ".concat(a.isRead?"opacity-50 cursor-default":""),disabled:a.isRead,children:(null===(s=a.meta)||void 0===s?void 0:s.buttonText)||"View"})]});var y},f=e=>{let{onFilterChange:s,onSearch:a,onMarkAllRead:t,unreadCount:i,filterValue:n,isToggle:o,setIsToggle:c}=e;const[y,f]=(0,r.useState)(""),[h,g]=(0,r.useState)(!1),v=(0,d.Zp)(),b=e=>{e.preventDefault(),a(y)};return(0,u.jsxs)("div",{className:"glassy-card  border-gray-200 px-4 md:px-6 py-2 md:py-4",children:[(0,u.jsxs)("div",{className:"hidden md:flex flex-col w-full",children:[(0,u.jsxs)("div",{className:"flex flex-row items-center justify-between mb-5",children:[(0,u.jsxs)("nav",{className:"flex items-center space-x-2 text-sm font-medium",children:[(0,u.jsx)("span",{className:"glassy-text-secondary hover:glassy-text-primary-dark cursor-pointer",onClick:()=>v("/user/feed"),children:"Home"}),(0,u.jsx)("span",{className:"glassy-text-secondary",children:"\u203a"}),(0,u.jsx)("span",{className:"glassy-text-primary",children:"Notifications"})]}),(0,u.jsxs)("div",{className:"flex items-center gap-3 relative z-40",children:[(0,u.jsxs)("form",{onSubmit:b,className:"relative w-52",children:[(0,u.jsx)(l.iyI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 glassy-text-secondary w-4 h-4"}),(0,u.jsx)("input",{type:"text",placeholder:"Search...",value:y,onChange:e=>f(e.target.value),className:"pl-10 pr-4 py-2 glassy-input-notification text-sm w-full  focus:ring-2 focus:ring-blue-500 focus:border-transparent rounded-xl transition-all duration-200"})]}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsxs)("button",{type:"button",onClick:()=>g(!h),className:"flex items-center space-x-2 px-4 py-2 glassy-button text-sm rounded-xl  border border-[var(--border-color)] hover:scale-105 transition-all duration-200",children:[(0,u.jsx)(l.Jw7,{className:"w-4 h-4 glassy-text-primary"}),(0,u.jsx)("span",{className:"glassy-text-primary",children:"Filter"}),(0,u.jsx)(x.fK4,{className:"transition-transform duration-200 glassy-text-secondary ".concat(h?"rotate-180":"")})]}),h&&(0,u.jsx)("div",{className:"absolute right-0 mt-2 w-56 glassy-card-header rounded-xl  border border-[var(--border-color)] shadow-xl backdrop-blur-lg  z-50 transition-all duration-200 ease-out",children:(0,u.jsx)("div",{className:"",children:(0,u.jsxs)("select",{value:n,onChange:e=>{s(e.target.value),g(!1)},className:"w-full px-3 py-2 glassy-input text-sm rounded-lg  bg-transparent text-[var(--text-primary)]  focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,u.jsx)("option",{value:"",children:"All Notifications"}),Object.entries(p).map(e=>{let[s,a]=e;return(0,u.jsx)("option",{value:a,children:s},a)})]})})})]}),(0,u.jsx)("button",{onClick:t,className:"px-4 py-2 glassy-button text-sm rounded-xl border border-[var(--border-color)]  hover:scale-105 transition-all duration-200",children:"Mark All as Read"})]})]}),(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("h1",{className:"text-xl font-semibold glassy-text-primary",children:"All Notifications"}),(0,u.jsxs)("span",{className:"text-sm glassy-text-secondary flex items-center gap-2",children:[(0,u.jsx)(m.A,{handleClick:()=>c(e=>!e),isToggle:o}),"Unread"]})]})]}),(0,u.jsxs)("div",{className:"md:hidden flex flex-col gap-3",children:[(0,u.jsxs)("nav",{className:"flex items-center space-x-2 text-sm mb-2",children:[(0,u.jsx)("span",{className:"glassy-text-secondary hover:glassy-text-primary-dark cursor-pointer",onClick:()=>v("/user/feed"),children:"Home"}),(0,u.jsx)("span",{className:"glassy-text-secondary",children:"\u203a"}),(0,u.jsx)("span",{className:"glassy-text-primary",children:"Notifications"})]}),(0,u.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,u.jsxs)("form",{onSubmit:b,className:"relative w-full",children:[(0,u.jsx)(l.iyI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 glassy-text-secondary w-4 h-4"}),(0,u.jsx)("input",{type:"text",placeholder:"Search...",value:y,onChange:e=>f(e.target.value),className:"pl-10 pr-4 py-2 glassy-input-notification   text-sm w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,u.jsxs)("div",{className:"relative w-full",children:[(0,u.jsxs)("button",{type:"button",className:"w-full flex items-center justify-center space-x-2 px-3 py-2 glassy-button text-sm hover:scale-105",onClick:()=>g(!h),children:[(0,u.jsx)(l.Jw7,{className:"w-4 h-4 glassy-text-primary"}),(0,u.jsx)("span",{children:"Filter"})]}),h&&(0,u.jsx)("div",{className:"absolute right-0 mt-2 w-full   rounded-md shadow-lg z-10 border border-gray-200",children:(0,u.jsx)("div",{className:"",children:(0,u.jsxs)("select",{value:n,onChange:e=>{s(e.target.value),g(!1)},className:"w-full  glassy-input text-sm",children:[(0,u.jsx)("option",{value:"",children:"All Notifications"}),Object.entries(p).map(e=>{let[s,a]=e;return(0,u.jsx)("option",{value:a,children:s},a)})]})})})]})]}),(0,u.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mt-2",children:[(0,u.jsx)("h1",{className:"text-lg font-semibold glassy-text-primary",children:"All Notifications"}),(0,u.jsxs)("div",{className:"flex justify-between w-full sm:w-auto items-center gap-2",children:[(0,u.jsxs)("span",{className:"text-sm glassy-text-primary flex items-center",children:[(0,u.jsx)(m.A,{handleClick:()=>c(e=>!e),isToggle:o}),"Unread"]}),(0,u.jsx)("button",{onClick:t,className:"px-3 py-2 glassy-button text-sm hover:scale-105 w-full sm:w-auto",children:"Mark All as Read"})]})]})]})]})},h=()=>{var e,s;const a=(0,d.Zp)(),l=(0,o.wA)(),i=(0,o.d4)(e=>e.user),n=null===i||void 0===i||null===(e=i.notificationsData)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.data,[m,x]=(0,r.useState)(!0),[p,h]=(0,r.useState)(1),[g]=(0,r.useState)(10),[v,b]=(0,r.useState)(""),[j,N]=(0,r.useState)(""),[w,k]=(0,r.useState)(!1),C=(null===n||void 0===n?void 0:n.list)||[],S=C.filter(e=>!e.isRead).length,A=async()=>{x(!0);try{const e=(0,t.A)((0,t.A)({},v&&{type:v}),j&&{title:{$regex:j,$options:"i"}});w&&(e.isRead=!w);const s={page:p,size:g,query:JSON.stringify(e)};await l((0,c.ne)(s))}catch(e){console.error("Error fetching notifications:",e)}finally{x(!1)}},R=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{await l((0,c.Mo)({_id:e})),s&&a(s),A()}catch(t){console.error("Error marking notification as read:",t)}};(0,r.useEffect)(()=>{A()},[p,v,j,w]);return(0,u.jsxs)("div",{className:"min-h-screen p-3",children:[(0,u.jsx)(f,{onFilterChange:e=>{b(e),h(1)},onSearch:e=>{N(e),h(1)},onMarkAllRead:async()=>{try{await l((0,c.zV)()),A()}catch(e){console.error("Error marking all notifications as read:",e)}},unreadCount:S,filterValue:v,isToggle:w,setIsToggle:k}),(0,u.jsxs)("div",{className:"w-full mx-auto shadow-sm mt-2",children:[m?(0,u.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,u.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 glassy-text-secondary"})}):0===C.length?(0,u.jsx)("div",{className:"text-center p-8 glassy-text-secondary glassy-card",children:"No notifications found"}):C.map(e=>(0,u.jsx)(y,{notification:e,onMarkAsRead:R,navigate:a},e._id)),!m&&(null===n||void 0===n?void 0:n.total)>g&&(0,u.jsxs)("div",{className:"flex justify-between items-center p-4  border-t border-[var(--border-color)]",children:[(0,u.jsx)("button",{onClick:()=>h(e=>Math.max(1,e-1)),disabled:1===p,className:"px-4 py-2 rounded-md text-sm border border-[var(--border-color)] glassy-text-primary transition-all duration-200 hover:bg-[var(--bg-button-hover)] disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,u.jsxs)("span",{className:"text-sm glassy-text-secondary",children:["Page ",p," of ",Math.ceil(n.total/g)]}),(0,u.jsx)("button",{onClick:()=>h(e=>e+1),disabled:p>=Math.ceil(n.total/g),className:"px-4 py-2 rounded-md text-sm border border-[var(--border-color)] glassy-text-primary transition-all duration-200 hover:bg-[var(--bg-button-hover)] disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}}}]);
//# sourceMappingURL=72.497e75cc.chunk.js.map