"use strict";(self.webpackChunkcomfygen_react_new_base_folder=self.webpackChunkcomfygen_react_new_base_folder||[]).push([[608],{9608:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var l=t(5043),n=t(9981),a=t(3003),i=t(9461),o=t(9804),r=t(9698),d=t(5051),c=t(6328),u=t(579);const m=()=>{var e,s,t,m,x,p,h,g,v,y;const{id:b}=(0,n.g)(),f=(0,a.wA)(),j=(0,a.d4)(e=>e.user),N=(0,n.Zp)(),_=(null===j||void 0===j||null===(e=j.jobScreeningQuestionData)||void 0===e||null===(s=e.data)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.screening_questions)||[],w=null===j||void 0===j||null===(m=j.jobScreeningQuestionData)||void 0===m||null===(x=m.data)||void 0===x?void 0:x.data;console.log("\ud83e\udde9 Job Data fetched from backend:",w);const[q,k]=(0,l.useState)(!1);(0,l.useEffect)(()=>{b&&f((0,i.eO)({job_id:b}))},[f,b]),(0,l.useEffect)(()=>{console.log("this is the jobdata",null===w||void 0===w?void 0:w.isApplied),!0===(null===w||void 0===w?void 0:w.isApplied)&&(c.oR.warning("You have already applied for this job."),N("/user/opportunitiess"))},[null===w||void 0===w?void 0:w.isApplied,N]);const[S,C]=(0,l.useState)(0),[T,Y]=(0,l.useState)([]),[E,A]=(0,l.useState)(!1),[D,I]=(0,l.useState)(0),[Q,R]=(0,l.useState)(!0),[O,G]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(_.length>0){var e;Y(_.map(e=>({question:e.question,question_type:e.question_type,options:e.options||[],selected_options:[]})));const s=60*((null===(e=_[0])||void 0===e?void 0:e.time_limit)||0);I(s),R(!0)}},[_]),(0,l.useEffect)(()=>{if(!Q||D<=0)return;const e=setInterval(()=>{I(s=>s<=1?(clearInterval(e),K(),0):s-1)},1e3);return()=>clearInterval(e)},[D,Q,S,_]);const K=()=>{S<_.length-1?setTimeout(()=>{var e;C(e=>e+1);const s=60*((null===(e=_[S+1])||void 0===e?void 0:e.time_limit)||0);I(s),R(!0)},1e3):(G(!0),L(!0))},L=async function(){for(let l=0;l<T.length;l++){var e;const s=T[l];if(0===s.selected_options.length||"theoretical"===s.question_type&&(null===(e=s.selected_options[0])||void 0===e||!e.trim()))return c.oR.error("Please answer question ".concat(l+1," before submitting.")),void C(l)}const s={job_id:w._id,answers:T.map(e=>({question:e.question,question_type:e.question_type,options:e.options,selected_options:e.selected_options}))};try{k(!0);const e=await f((0,i.cf)(s)).unwrap();c.oR.success((null===e||void 0===e?void 0:e.message)||"Your answers have been submitted successfully!"),N("/user/opportunitiess")}catch(t){c.oR.error(t)}finally{k(!1)}};if(0===_.length)return(0,u.jsx)("div",{className:"min-h-screen  flex items-center justify-center p-4",children:(0,u.jsxs)("div",{className:"glassy-card rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,u.jsx)("div",{className:"animate-spin w-12 h-12 border-4 border-blue-200 border-t-blue-600 rounded-full mx-auto mb-4"}),(0,u.jsx)("p",{className:"text-lg glassy-text-secondary",children:"Loading screening questions..."})]})});if(E)return(0,u.jsx)("div",{className:"min-h-screen   flex items-center justify-center p-4",children:(0,u.jsxs)("div",{className:"glassy-card rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[(0,u.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,u.jsx)(o.qGT,{className:"w-12 h-12 text-green-600"})}),(0,u.jsx)("h1",{className:"text-2xl font-bold glassy-text-primary mb-4",children:O?"Time Completed!":"Thank You!"}),(0,u.jsx)("p",{className:"glassy-text-secondary mb-6",children:O?"Your screening answers have been automatically submitted due to time completion.":"Your screening answers have been successfully submitted."}),(0,u.jsx)("button",{className:"w-full bg-blue-600 hover:bg-blue-700 glassy-text-primary font-semibold py-3 px-6 rounded-lg transition-colors",onClick:()=>N("/user/opportunitiess/"),children:"Back to Your Opportunities"})]})});const M=_[S],z=T[S]||{};return(0,u.jsx)("div",{className:"min-h-screen   p-4",children:(0,u.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,u.jsx)("div",{className:"glassy-card rounded-2xl shadow-lg mb-6 p-6",children:(0,u.jsxs)("div",{className:"flex items-start gap-4",children:[(0,u.jsx)(n.N_,{to:"/user/view-details/companies/".concat(null===w||void 0===w||null===(p=w.company_id)||void 0===p?void 0:p._id),children:(0,u.jsx)("img",{src:null===w||void 0===w||null===(h=w.company_id)||void 0===h?void 0:h.logo_url,alt:"Company Logo",className:"w-16 h-16 rounded-lg object-cover border",onError:e=>{e.currentTarget.onerror=null,e.currentTarget.src="https://res.cloudinary.com/dsnqduetr/image/upload/v1761043320/post-media/companylogo.png"}})}),(0,u.jsxs)("div",{className:"flex-1",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,u.jsx)(n.N_,{to:"/user/view-details/companies/".concat(null===w||void 0===w||null===(g=w.company_id)||void 0===g?void 0:g._id),children:(0,u.jsx)("h1",{className:"text-xl font-bold glassy-text-primary",children:w.job_title.name})}),(0,u.jsx)("span",{className:"px-3 py-1 glassy-card text-blue-800 text-sm font-medium rounded-full",children:w.job_type})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2 glassy-text-secondary mb-3",children:[(0,u.jsx)(r.MbK,{className:"w-4 h-4"}),(0,u.jsx)("span",{className:"font-medium",children:w.company_id.name}),(0,u.jsx)("span",{className:"glassy-text-secondary",children:"\u2022"}),(0,u.jsx)("span",{children:w.industry_id.name})]}),(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,u.jsxs)("div",{className:"flex items-center gap-2 text-sm glassy-text-secondary",children:[(0,u.jsx)(o.$D5,{className:"w-4 h-4"}),(0,u.jsxs)("span",{children:[w.work_location.city.name,","," ",w.work_location.state.name]})]}),(0,u.jsx)("div",{className:"flex items-center gap-2 text-sm glassy-text-secondary",children:(0,u.jsx)("span",{children:(B=w.salary_range,"\u20b9".concat(B.split("-").join(" - ")))})})]})]})]})}),(0,u.jsxs)("div",{className:"glassy-card rounded-2xl shadow-lg p-6",children:[(0,u.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"text-lg font-semibold glassy-text-primary",children:"Screening Questions"}),(0,u.jsxs)("p",{className:"text-sm glassy-text-secondary",children:["Question ",S+1," of ",_.length]})]}),(0,u.jsxs)("div",{className:"flex items-center gap-2 px-4 py-2 rounded-lg ".concat(D<=30?"glassy-card text-red-700":"glassy-card text-blue-700"),children:[(0,u.jsx)(d.IeK,{className:"w-4 h-4"}),(0,u.jsx)("span",{className:"font-mono font-semibold",children:(e=>{const s=Math.floor(e/60),t=e%60;return"".concat(s.toString().padStart(2,"0"),":").concat(t.toString().padStart(2,"0"))})(D)})]})]}),(0,u.jsxs)("div",{className:"mb-8",children:[(0,u.jsx)("h3",{className:"text-lg font-medium glassy-text-primary mb-6",children:M.question}),"single_choice"===M.question_type&&(0,u.jsx)("div",{className:"space-y-3",children:M.options.map((e,s)=>{var t,l;return(0,u.jsx)("div",{className:"p-4 rounded-lg border-2 cursor-pointer transition-all hover:glassy-card hover:glassy-card ".concat(null!==(t=z.selected_options)&&void 0!==t&&t.includes(e)?"border-blue-500 glassy-card":"border-gray-200"),onClick:()=>(e=>{const s=[...T];s[S]&&(s[S].selected_options=[e],Y(s))})(e),children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"radio",className:"w-5 h-5 text-blue-600 border-gray-300 focus:ring-blue-500",checked:(null===(l=z.selected_options)||void 0===l?void 0:l.includes(e))||!1,onChange:()=>{}}),(0,u.jsx)("label",{className:"ml-3 glassy-text-primary cursor-pointer",children:e})]})},s)})}),"multi_choice"===M.question_type&&(0,u.jsx)("div",{className:"space-y-3",children:M.options.map((e,s)=>{var t,l;return(0,u.jsx)("div",{className:"p-4 rounded-lg border-2 cursor-pointer transition-all hover:border-blue-300 hover:glassy-card ".concat(null!==(t=z.selected_options)&&void 0!==t&&t.includes(e)?"border-blue-500 glassy-card":"border-gray-200"),onClick:()=>(e=>{const s=[...T];if(s[S]){const t=s[S].selected_options;t.includes(e)?s[S].selected_options=t.filter(s=>s!==e):s[S].selected_options=[...t,e],Y(s)}})(e),children:(0,u.jsxs)("div",{className:"flex items-center",children:[(0,u.jsx)("input",{type:"checkbox",className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500",checked:(null===(l=z.selected_options)||void 0===l?void 0:l.includes(e))||!1,onChange:()=>{}}),(0,u.jsx)("label",{className:"ml-3 glassy-text-primary cursor-pointer",children:e})]})},s)})}),"theoretical"===M.question_type&&(0,u.jsxs)("div",{children:[(0,u.jsx)("textarea",{className:"w-full h-40 p-4 border-2 border-gray-200 glassy-input rounded-lg focus:border-blue-500 focus:outline-none resize-none",placeholder:"Type your detailed answer here...",value:(null===(v=z.selected_options)||void 0===v?void 0:v[0])||"",onChange:e=>{const s=[...T],t=e.target.value;s[S]&&(s[S].selected_options=[t],Y(s))}}),(0,u.jsxs)("div",{className:"mt-2 text-sm glassy-text-secondary",children:["Character count:"," ",((null===(y=z.selected_options)||void 0===y?void 0:y[0])||"").length]})]})]}),(0,u.jsx)("div",{className:"flex justify-end",children:S<_.length-1?(0,u.jsxs)("button",{onClick:()=>{if(S<_.length-1){var e;R(!1),C(S+1);const s=60*((null===(e=_[S+1])||void 0===e?void 0:e.time_limit)||0);I(s),R(!0)}},className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 glassy-text-primary font-semibold rounded-lg transition-all",children:["Next",(0,u.jsx)(o.trk,{className:"w-4 h-4"})]}):(0,u.jsxs)("button",{onClick:()=>L(!1),disabled:q,className:"flex items-center gap-2 px-6 py-3 bg-green-600 hover:bg-green-700 glassy-text-primary font-semibold rounded-lg transition-all",children:[(0,u.jsx)(o.qGT,{className:"w-4 h-4"}),q?"Submitting...":"Submit"]})}),D<=30&&D>0&&(0,u.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,u.jsxs)("p",{className:"text-red-700 text-sm font-medium",children:["\u26a0\ufe0f Warning: Only ",D," seconds remaining for this question!"]})})]})]})});var B}}}]);
//# sourceMappingURL=608.e3484b8a.chunk.js.map