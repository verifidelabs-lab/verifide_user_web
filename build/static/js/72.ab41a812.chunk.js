"use strict";(self.webpackChunkcomfygen_react_new_base_folder=self.webpackChunkcomfygen_react_new_base_folder||[]).push([[72],{2072:(e,s,t)=>{t.r(s),t.d(s,{default:()=>f});var a=t(9379),r=t(5043),l=t(9804),i=t(1462),n=t(5051),o=t(3003),c=t(9461),d=t(9981),m=t(1014),x=t(579);const u={"Profile Completion":"profile-completion","Skill Updates":"skill-updates","Identity Verification":"identity-verification","Education Verification":"education-verification","Employment Verification":"employment-verification","Project Verification":"project-verification","Certificate Verification":"certificate-verification","Course Progress":"course-progress","Assessments Progress":"assessments-progress"},h=e=>{var s;let{notification:t,onMarkAsRead:a,navigate:r}=e;const{Icon:o,color:c}=(e=>{switch(e){case"profile-completion":case"identity-verification":case"education-verification":case"employment-verification":case"project-verification":case"certificate-verification":return{Icon:n.IeK,color:"bg-blue-500"};case"skill-updates":case"course-progress":case"assessments-progress":return{Icon:l.Jk1,color:"bg-orange-500"};default:return{Icon:i.U68,color:"bg-purple-500"}}})(t.type),{cleanTitle:d,type:m,event:u,company:h}=(e=>{const s=e.match(/\[\[type:(.*?)\]\]/),t=e.match(/\[\[event:(.*?)\]\]/),a=e.match(/\[\[company:(.*?)\]\]/);return{cleanTitle:e.replace(/\[\[.*?\]\]/g,"").trim(),type:s?s[1]:null,event:t?t[1]:null,company:a?a[1]:null}})(t.title);return(0,x.jsxs)("div",{className:"flex items-start justify-between p-4 border-b border-gray-100 ".concat(t.isRead?"bg-white":"bg-blue-50"),children:[(0,x.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,x.jsx)("div",{className:"p-2 rounded-full ".concat(c),children:(0,x.jsx)(o,{className:"w-4 h-4 text-white"})}),(0,x.jsxs)("div",{className:"flex-1",children:[(0,x.jsx)("h3",{className:"text-sm font-semibold text-[#000000E6] mb-1",children:d}),(0,x.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:t.message}),(0,x.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs font-medium text-[#2563EB] mb-1",children:[m&&(0,x.jsx)("span",{className:"px-2 py-0.5 bg-blue-100 rounded",children:m}),u&&(0,x.jsx)("span",{className:"px-2 py-0.5 bg-green-100 rounded",children:u}),h&&(0,x.jsx)("span",{className:"px-2 py-0.5 bg-yellow-100 rounded",children:h})]}),(0,x.jsxs)("div",{className:"flex items-center    text-sm font-semibold text-[#000000E6] mb-1",children:[(0,x.jsx)(n.IeK,{className:"w-3 h-3 mr-1"}),(p=t.createdAt,new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]})]})]}),(0,x.jsx)("button",{onClick:()=>{const e=null===t||void 0===t?void 0:t.redirectPath;e&&console.log("Redirect Path:",e),t.isRead?null!==t&&void 0!==t&&t.redirectPath&&r(null===t||void 0===t?void 0:t.redirectPath):a(t._id,null===t||void 0===t?void 0:t.redirectPath)},className:"px-3 py-1 text-[#2563EB] bg-[#2563EB]/10 text-sm font-semibold rounded hover:opacity-80 ".concat(t.isRead?"opacity-50 cursor-default":""),children:(null===(s=t.meta)||void 0===s?void 0:s.buttonText)||"View"})]});var p},p=e=>{let{onFilterChange:s,onSearch:t,onMarkAllRead:a,unreadCount:i,filterValue:n,isToggle:o,setIsToggle:c}=e;const[h,p]=(0,r.useState)(""),[f,b]=(0,r.useState)(!1),g=(0,d.Zp)(),v=e=>{e.preventDefault(),t(h)};return(0,x.jsxs)("div",{className:"bg-white border-b border-gray-200 px-4 md:px-6 py-2 md:py-4",children:[(0,x.jsxs)("div",{className:"hidden md:flex flex-col",children:[(0,x.jsxs)("div",{className:"flex flex-row items-center justify-between mb-4",children:[(0,x.jsxs)("nav",{className:"flex items-center space-x-2 text-sm",children:[(0,x.jsx)("span",{className:"text-blue-600 hover:text-blue-800 cursor-pointer",onClick:()=>g("/user/feed"),children:"Home"}),(0,x.jsx)("span",{className:"text-gray-400",children:"\u203a"}),(0,x.jsx)("span",{className:"text-gray-600",children:"Notifications"})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,x.jsxs)("form",{onSubmit:v,className:"relative",children:[(0,x.jsx)(l.iyI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,x.jsx)("input",{type:"text",placeholder:"Search...",value:h,onChange:e=>p(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{className:"relative",children:[(0,x.jsxs)("button",{type:"button",className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50",onClick:()=>b(!f),children:[(0,x.jsx)(l.Jw7,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:"Filter"})]}),f&&(0,x.jsx)("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg z-10 border border-gray-200",children:(0,x.jsx)("div",{className:"p-2",children:(0,x.jsxs)("select",{value:n,onChange:e=>{s(e.target.value),b(!1)},className:"w-full p-2 border border-gray-300 rounded-md text-sm",children:[(0,x.jsx)("option",{value:"",children:"All Notifications"}),Object.entries(u).map(e=>{let[s,t]=e;return(0,x.jsx)("option",{value:t,children:s},t)})]})})})]}),(0,x.jsx)("button",{onClick:a,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700",children:"Mark All as Read"})]})]}),(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsx)("h1",{className:"text-xl font-semibold text-[#000000E6]",children:"All Notifications"}),(0,x.jsxs)("span",{className:"text-sm text-gray-500 flex",children:[(0,x.jsx)(m.A,{handleClick:()=>c(e=>!e),isToggle:o}),"Unread"]})]})]}),(0,x.jsxs)("div",{className:"md:hidden flex flex-col gap-3",children:[(0,x.jsxs)("nav",{className:"flex items-center space-x-2 text-sm mb-2",children:[(0,x.jsx)("span",{className:"text-blue-600 hover:text-blue-800 cursor-pointer",onClick:()=>g("/user/feed"),children:"Home"}),(0,x.jsx)("span",{className:"text-gray-400",children:"\u203a"}),(0,x.jsx)("span",{className:"text-gray-600",children:"Notifications"})]}),(0,x.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,x.jsxs)("form",{onSubmit:v,className:"relative w-full",children:[(0,x.jsx)(l.iyI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,x.jsx)("input",{type:"text",placeholder:"Search...",value:h,onChange:e=>p(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md text-sm w-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,x.jsxs)("div",{className:"relative w-full",children:[(0,x.jsxs)("button",{type:"button",className:"w-full flex items-center justify-center space-x-2 px-3 py-2 border border-gray-300 rounded-md text-sm hover:bg-gray-50",onClick:()=>b(!f),children:[(0,x.jsx)(l.Jw7,{className:"w-4 h-4"}),(0,x.jsx)("span",{children:"Filter"})]}),f&&(0,x.jsx)("div",{className:"absolute right-0 mt-2 w-full bg-white rounded-md shadow-lg z-10 border border-gray-200",children:(0,x.jsx)("div",{className:"p-2",children:(0,x.jsxs)("select",{value:n,onChange:e=>{s(e.target.value),b(!1)},className:"w-full p-2 border border-gray-300 rounded-md text-sm",children:[(0,x.jsx)("option",{value:"",children:"All Notifications"}),Object.entries(u).map(e=>{let[s,t]=e;return(0,x.jsx)("option",{value:t,children:s},t)})]})})})]})]}),(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mt-2",children:[(0,x.jsx)("h1",{className:"text-lg font-semibold text-[#000000E6]",children:"All Notifications"}),(0,x.jsxs)("div",{className:"flex justify-between w-full sm:w-auto items-center gap-2",children:[(0,x.jsxs)("span",{className:"text-sm text-gray-500 flex items-center",children:[(0,x.jsx)(m.A,{handleClick:()=>c(e=>!e),isToggle:o}),"Unread"]}),(0,x.jsx)("button",{onClick:a,className:"px-3 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 w-full sm:w-auto",children:"Mark All as Read"})]})]})]})]})},f=()=>{var e,s;const t=(0,d.Zp)(),l=(0,o.wA)(),i=(0,o.d4)(e=>e.user),n=null===i||void 0===i||null===(e=i.notificationsData)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.data,[m,u]=(0,r.useState)(!0),[f,b]=(0,r.useState)(1),[g]=(0,r.useState)(10),[v,y]=(0,r.useState)(""),[j,N]=(0,r.useState)(""),[w,k]=(0,r.useState)(!1),C=(null===n||void 0===n?void 0:n.list)||[],S=C.filter(e=>!e.isRead).length,A=async()=>{u(!0);try{const e=(0,a.A)((0,a.A)({},v&&{type:v}),j&&{title:{$regex:j,$options:"i"}});w&&(e.isRead=!w);const s={page:f,size:g,query:JSON.stringify(e)};await l((0,c.ne)(s))}catch(e){console.error("Error fetching notifications:",e)}finally{u(!1)}},E=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{await l((0,c.Mo)({_id:e})),s&&t(s),A()}catch(a){console.error("Error marking notification as read:",a)}};(0,r.useEffect)(()=>{A()},[f,v,j,w]);return(0,x.jsxs)("div",{className:"min-h-screen p-3",children:[(0,x.jsx)(p,{onFilterChange:e=>{y(e),b(1)},onSearch:e=>{N(e),b(1)},onMarkAllRead:async()=>{try{await l((0,c.zV)()),A()}catch(e){console.error("Error marking all notifications as read:",e)}},unreadCount:S,filterValue:v,isToggle:w,setIsToggle:k}),(0,x.jsxs)("div",{className:"w-full mx-auto shadow-sm",children:[m?(0,x.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,x.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):0===C.length?(0,x.jsx)("div",{className:"text-center p-8 text-gray-500",children:"No notifications found"}):C.map(e=>(0,x.jsx)(h,{notification:e,onMarkAsRead:E,navigate:t},e._id)),!m&&(null===n||void 0===n?void 0:n.total)>g&&(0,x.jsxs)("div",{className:"flex justify-between items-center p-4 bg-white border-t border-gray-100",children:[(0,x.jsx)("button",{onClick:()=>b(e=>Math.max(1,e-1)),disabled:1===f,className:"px-4 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50",children:"Previous"}),(0,x.jsxs)("span",{className:"text-sm text-gray-500",children:["Page ",f," of ",Math.ceil(n.total/g)]}),(0,x.jsx)("button",{onClick:()=>b(e=>e+1),disabled:f>=Math.ceil(n.total/g),className:"px-4 py-2 border border-gray-300 rounded-md text-sm disabled:opacity-50",children:"Next"})]})]})]})}}}]);
//# sourceMappingURL=72.ab41a812.chunk.js.map